// Language translations
const translations = {
    kk: {
        // Navigation
        "site-title": "Экологиялық ахуалды бақылау жүйесі",
        "nav-home": "Басты бет",
        "nav-news": "Эко-жаңалықтар",
        "nav-data-view": "Деректерді көру",
        "nav-contact": "Байланыс",
        "nav-pollution-data": "Ластану деректерін енгізу",
        "nav-services": "Қызметтер",
        "nav-my-orders": "Менің тапсырыстарым",
        "profile-button": "Тіркелу",
        "logout": "Шығу",
        "admin-panel": "Админ панель",
        
        // Auth modal
        "login-tab": "Кіру",
        "register-tab": "Тіркелу",
        "email-label": "Электрондық пошта",
        "password-label": "Құпия сөз",
        "name-label": "Аты-жөні",
        "confirm-password-label": "Құпия сөзді растау",
        "login-button": "Кіру",
        "register-button": "Тіркелу",
        
        //Poisk
        "apply-filters": "Сүзгілерді қолдану",
        "clear-filters": "Сүзгілерді тазарту",
        "filter-location": "Орналасқан жері бойынша сүзгі",
        "all-data": "Барлық деректер",
        "water-data": "Су ластануы",
        "air-data": "Ауа сапасы",
        "waste-data": "Қоқыс орындары",
        "radioactive-data": "Радиоактивті ластану",
        "noise-data": "Шу ластануы",
        "assessment-data": "Бағалау",
        "no-data-found": "Деректер табылмады",

    
        // Admin panel
        "admin-panel-title": "Админ панелі",
        "show-all-users": "Барлық пайдаланушыларды көрсету",
        "show-all-orders": "Барлық тапсырыстарды көрсету",
        "show-all-pollution-data": "Барлық ластану деректерін көрсету",
        "all-users-list": "Барлық пайдаланушылар:",
        "all-orders-list": "Барлық тапсырыстар:",
        "all-pollution-data-list": "Барлық ластану деректері:",
        "delete-account-title": "Аккаунтты жою",
        "delete-account-user": "Пайдаланушы:",
        "delete-reason-label": "Жою себебі",
        "delete-reason-placeholder": "Себебін жазыңыз...",
        "delete-button": "Жою",
        "cancel-button": "Болдырмау",
        "account-deleted": "Аккаунт сәтті жойылды",
        "account-deleted-reason": "Аккаунт жойылды. Себебі:",
        "delete-admin-error": "Админ аккаунтын жою мүмкін емес",
        
        // Очистка данных в админ панели
        "clear-data-title": "Деректерді тазарту",
        "clear-data-warning": "Ескерту: Бұл операциялардың әсері кері қайтарылмайды!",
        "clear-all-users-button": "Барлық аккаунттарды тазарту (админнен басқа)",
        "clear-all-users-warning": "Админнен басқа барлық пайдаланушыларды жояды: Админ (admin@ad)",
        "clear-all-orders-button": "Барлық тапсырыстарды тазарту",
        "clear-all-orders-warning": "Барлық пайдаланушылардың барлық тапсырыстарын жояды",
        "clear-all-pollution-data-button": "Барлық ластану деректерін тазарту",
        "clear-all-pollution-data-warning": "Барлық ластану деректерін жояды",
        "clear-all-data-button": "БАРЛЫҚ ДЕРЕКТЕРДІ ТАЗАРТУ (барлық аккаунттар, тапсырыстар, деректер)",
        "clear-all-data-warning": "Барлық пайдаланушыларды, тапсырыстарды және ластану деректерін жояды. Тек админ қалады!",
        
        // Подтверждения очистки
        "clear-all-confirm": "Админнен басқа барлық пайдаланушыларды жоюға сенімдісіз бе?",
        "clear-all-orders-confirm": "Барлық тапсырыстарды жоюға сенімдісіз бе?",
        "clear-all-pollution-data-confirm": "Барлық ластану деректерін жоюға сенімдісіз бе?",
        "clear-all-data-confirm": "Барлық пайдаланушыларды (админнен басқа), барлық тапсырыстарды және барлық ластану деректерін жоюға сенімдісіз бе? Тек админ қалады!",
        
        // Сообщения об успехе
        "clear-all-success": "Барлық пайдаланушылар (админнен басқа) сәтті жойылды!",
        "clear-all-orders-success": "Барлық тапсырыстар сәтті жойылды!",
        "clear-all-pollution-data-success": "Барлық ластану деректері сәтті жойылды!",
        "clear-all-data-success": "Барлық деректер сәтті тазартылды! Тек админ қалды.",
        
        // Hero section
        "hero-title": "Экологиялық ахуалды бақылау жүйесі",
        "hero-description": "Қоқыс орындары мен ауа сапасы туралы деректерді енгізу және көруге арналған интеграцияланған жүйе. Таза әлем үшін бірге жұмыс істейік!",
        "hero-button": "Деректерді енгізу",
        "order-hero-button": "Тапсырыс беру",
        

        //news
        "news-date-1": "2025 ж.",
        "news-title-1": "Климаттың өзгеруін мониторингілеу жөніндегі жылдық бюллетень",
        "news-desc-1": "Казгидромет 2025 жылғы климаттық өзгерістер мен Қазақстан аумағындағы ауа температурасы мен жауын‑шашын режимі туралы жылдық бюллетень жариялады.",

        "news-date-2": "2025 ж.",
        "news-title-2": "Қазақстандағы өнеркәсіптік шығарындылар 2 миллион тоннадан асты",
        "news-desc-2": "2025 жылы Қазақстанда 2,27 млн тонна ластаушы заттар шығарылды, олардың едәуір бөлігі ірі өнеркәсіптік өңірлерге тиесілі.",

        "news-date-3": "2025 ж.",
        "news-title-3": "Қазақстан мен Өзбекстанның трансшекаралық өзен экожүйесін қорғауы",
        "news-desc-3": "Жайық және трансшекаралық су нысандары экожүйесін сақтау бойынша қазақстандық‑өзбек бірлескен жұмыс тобының отырысында ластану көздерін түгендеу қаралды.",

        "news-date-4": "2023 ж.",
        "news-title-4": "Қазақстан ауаның ластануын азайту жөніндегі іс‑қимылдарды талқылады",
        "news-desc-4": "Экология министрлігі халықаралық серіктестермен бірге ауа сапасын басқаруды жақсарту және ҚР Экологиялық кодексі шеңберінде ластануды азайту жолдарын талқылады.",

        "news-date-5": "2025 ж.",
        "news-title-5": "Қазақстанда қоршаған орта статистикасының 2025 жылға шолуы",
        "news-desc-5": "Қоршаған орта статистикасына арналған жаңа шолу ауа, су және биоалуантүрлілік бойынша негізгі экологиялық көрсеткіштерді көрсетеді.",

        "news-date-6": "2025 ж.",
        "news-title-6": "ЖЭК шығарындыларын есепке алудың онлайн платформасы іске қосылды",
        "news-desc-6": "Қазақстан парниктік газдар шығарындыларын мониторингілеу, есепке алу және верификациялау үшін электрондық кадастр платформасын іске қосты.",

        "news-date-7": "2025 ж.",
        "news-title-7": "Азиядағы ең таза ауа – Қазақстан қалаларында",
        "news-desc-7": "Жаңа зерттеу Азиядағы ауа сапасы ең жақсы үш қаланың барлығы Қазақстанда орналасқанын көрсетті.",

        "news-date-8": "2025 ж.",
        "news-title-8": "Қазақстанда экологиялық мониторингті кеңейту жоспары",
        "news-desc-8": "Экология министрлігі Қытай серіктестерімен бірге ауа, су және топырақты жоғары дәлдікпен бақылау үшін жаңа цифрлық технологияларды енгізуді жоспарлап отыр.",

        "news-date-9": "2025 ж.",
        "news-title-9": "Теміртаудағы болат зауытының ауа сапасына әсері",
        "news-desc-9": "Зерттеу Теміртау болат зауытының шығарындылары Қазақстандағы ауа ластануына және халық денсаулығына елеулі әсер ететінін көрсетті.",

        "news-date-10": "2019 ж.",
        "news-title-10": "Ғарыштық экологиялық мониторинг технологиялары",
        "news-desc-10": "Қазақстанда қашықтықтан зондтау деректері арқылы шөлейттену мен қалдық полигондарын мониторингілеу бағыттары дамып жатыр.",

        "news-date-11": "2024 ж.",
        "news-title-11": "Арал теңізі деңгейіне қатысты талдау",
        "news-desc-11": "Казгидромет мамандары 2024 жылғы циклондық белсенділіктің Арал теңізі аймағындағы гидрологиялық жағдайға әсерін талдады.",

        "news-date-12": "2024 ж.",
        "news-title-12": "Өскемен тұрғындары ауаның нашар сапасына қарсы шықты",
        "news-desc-12": "Өскемен қаласының тұрғындары шығыс аймақтағы өнеркәсіптік шығарындылар мен ластану мәселелеріне назар аударуды талап етті.",

        "news-date-13": "2025 ж.",
        "news-title-13": "Орташа құрғақшылық 11 өңірде күтілуде",
        "news-desc-13": "Казгидромет мамандары 2025 жылы Қазақстанның 11 өңірінде топырақтың орташа құрғау жағдайы болжанып отырғанын хабарлады.",

        "news-date-14": "2024 ж.",
        "news-title-14": "Қазақстандағы ауа сапасы және денсаулыққа әсері",
        "news-desc-14": "Зерттеулер бойынша, Қазақстанда ауа ластануы жыл сайын 10 мыңнан астам мерзімінен бұрын өлімге және миллиардтаған доллар шығынға әкеледі.",

        "news-date-15": "2024 ж.",
        "news-title-15": "Алматы мен Астанадағы қысқы смог",
        "news-desc-15": "Қыста Алматы мен Астанада PM2.5 деңгейлері ДДСҰ нұсқаулықтарынан ондаған есе асып түседі, бұл тұрғындар денсаулығына қауіп төндіреді.",

        "news-date-16": "2024 ж.",
        "news-title-16": "Қазақстанда ауа сапасын бақылау посттары",
        "news-desc-16": "Казгидромет ел бойынша 70 елді мекенде 171 бақылау бекеті арқылы атмосфералық ауаның сапасын бақылайды.",

        "news-date-17": "2024 ж.",
        "news-title-17": "Павлодар мен Қарағанды өңірлеріндегі шығарындылар",
        "news-desc-17": "Павлодар және Қарағанды облыстары елдегі ластаушы заттар шығарындыларының ең үлкен көлеміне ие, бірақ кей жылдары біртіндеп төмендеу байқалады.",

        "news-date-18": "2024 ж.",
        "news-title-18": "Алматы мен Астанадағы шекті концентрациядан асу",
        "news-desc-18": "2024 жылы алынған ауа сынамаларының 1,6%‑ында шекті рұқсат етілген концентрациялардан асу тіркелді, ең жоғары көрсеткіштер Алматы мен Астанада байқалды.",

        "news-date-19": "2024 ж.",
        "news-title-19": "Өнеркәсіптік шығарындылардағы қауіпті заттар",
        "news-desc-19": "Қазақстандағы өнеркәсіптік шығарындылар құрамында 116‑ға дейін ластаушы зат бар, олардың 40‑қа жуығы жоғары қауіпті санатқа жатады.",

        "news-date-20": "2024 ж.",
        "news-title-20": "Қазақстандағы ауа сапасын мониторингілеудің шектеулері",
        "news-desc-20": "Қазіргі уақытта атмосфералық шығарындылардағы зиянды заттардың шамамен 58%‑ы ғана жүйелі түрде мониторингіленеді, кейбір өңірлерде қамту деңгейі одан да төмен.",

        "news-date-21": "2024 ж.",
        "news-title-21": "Қазақстанның жасыл экономикаға көшу тұжырымдамасы",
        "news-desc-21": "Елдің жасыл экономикаға көшу тұжырымдамасы ауа сапасын жақсарту, қалдықтарды басқару және экожүйелерді қорғау жөніндегі шараларды қамтиды.",

        "news-date-22": "2024 ж.",
        "news-title-22": "Каспий теңізі деңгейінің төмендеуі",
        "news-desc-22": "Каспий теңізі деңгейінің төмендеуі экожүйелерге, жағалау инфрақұрылымына және экономикалық қызметке қауіп төндіреді.",

        "news-date-23": "2024 ж.",
        "news-title-23": "Балқаш көліне климаттық әсер",
        "news-desc-23": "2024 жылы Балқаш көліндегі температуралық аномалиялар су теңгерімі мен экожүйеге қосымша қауіп төндірді.",

        "news-date-24": "2024 ж.",
        "news-title-24": "Қазақстандағы ең ластанған қалалардың бірі – Қарағанды",
        "news-desc-24": "Қарағанды қаласында PM2.5‑тің жоғары орташа деңгейлері тұрғындардың денсаулығына айтарлықтай әсер етіп отыр.",

        "news-date-25": "2024 ж.",
        "news-title-25": "Қазақстандағы парниктік газдар шығарындыларын реттеу",
        "news-desc-25": "Ұлттық шығарындылар сауда жүйесі энергетика және өнеркәсіп секторларындағы ірі компаниялар үшін квоталар мен онлайн сауданы қарастырады.",

        "news-date-26": "2024 ж.",
        "news-title-26": "Қазақстан мен Ресейдің Жайық экожүйесін сақтау жөніндегі комиссиясы",
        "news-desc-26": "Қазақстан‑Ресей комиссиясының төртінші отырысында трансшекаралық Жайық өзенінің экожүйесін сақтауға бағытталған іс‑шаралар қаралды.",

        "news-date-27": "2024 ж.",
        "news-title-27": "Қазақстан мен Өзбекстанның бірлескен экологиялық бағдарламалары",
        "news-desc-27": "Қазақстан мен Өзбекстан 2025–2027 жылдарға арналған трансшекаралық өзендер экожүйесін қалпына келтіру және ластану қаупін азайту бағдарламасын әзірлеуде.",


        // About section
        "about-title": "Жүйе туралы",
        "about-text-1": "Экологиялық ахуалды бақылау жүйесі - бұл қоқыс орындары мен ауа сапасы туралы деректерді жинау, сақтау және талдауға арналған заманауи платформа.",
        "about-text-2": "Біздің жүйе экологиялық мәселелерді шешуге және қоршаған ортаны қорғауға бағытталған. Жүйе арқылы:",
        "about-feature-1": "Қоқыс орындары туралы деректерді енгізу және бақылау",
        "about-feature-2": "Ауа сапасының көрсеткіштерін тіркеу",
        "about-feature-3": "Су ластануы туралы деректерді жинау",
        "about-feature-4": "Экологиялық есептерді қалыптастыру",
        "about-feature-5": "Статистикалық талдауларды жүргізу",
        "about-text-3": "Біздің мақсатымыз - таза және экологиялық таза қаланы құру.",
        
        // Pollution map section
        "pollution-map-title": "Экологиялық карта",
        "pollution-map-description": "Қаланың экологиялық жағдайын көрсететін интерактивті карта. Ластану деңгейлері мен қоршаған ортаның жалпы жағдайын бақылау.",
        "water-map-btn": "Су ластануы",
        "waste-map-btn": "Қоқыс орындары", 
        "air-map-btn": "Ауа сапасы",
        
        // Data view section
        "data-view-title": "Деректерді көру",
        "data-view-description": "Қоқыс орындары, ауа сапасы және су ластануы туралы соңғы деректерді қарау. Экологиялық жағдайды бақылау.",
        "all-data": "Барлық деректер",
        "waste-data": "Қоқыс орындары",
        "air-data": "Ауа сапасы",
        "water-data": "Су ластануы",
        "filter-location": "Орналасқан жері бойынша сүзгі",
        "export-button": "Есепті жүктеу",
        "table-date": "Күні",
        "table-type": "Түрі",
        "table-location": "Орналасқан жері",
        "table-data": "Деректер",
        "table-action": "Әрекет",
        "waste-type": "Қоқыс орындары",
        "air-type": "Ауа сапасы",
        "water-type": "Су ластануы",
        "household-waste": "Тұрмыстық қоқыс, 25.5 м³",
        "details-button": "Толығырақ",
        
        // Pollution data section
        "pollution-data-title": "Ластану деректерін енгізу",
        "pollution-data-description": "Су, ауа және қоқыс ластануы туралы деректерді енгізу және бақылау. Таза қоршаған орта үшін бірге жұмыс істейік!",
        "water-pollution-tab": "Су ластануы",
        "air-pollution-tab": "Ауа ластануы",
        "waste-pollution-tab": "Қоқыс ластануы",
        "radioactive-pollution-tab": "Радиоактивті ластану",
        "noise-pollution-tab": "Шу ластануы",
        
        // Water pollution form
        "water-source-type-label": "Су көзінің түрі",
        "select-water-source-type": "Су көзін таңдаңыз",
        "river-water-source": "Өзен",
        "lake-water-source": "Көл",
        "groundwater-water-source": "Жер асты суы",
        "sea-water-source": "Теңіз",
        "plumbing-water-source": "Cу құбыры",
        "pollution-type-label": "Ластану түрі",
        "select-pollution-type": "Ластану түрін таңдаңыз",
        "chemical-pollution": "Химиялық ластану",
        "biological-pollution": "Биологиялық ластану",
        "physical-pollution": "Физикалық ластану",
        "thermal-pollution": "Ластану жоқ",
        "chemical-pollution-parameters": "Химиялық ластану параметрлері",
        "heavy-metals-label": "Ауыр металдар концентрациясы (мг/л)",
        "nitrates-label": "Нитраттар концентрациясы (мг/л)",
        "phosphates-label": "Фосфаттар концентрациясы (мг/л)",
        "additional-notes-label": "Қосымша ескертулер",
        "submit-water-data-button": "Су ластануы туралы деректерді жіберу",
        "order-id-label": "Тапсырыс нөмірі (міндетті емес)",
        "hide-data-label": "Деректерді жалпы қарауда көрсетпеу",
        "hide-data-user-label": "Деректерді жалпы қарауда көрсетпеу",
        
        // Air pollution form
        "industrial-pollution": "Өнеркәсіптік ластану",
        "transport-pollution": "Көлік ластануы",
        "agricultural-pollution": "Ауылшаруашылық ластану",
        "submit-air-data-button": "Ауа ластануы туралы деректерді жіберу",
        
        // Waste pollution form
        "waste-type-label": "Қоқыс түрі",
        "select-waste-type": "Қоқыс түрін таңдаңыз",
        "household-waste-type": "Тұрмыстық қоқыс",
        "industrial-waste-type": "Өнеркәсіптік қоқыс",
        "construction-waste-type": "Құрылыс қоқысы",
        "hazardous-waste-type": "Қауіпті қоқыс",
        "waste-volume-label": "Қоқыс көлемі (м³)",
        "waste-weight-label": "Қоқыс салмағы (кг)",
        "submit-waste-data-button": "Қоқыс ластануы туралы деректерді жіберу",
        
        // Radioactive pollution form
        "radioactive-pollution-tab": "Радиоактивті ластану",
        "radiation-source-type-label": "Радиация көзінің түрі",
        "select-radiation-source-type": "Радиация көзін таңдаңыз",
        "natural-radiation-source": "Табиғи радиация",
        "industrial-radiation-source": "Өнеркәсіптік радиация",
        "medical-radiation-source": "Медициналық радиация",
        "nuclear-radiation-source": "Ядролық объектілер",
        "accident-radiation-source": "Авариялық жағдай",
        "radiation-level-label": "Радиация деңгейі (мкЗв/сағ)",
        "measurement-distance-label": "Өлшеу қашықтығы (м)",
        "gamma-radiation-label": "Гамма-сәулелену (нГр/сағ)",
        "beta-radiation-label": "Бета-сәулелену (част/см²·мин)",
        "radioactive-isotopes-label": "Радиоактивті изотоптар (егер белгілі болса)",
        "submit-radioactive-data-button": "Радиоактивті ластану туралы деректерді жіберу",
        
        // Noise pollution form
        "noise-pollution-tab": "Шу ластануы",
        "noise-time-label": "Уақыт",
        "measurement-duration-label": "Өлшеу ұзақтығы (минут)",
        "noise-source-type-label": "Шу көзінің түрі",
        "select-noise-source-type": "Шу көзін таңдаңыз",
        "transport-noise-source": "Көлік шуы",
        "industrial-noise-source": "Өнеркәсіптік шу",
        "construction-noise-source": "Құрылыс шуы",
        "commercial-noise-source": "Коммерциялық шу",
        "household-noise-source": "Тұрмыстық шу",
        "entertainment-noise-source": "Көңіл көтеру орындарының шуы",
        "noise-level-day-label": "Күндізгі шу деңгейі (дБА)",
        "noise-level-night-label": "Түнгі шу деңгейі (дБА)",
        "noise-frequency-label": "Шу жиілік сипаттамасы",
        "select-noise-frequency": "Жиілік сипаттамасын таңдаңыз",
        "low-frequency-noise": "Төмен жиілікті шу",
        "mid-frequency-noise": "Орташа жиілікті шу",
        "high-frequency-noise": "Жоғары жиілікті шу",
        "broadband-noise": "Кең жолақты шу",
        "submit-noise-data-button": "Шу ластануы туралы деректерді жіберу",
        
        // Environmental assessment form
        "assessment-form-label": "Экологиялық бағалау",
        "assessment-object-label": "Бағаланатын объект",
        "assessment-type-label": "Экологиялық бағалау түрі",
        "select-assessment-type": "Бағалау түрін таңдаңыз",
        "construction-assessment": "Құрылыс алдындағы экологиялық бағалау",
        "operational-assessment": "Қызмет көрсету кезіндегі экологиялық бағалау",
        "monitoring-assessment": "Мониторингтік бағалау",
        "accident-assessment": "Авариядан кейінгі экологиялық бағалау",
        "strategic-assessment": "Стратегиялық экологиялық бағалау",
        "assessment-parameters-label": "Бағалау параметрлері",
        "air-quality-parameter": "Ауа сапасы",
        "water-quality-parameter": "Су сапасы",
        "soil-quality-parameter": "Топырақ сапасы",
        "noise-level-parameter": "Шу деңгейі",
        "radiation-level-parameter": "Радиация деңгейі",
        "biodiversity-parameter": "Биоәртүрлілік",
        "assessment-conclusion-label": "Бағалау қорытындысы",
        "select-assessment-conclusion": "Қорытындыны таңдаңыз",
        "positive-assessment": "Оң - экологиялық талаптарға сәйкес келеді",
        "conditional-assessment": "Шартты - қосымша шаралар қажет",
        "negative-assessment": "Теріс - экологиялық талаптарға сәйкес келмейді",
        "recommendations-label": "Ұсыныстар мен шаралар",
        "next-assessment-date-label": "Келесі бағалау күні (болжам)",
        "submit-assessment-data-button": "Экологиялық бағалау туралы деректерді жіберу",
        
        // Services page
        "services-title": "Қызметтер",
        "services-description": "Экологиялық мониторинг және талдау қызметтері. Біз сізге келесі қызметтерді ұсынамыз",
        
        // Service details
        "service-1-title": "Суыңыздың жарамдылығын тексеру",
        "service-1-desc": "Суыңыздың химиялық, бактериологиялық және физикалық көрсеткіштерін толық талдау. Ауыр металдар, нитраттар, пестицидтер және басқа ластаушыларды анықтау.",
        "service-1-price": "15 000 ₸",
        
        "service-2-title": "Ауа сапасын тексеру",
        "service-2-desc": "Ауаның ластану деңгейін анықтау: PM2.5, PM10, күкірт диоксиді, азот оксиді, озон және басқа зиянды заттардың концентрациясын өлшеу.",
        "service-2-price": "18 000 ₸",
        
        "service-3-title": "Аймақтың экологиялық жағдайын бағалау",
        "service-3-desc": "Аймақтың жалпы экологиялық жағдайын талдау: топырақтың ластануы, радиациялық фон, биологиялық әртүрлілік және экожүйелік қызметтерді бағалау.",
        "service-3-price": "25 000 ₸",
        
        "service-4-title": "Дыбыстық ластануды өлшеу",
        "service-4-desc": "Күн ішіндегі әртүрлі уақыттарда дыбыстық деңгейді өлшеу және санитарлық нормаларға сәйкестігін тексеру. Шумықтық карта құру.",
        "service-4-price": "12 000 ₸",
        
        "service-5-title": "Толық экологиялық сараптама",
        "service-5-desc": "Объектінің толық экологиялық сараптамасы: ауа, су, топырақ, дыбыстық ластануды талдау, экологиялық қауіптерді бағалау және ұсынымдар дайындау.",
        "service-5-price": "35 000 ₸",
        
        "service-6-title": "Радиациялық мониторинг",
        "service-6-desc": "Радиациялық фонды өлшеу, радиоактивті изотоптарды анықтау, гамма-сәулеленуді бақылау және адам денсаулығына қауіптілігін бағалау.",
        "service-6-price": "20 000 ₸",
        
        "order-service-button": "Тапсырыс беру",
        
        // Order form
        "order-form-title": "Қызметті тапсырыс беру",
        "selected-service-label": "Таңдалған қызмет",
        "order-date-label": "Өлшеу күні",
        "order-address-label": "Мекенжай",
        "order-phone-label": "Телефон нөмірі",
        "order-email-label": "Электрондық пошта",
        "order-notes-label": "Қосымша ескертулер",
        "order-summary-title": "Тапсырыс қорытындысы",
        "order-total-label": "Жалпы сома:",
        "submit-order-button": "Тапсырыс беру",
        "cancel-order-button": "Болдырмау",
        
        // My Orders page
        "my-orders-title": "Менің тапсырыстарым",
        "my-orders-description": "Барлық тапсырыстарыңыздың тізімі, олардың статустары және төлем ақпараты",
        "no-orders-title": "Тапсырыстар табылмады",
        "no-orders-description": "Сізде әлі тапсырыс жоқ. Алғашқы тапсырысты беру үшін Қызметтер бөліміне өтіңіз.",
        
        // Order statuses
        "order-status-pending": "Төлем күтілуде",
        "order-status-paid": "Төленді",
        "order-status-in-progress": "Орындалуда",
        "order-status-completed": "Аяқталды",
        "order-status-cancelled": "Бас тартылды",
        "order-status-in-progress-badge": "Өңделуде",
        
        // Order table headers
        "order-id": "Тапсырыс №",
        "order-service": "Қызмет",
        "order-date": "Күні",
        "order-address": "Мекенжай",
        "order-price": "Бағасы",
        "order-status": "Статусы",
        "order-actions": "Әрекеттер",
        
        // Order actions
        "pay-button": "Төлеу",
        "view-details-button": "Толығырақ",
        "cancel-order-button-action": "Бас тарту",
        
        // Payment modal
        "payment-title": "Төлем жасау",
        "payment-method-label": "Төлем әдісі",
        "payment-card": "Банк картасы",
        "payment-wallet": "Электрондық әмиян",
        "card-number-label": "Карта нөмірі",
        "card-expiry-label": "Мерзімі",
        "card-cvv-label": "CVV",
        "card-holder-label": "Карта иесі",
        "wallet-type-label": "Электрондық әмиян түрі",
        "kaspi-wallet": "Kaspi әмияны",
        "jusan-wallet": "Jusan әмияны",
        "halyk-wallet": "Halyk әмияны",
        "wallet-phone-label": "Телефон нөмірі",
        
        // Payment messages
        "payment-success": "Төлем сәтті аяқталды!",
        "payment-error": "Төлем кезінде қате орын алды.",
        
        // News section
        "news-title": "Экологиялық жаңалықтар",
        "news-description": "Соңғы экологиялық жаңалықтар, есептер және мониторинг деректері",
        
        // News items
        "news-date-1": "2024 ж.",
        "news-title-1": "Ауа бассейнінің жағдайы туралы күнделікті бюллетеньдер",
        "news-desc-1": "Атмосфералық ауаның сапасы және Қазақстан қалаларындағы қолайсыз метеожағдайлар туралы Казгидрометтің күнделікті есептері.",
        
        "news-date-2": "2023–2024 жж.",
        "news-title-2": "Қоршаған ортаның жағдайы туралы айлық ақпараттық бюллетеньдер",
        "news-desc-2": "Ауаның, судың, топырақтың сапасы мен радиациялық жағдайдың өзгеруі туралы Қазақстанның өңірлері бойынша Казгидрометтің жиынтық есептері.",
        
        "news-date-3": "Жаңартылады",
        "news-title-3": "Қоршаған ортаның жағдайын мониторингілеу – Казгидромет",
        "news-desc-3": "Ұлттық мониторинг жүйесінің сипаттамасы: бақылау посттары желісі, бақыланатын ауа, су және топырақ параметрлері.",
        
        // Footer
        "footer-description": "Қоқыс орындары мен ауа сапасы туралы деректерді енгізу және көруге арналған интеграцияланған жүйе.",
        "phone-link": "Телефон: +7 (777) 123-45-67",
        "email-link": "Электронды пошта: info@eco-monitoring.kz",
        "address-link": "Мекенжай: Экология көшесі, 123",
        "quick-links": "Жылдам сілтемелер",
        "contact-title": "Байланыс",
        "copyright": "&copy; 2023 Экологиялық ахуалды бақылау жүйесі. Барлық құқықтар қорғалған.",
        
        // Да/Нет для перевода
        "yes": "Иә",
        "no": "Жоқ",
        
        // Admin order actions
        "complete-order-button": "Орындау",
        "enter-data-button": "Деректерді енгізу",
        "view-data-button": "Деректерді көру",
        "order-completed": "Тапсырыс орындалды",
        "data-entered": "Деректер енгізілді",
        
        // Кнопки удаления для админа
        "delete-user-button": "Жою",
        "delete-order-button": "Тапсырысты жою",
        "delete-data-button": "Деректерді жою",
        "delete-confirm": "Сіз шынымен жойғыңыз келе ме?",
        "delete-user-success": "Пайдаланушы сәтті жойылды",
        "delete-order-success": "Тапсырыс сәтті жойылды",
        "delete-data-success": "Деректер сәтті жойылды",
        
        // Общие
        "location-label": "Орналасқан жері",
        "date-label": "Күні"

    },
    ru: {
        // Navigation
        "site-title": "Система экологического мониторинга",
        "nav-home": "Главная",
        "nav-news": "Эко-новости",
        "nav-data-view": "Просмотр данных",
        "nav-contact": "Контакты",
        "nav-pollution-data": "Ввод данных о загрязнении",
        "nav-services": "Услуги",
        "nav-my-orders": "Мои заказы",
        "profile-button": "Регистрация",
        "logout": "Выйти",
        "admin-panel": "Админ панель",
        
        // Auth modal
        "login-tab": "Вход",
        "register-tab": "Регистрация",
        "email-label": "Электронная почта",
        "password-label": "Пароль",
        "name-label": "ФИО",
        "confirm-password-label": "Подтвердите пароль",
        "login-button": "Войти",
        "register-button": "Зарегистрироваться",
        
        // Admin panel
        "admin-panel-title": "Админ панель",
        "show-all-users": "Показать всех пользователей",
        "show-all-orders": "Показать все заказы",
        "show-all-pollution-data": "Показать все данные о загрязнении",
        "all-users-list": "Все пользователи:",
        "all-orders-list": "Все заказы:",
        "all-pollution-data-list": "Все данные о загрязнении:",
        "delete-account-title": "Удаление аккаунта",
        "delete-account-user": "Пользователь:",
        "delete-reason-label": "Причина удаления",
        "delete-reason-placeholder": "Введите причину...",
        "delete-button": "Удалить",
        "cancel-button": "Отмена",
        "account-deleted": "Аккаунт успешно удален",
        "account-deleted-reason": "Аккаунт удален. Причина:",
        "delete-admin-error": "Невозможно удалить аккаунт администратора",
        
        // Очистка данных в админ панели
        "clear-data-title": "Очистка данных",
        "clear-data-warning": "Внимание: Эти операции необратимы!",
        "clear-all-users-button": "Очистить все аккаунты (кроме админа)",
        "clear-all-users-warning": "Удалит всех пользователей кроме администратора: Админ (admin@ad)",
        "clear-all-orders-button": "Очистить все заказы",
        "clear-all-orders-warning": "Удалит все заказы всех пользователей",
        "clear-all-pollution-data-button": "Очистить все данные о загрязнении",
        "clear-all-pollution-data-warning": "Удалит все данные о загрязнении",
        "clear-all-data-button": "ОЧИСТИТЬ ВСЕ ДАННЫЕ (все аккаунты, заказы, данные)",
        "clear-all-data-warning": "Удалит всех пользователей (кроме админа), все заказы и все данные о загрязнении. Останется только админ!",
        
        // Poisk 
        "apply-filters": "Применить фильтры",
        "clear-filters": "Очистить фильтры",
        "filter-location": "Фильтр по местоположению",
        "all-data": "Все данные",
        "water-data": "Загрязнение воды",
        "air-data": "Качество воздуха",
        "waste-data": "Места отходов",
        "radioactive-data": "Радиоактивное загрязнение",
        "noise-data": "Шумовое загрязнение",
        "assessment-data": "Оценка",
        "no-data-found": "Данные не найдены",

        // Подтверждения очистки
        "clear-all-confirm": "Вы уверены, что хотите удалить всех пользователей кроме администратора?",
        "clear-all-orders-confirm": "Вы уверены, что хотите удалить все заказы?",
        "clear-all-pollution-data-confirm": "Вы уверены, что хотите удалить все данные о загрязнении?",
        "clear-all-data-confirm": "Вы уверены, что хотите удалить всех пользователей (кроме админа), все заказы и все данные о загрязнении? Останется только админ!",
        
        // Сообщения об успехе
        "clear-all-success": "Все пользователи (кроме админа) успешно удалены!",
        "clear-all-orders-success": "Все заказы успешно удалены!",
        "clear-all-pollution-data-success": "Все данные о загрязнении успешно удалены!",
        "clear-all-data-success": "Все данные успешно очищены! Остался только админ.",
        
        
        // Hero section
        "hero-title": "Система экологического мониторинга",
        "hero-description": "Интегрированная система для ввода и просмотра данных о местах отходов и качестве воздуха. Давайте работать вместе для чистого мира!",
        "hero-button": "Ввести данные",
        "order-hero-button": "Сделать заказ",
        
        // About section
        "about-title": "О системе",
        "about-text-1": "Система экологического мониторинга - это современная платформа для сбора, хранения и анализа данных о местах отходов и качестве воздуха.",
        "about-text-2": "Наша система направлена на решение экологических проблем и защиту окружающей среды. С помощью системы:",
        "about-feature-1": "Ввод и мониторинг данных о местах отходов",
        "about-feature-2": "Регистрация показателей качества воздуха",
        "about-feature-3": "Сбор данных о загрязнении воды",
        "about-feature-4": "Формирование экологических отчетов",
        "about-feature-5": "Проведение статистического анализа",
        "about-text-3": "Наша цель - создание чистого и экологически благополучного города.",
        
        // Pollution map section
        "pollution-map-title": "Экологическая карта",
        "pollution-map-description": "Интерактивная карта, показывающая экологическую ситуацию в городе. Мониторинг уровней загрязнения и общего состояния окружающей среды.",
        "water-map-btn": "Загрязнение воды",
        "waste-map-btn": "Места отходов",
        "air-map-btn": "Качество воздуха",
        
        // Data view section
        "data-view-title": "Просмотр данных",
        "data-view-description": "Просмотр последних данных о местах отходов, качестве воздуха и загрязнении воды. Мониторинг экологической ситуации.",
        "all-data": "Все данные",
        "waste-data": "Места отходов",
        "air-data": "Качество воздуха",
        "water-data": "Загрязнение воды",
        "filter-location": "Фильтр по местоположению",
        "export-button": "Скачать отчет",
        "table-date": "Дата",
        "table-type": "Тип",
        "table-location": "Местоположение",
        "table-data": "Данные",
        "table-action": "Действие",
        "waste-type": "Места отходов",
        "air-type": "Качество воздуха",
        "water-type": "Загрязнение воды",
        "household-waste": "Бытовые отходы, 25.5 м³",
        "details-button": "Подробнее",
        
        // Pollution data section
        "pollution-data-title": "Ввод данных о загрязнении",
        "pollution-data-description": "Ввод и мониторинг данных о загрязнении воды, воздуха и отходов. Давайте работать вместе для чистой окружающей среды!",
        "water-pollution-tab": "Загрязнение воды",
        "air-pollution-tab": "Загрязнение воздуха",
        "waste-pollution-tab": "Загрязнение отходами",
        "radioactive-pollution-tab": "Радиоактивное загрязнение",
        "noise-pollution-tab": "Шумовое загрязнение",
        
        // Water pollution form
        "water-source-type-label": "Тип водного источника",
        "select-water-source-type": "Выберите тип водного источника",
        "river-water-source": "Река",
        "lake-water-source": "Озеро",
        "groundwater-water-source": "Подземные воды",
        "sea-water-source": "Море",
        "plumbing-water-source": "Водопровод",
        "pollution-type-label": "Тип загрязнения",
        "select-pollution-type": "Выберите тип загрязнения",
        "chemical-pollution": "Химическое загрязнение",
        "biological-pollution": "Биологическое загрязнение",
        "physical-pollution": "Физическое загрязнение",
        "thermal-pollution": "Загрязнение отсутствует",
        "chemical-pollution-parameters": "Параметры химического загрязнения",
        "heavy-metals-label": "Концентрация тяжелых металлов (мг/л)",
        "nitrates-label": "Концентрация нитратов (мг/л)",
        "phosphates-label": "Концентрация фосфатов (мг/л)",
        "additional-notes-label": "Дополнительные примечания",
        "submit-water-data-button": "Отправить данные о загрязнении воды",
        "order-id-label": "Номер заказа (необязательно)",
        "hide-data-label": "Не показывать данные в общем просмотре",
        "hide-data-user-label": "Не показывать мои данные в общем просмотре",
        

        //news

        "news-date-1": "2024 г.",
        "news-title-1": "Годовой бюллетень по мониторингу изменения климата",
        "news-desc-1": "Казгидромет опубликовал годовой бюллетень о климатических изменениях и режимах температуры воздуха и осадков по Казахстану за 2024 год.",

        "news-date-2": "2024 г.",
        "news-title-2": "Промышленные выбросы в Казахстане превысили 2 миллиона тонн",
        "news-desc-2": "В 2024 году в Казахстане было выброшено 2,27 млн тонн загрязняющих веществ, значительная часть которых приходится на крупные промышленные регионы.",

        "news-date-3": "2024 г.",
        "news-title-3": "Защита экосистемы трансграничных рек Казахстана и Узбекистана",
        "news-desc-3": "На заседании казахстанско‑узбекской рабочей группы обсуждали инвентаризацию источников загрязнения и меры по сохранению экосистемы реки Жайык и других водных объектов.",

        "news-date-4": "2023 г.",
        "news-title-4": "Казахстан обсудил меры по снижению загрязнения воздуха",
        "news-desc-4": "Министерство экологии совместно с международными партнерами обсудило улучшение управления качеством воздуха и снижение загрязнения в рамках Экологического кодекса.",

        "news-date-5": "2025 г.",
        "news-title-5": "Обзор статистики окружающей среды Казахстана за 2024 год",
        "news-desc-5": "Новый обзор по экостатистике отражает ключевые показатели по воздуху, воде и биоразнообразию.",

        "news-date-6": "2018 г.",
        "news-title-6": "Запущена онлайн‑платформа для учета выбросов ПГ",
        "news-desc-6": "В Казахстане запущен электронный кадастр для мониторинга, отчетности и верификации выбросов парниковых газов.",

        "news-date-7": "2025 г.",
        "news-title-7": "Три города с самым чистым воздухом в Азии — в Казахстане",
        "news-desc-7": "Новое исследование показало, что три города с наилучшим качеством воздуха в Азии находятся в Казахстане.",

        "news-date-8": "2025 г.",
        "news-title-8": "Планы по расширению экологического мониторинга в Казахстане",
        "news-desc-8": "Министерство экологии с китайскими партнерами планирует внедрить новые цифровые технологии для высокоточного мониторинга воздуха, воды и почвы.",

        "news-date-9": "2024 г.",
        "news-title-9": "Влияние сталелитейного завода в Темиртау на качество воздуха",
        "news-desc-9": "Исследование показало, что выбросы завода в Темиртау значительно влияют на загрязнение воздуха и здоровье населения в Казахстане.",

        "news-date-10": "2019 г.",
        "news-title-10": "Космический мониторинг окружающей среды",
        "news-desc-10": "В Казахстане развиваются направления по мониторингу опустынивания и полигонов отходов с использованием данных дистанционного зондирования.",

        "news-date-11": "2024 г.",
        "news-title-11": "Анализ изменений уровня Аральского моря",
        "news-desc-11": "Специалисты Казгидромета проанализировали влияние циклонов 2024 года на гидрологическую ситуацию в районе Аральского моря.",

        "news-date-12": "2024 г.",
        "news-title-12": "Жители Усть‑Каменогорска выступили против загрязнения воздуха",
        "news-desc-12": "Жители города Усть‑Каменогорск потребовали внимания к проблемам промышленных выбросов и загрязнения в регионе.",

        "news-date-13": "2025 г.",
        "news-title-13": "В 11 регионах Казахстана ожидается умеренная засуха",
        "news-desc-13": "Специалисты Казгидромета сообщили, что в 2025 году в 11 регионах страны прогнозируются условия умеренной засухи.",

        "news-date-14": "2024 г.",
        "news-title-14": "Качество воздуха и влияние на здоровье в Казахстане",
        "news-desc-14": "Исследования показывают, что загрязнение воздуха в Казахстане ежегодно приводит более чем к 10 тысячам преждевременных смертей и миллиардным экономическим потерям.",

        "news-date-15": "2024 г.",
        "news-title-15": "Зимний смог в Алмате и Астане",
        "news-desc-15": "Зимой уровни PM2.5 в Алмате и Астане многократно превышают рекомендации ВОЗ, что создает серьезные риски для здоровья жителей.",

        "news-date-16": "2024 г.",
        "news-title-16": "Посты мониторинга качества воздуха в Казахстане",
        "news-desc-16": "Казгидромет контролирует качество атмосферного воздуха на 171 посту наблюдений в 70 населенных пунктах страны.",

        "news-date-17": "2024 г.",
        "news-title-17": "Выбросы в Павлодарской и Карагандинской областях",
        "news-desc-17": "Павлодарская и Карагандинская области имеют наибольшие объемы выбросов загрязняющих веществ, но по ряду лет наблюдается постепенное снижение.",

        "news-date-18": "2024 г.",
        "news-title-18": "Превышения ПДК в Алмате и Астане",
        "news-desc-18": "В 2024 году в 1,6% проб воздуха зафиксированы превышения ПДК, наибольшие показатели отмечены в Алмате и Астане.",

        "news-date-19": "2024 г.",
        "news-title-19": "Опасные вещества в промышленных выбросах",
        "news-desc-19": "В составе промышленных выбросов в Казахстане содержится до 116 загрязнителей, около 40 из которых относятся к высокоопасным.",

        "news-date-20": "2024 г.",
        "news-title-20": "Ограниченность мониторинга качества воздуха",
        "news-desc-20": "В настоящее время систематически контролируется около 58% вредных веществ в атмосферных выбросах, а в отдельных регионах охват еще ниже.",

        "news-date-21": "2024 г.",
        "news-title-21": "Концепция перехода Казахстана к «зеленой» экономике",
        "news-desc-21": "Концепция перехода к «зеленой» экономике включает меры по улучшению качества воздуха, управлению отходами и защите экосистем.",

        "news-date-22": "2024 г.",
        "news-title-22": "Понижение уровня Каспийского моря",
        "news-desc-22": "Снижение уровня Каспийского моря угрожает экосистемам, прибрежной инфраструктуре и экономической активности.",

        "news-date-23": "2024 г.",
        "news-title-23": "Климатическое воздействие на озеро Балхаш",
        "news-desc-23": "Температурные аномалии 2024 года на озере Балхаш усилили риски для водного баланса и экосистемы.",

        "news-date-24": "2024 г.",
        "news-title-24": "Караганда как один из самых загрязненных городов",
        "news-desc-24": "Высокие среднегодовые уровни PM2.5 в Караганде существенно влияют на здоровье жителей.",

        "news-date-25": "2024 г.",
        "news-title-25": "Регулирование выбросов парниковых газов в Казахстане",
        "news-desc-25": "Национальная система торговли выбросами предусматривает квоты и онлайн‑торговлю для крупных компаний в энергетике и промышленности.",

        "news-date-26": "2024 г.",
        "news-title-26": "Комиссия Казахстана и России по сохранению экосистемы Жайыка",
        "news-desc-26": "На четвертом заседании комиссии обсуждались меры по сохранению экосистемы трансграничной реки Жайык.",

        "news-date-27": "2024 г.",
        "news-title-27": "Совместные экологические программы Казахстана и Узбекистана",
        "news-desc-27": "Казахстан и Узбекистан разрабатывают программу на 2025–2027 годы по восстановлению экосистемы трансграничных рек и снижению рисков загрязнения." ,


        // Air pollution form
        "industrial-pollution": "Промышленное загрязнение",
        "transport-pollution": "Транспортное загрязнение",
        "agricultural-pollution": "Сельскохозяйственное загрязнение",
        "submit-air-data-button": "Отправить данные о загрязнении воздуха",
        
        // Waste pollution form
        "waste-type-label": "Тип отходов",
        "select-waste-type": "Выберите тип отходов",
        "household-waste-type": "Бытовые отходы",
        "industrial-waste-type": "Промышленные отходы",
        "construction-waste-type": "Строительные отходы",
        "hazardous-waste-type": "Опасные отходы",
        "waste-volume-label": "Объем отходов (м³)",
        "waste-weight-label": "Вес отходов (кг)",
        "submit-waste-data-button": "Отправить данные о загрязнении отходами",
        
        // Radioactive pollution form
        "radioactive-pollution-tab": "Радиоактивное загрязнение",
        "radiation-source-type-label": "Тип источника радиации",
        "select-radiation-source-type": "Выберите тип источника радиации",
        "natural-radiation-source": "Природная радиация",
        "industrial-radiation-source": "Промышленная радиация",
        "medical-radiation-source": "Медицинская радиация",
        "nuclear-radiation-source": "Ядерные объекты",
        "accident-radiation-source": "Аварийная ситуация",
        "radiation-level-label": "Уровень радиации (мкЗв/ч)",
        "measurement-distance-label": "Расстояние измерения (м)",
        "gamma-radiation-label": "Гамма-излучение (нГр/ч)",
        "beta-radiation-label": "Бета-излучение (част/см²·мин)",
        "radioactive-isotopes-label": "Радиоактивные изотопы (если известны)",
        "submit-radioactive-data-button": "Отправить данные о радиоактивном загрязнении",
        
        // Noise pollution form
        "noise-pollution-tab": "Шумовое загрязнение",
        "noise-time-label": "Время",
        "measurement-duration-label": "Продолжительность измерения (минут)",
        "noise-source-type-label": "Тип источника шума",
        "select-noise-source-type": "Выберите тип источника шума",
        "transport-noise-source": "Транспортный шум",
        "industrial-noise-source": "Промышленный шум",
        "construction-noise-source": "Строительный шум",
        "commercial-noise-source": "Коммерческий шум",
        "household-noise-source": "Бытовой шум",
        "entertainment-noise-source": "Шум развлекательных заведений",
        "noise-level-day-label": "Уровень шума днем (дБА)",
        "noise-level-night-label": "Уровень шума ночью (дБА)",
        "noise-frequency-label": "Частотная характеристика шума",
        "select-noise-frequency": "Выберите частотную характеристику",
        "low-frequency-noise": "Низкочастотный шум",
        "mid-frequency-noise": "Среднечастотный шум",
        "high-frequency-noise": "Высокочастотный шум",
        "broadband-noise": "Широкополосный шум",
        "submit-noise-data-button": "Отправить данные о шумовом загрязнении",
        
        // Environmental assessment form
        "assessment-form-label": "Экологическая оценка",
        "assessment-object-label": "Оцениваемый объект",
        "assessment-type-label": "Тип экологической оценки",
        "select-assessment-type": "Выберите тип оценки",
        "construction-assessment": "Экологическая оценка перед строительством",
        "operational-assessment": "Экологическая оценка при эксплуатации",
        "monitoring-assessment": "Мониторинговая оценка",
        "accident-assessment": "Экологическая оценка после аварии",
        "strategic-assessment": "Стратегическая экологическая оценка",
        "assessment-parameters-label": "Параметры оценки",
        "air-quality-parameter": "Качество воздуха",
        "water-quality-parameter": "Качество воды",
        "soil-quality-parameter": "Качество почвы",
        "noise-level-parameter": "Уровень шума",
        "radiation-level-parameter": "Уровень радиации",
        "biodiversity-parameter": "Биоразнообразие",
        "assessment-conclusion-label": "Заключение оценки",
        "select-assessment-conclusion": "Выберите заключение",
        "positive-assessment": "Положительное - соответствует экологическим требованиям",
        "conditional-assessment": "Условное - требуются дополнительные меры",
        "negative-assessment": "Отрицательное - не соответствует экологическим требованиям",
        "recommendations-label": "Рекомендации и меры",
        "next-assessment-date-label": "Дата следующей оценки (прогноз)",
        "submit-assessment-data-button": "Отправить данные об экологической оценке",
        
        // Services page
        "services-title": "Услуги",
        "services-description": "Услуги экологического мониторинга и анализа. Мы предлагаем вам следующие услуги",
        
        // Service details
        "service-1-title": "Проверка воды на пригодность",
        "service-1-desc": "Полный анализ химических, бактериологических и физических показателей вашей воды. Выявление тяжелых металлов, нитратов, пестицидов и других загрязнителей.",
        "service-1-price": "15 000 ₸",
        
        "service-2-title": "Проверка качества воздуха",
        "service-2-desc": "Определение уровня загрязнения воздуха: измерение концентрации PM2.5, PM10, диоксида серы, оксидов азота, озона и других вредных веществ.",
        "service-2-price": "18 000 ₸",
        
        "service-3-title": "Оценка экологического состояния территории",
        "service-3-desc": "Анализ общего экологического состояния территории: загрязнение почвы, радиационный фон, биоразнообразие и оценка экосистемных услуг.",
        "service-3-price": "25 000 ₸",
        
        "service-4-title": "Измерение шумового загрязнения",
        "service-4-desc": "Измерение уровня шума в разное время суток и проверка соответствия санитарным нормам. Создание шумовой карты.",
        "service-4-price": "12 000 ₸",
        
        "service-5-title": "Полная экологическая экспертиза",
        "service-5-desc": "Полная экологическая экспертиза объекта: анализ воздуха, воды, почвы, шумового загрязнения, оценка экологических рисков и подготовка рекомендаций.",
        "service-5-price": "35 000 ₸",
        
        "service-6-title": "Радиационный мониторинг",
        "service-6-desc": "Измерение радиационного фона, выявление радиоактивных изотопов, контроль гамма-излучения и оценка опасности для здоровья человека.",
        "service-6-price": "20 000 ₸",
        
        "order-service-button": "Заказать",
        
        // Order form
        "order-form-title": "Заказ услуги",
        "selected-service-label": "Выбранная услуга",
        "order-date-label": "Дата измерения",
        "order-address-label": "Адрес",
        "order-phone-label": "Номер телефона",
        "order-email-label": "Электронная почта",
        "order-notes-label": "Дополнительные примечания",
        "order-summary-title": "Итог заказа",
        "order-total-label": "Итоговая сумма:",
        "submit-order-button": "Оформить заказ",
        "cancel-order-button": "Отмена",
        
        // My Orders page
        "my-orders-title": "Мои заказы",
        "my-orders-description": "Список всех ваших заказов, их статусы и информация об оплате",
        "no-orders-title": "Заказы не найдены",
        "no-orders-description": "У вас еще нет заказов. Перейдите в раздел Услуги, чтобы оформить первый заказ.",
        
        // Order statuses
        "order-status-pending": "Ожидает оплаты",
        "order-status-paid": "Оплачен",
        "order-status-in-progress": "В работе",
        "order-status-completed": "Завершен",
        "order-status-cancelled": "Отменен",
        "order-status-in-progress-badge": "В обработке",
        
        // Order table headers
        "order-id": "Заказ №",
        "order-service": "Услуга",
        "order-date": "Дата",
        "order-address": "Адрес",
        "order-price": "Цена",
        "order-status": "Статус",
        "order-actions": "Действия",
        
        // Order actions
        "pay-button": "Оплатить",
        "view-details-button": "Подробнее",
        "cancel-order-button-action": "Отменить",
        
        // Payment modal
        "payment-title": "Оплата заказа",
        "payment-method-label": "Способ оплаты",
        "payment-card": "Банковская карта",
        "payment-wallet": "Электронный кошелек",
        "card-number-label": "Номер карты",
        "card-expiry-label": "Срок действия",
        "card-cvv-label": "CVV",
        "card-holder-label": "Владелец карты",
        "wallet-type-label": "Тип электронного кошелька",
        "kaspi-wallet": "Кошелек Kaspi",
        "jusan-wallet": "Кошелек Jusan",
        "halyk-wallet": "Кошелек Halyk",
        "wallet-phone-label": "Номер телефона",
        
        // Payment messages
        "payment-success": "Оплата успешно завершена!",
        "payment-error": "Произошла ошибка при оплате.",
        
        // News section
        "news-title": "Экологические новости",
        "news-description": "Последние экологические новости, отчеты и данные мониторинга",
        
        // News items
        "news-date-1": "2024 г.",
        "news-title-1": "Ежедневные бюллетени о состоянии воздушного бассейна (НМУ)",
        "news-desc-1": "Ежедневные сводки Казгидромета по качеству атмосферного воздуха и неблагоприятным метеоусловиям в городах Казахстана.",
        
        "news-date-2": "2023–2024 гг.",
        "news-title-2": "Ежемесячные бюллетени о состоянии окружающей среды",
        "news-desc-2": "Сводные отчеты Казгидромета об изменении качества воздуха, вод, почв и радиационной обстановки по регионам Казахстана.",
        
        "news-date-3": "Обновляется",
        "news-title-3": "Мониторинг состояния окружающей среды – Казгидромет",
        "news-desc-3": "Описание национальной системы мониторинга: сеть постов наблюдений, контролируемые параметры воздуха, вод и почв.",
        
        // Footer
        "footer-description": "Интегрированная система для ввода и просмотра данных о местах отходов и качестве воздуха.",
        "phone-link": "Телефон: +7 (777) 123-45-67",
        "email-link": "Электронная почта: info@eco-monitoring.kz",
        "address-link": "Адрес: ул. Экологическая, 123",
        "quick-links": "Быстрые ссылки",
        "contact-title": "Контакты",
        "copyright": "&copy; 2023 Система экологического мониторинга. Все права защищены.",
        
        // Да/Нет для перевода
        "yes": "Да",
        "no": "Нет",
        
        // Admin order actions
        "complete-order-button": "Выполнить",
        "enter-data-button": "Ввести данные",
        "view-data-button": "Просмотреть данные",
        "order-completed": "Заказ выполнен",
        "data-entered": "Данные введены",
        
        // Кнопки удаления для админа
        "delete-user-button": "Удалить",
        "delete-order-button": "Удалить заказ",
        "delete-data-button": "Удалить данные",
        "delete-confirm": "Вы уверены, что хотите удалить?",
        "delete-user-success": "Пользователь успешно удален",
        "delete-order-success": "Заказ успешно удален",
        "delete-data-success": "Данные успешно удалены",
        
        // Общие
        "location-label": "Местоположение",
        "date-label": "Дата"
        
    },
    en: {
        // Navigation
        "site-title": "Environmental Monitoring System",
        "nav-home": "Home",
        "nav-news": "Eco-News",
        "nav-data-view": "Data View",
        "nav-contact": "Contact",
        "nav-pollution-data": "Pollution Data Entry",
        "nav-services": "Services",
        "nav-my-orders": "My Orders",
        "profile-button": "Register",
        "logout": "Logout",
        "admin-panel": "Admin Panel",
        
        // Auth modal
        "login-tab": "Login",
        "register-tab": "Register",
        "email-label": "Email",
        "password-label": "Password",
        "name-label": "Full Name",
        "confirm-password-label": "Confirm Password",
        "login-button": "Login",
        "register-button": "Register",
        
        // Admin panel
        "admin-panel-title": "Admin Panel",
        "show-all-users": "Show All Users",
        "show-all-orders": "Show All Orders",
        "show-all-pollution-data": "Show All Pollution Data",
        "all-users-list": "All Users:",
        "all-orders-list": "All Orders:",
        "all-pollution-data-list": "All Pollution Data:",
        "delete-account-title": "Delete Account",
        "delete-account-user": "User:",
        "delete-reason-label": "Deletion Reason",
        "delete-reason-placeholder": "Enter reason...",
        "delete-button": "Delete",
        "cancel-button": "Cancel",
        "account-deleted": "Account successfully deleted",
        "account-deleted-reason": "Account deleted. Reason:",
        "delete-admin-error": "Cannot delete admin account",
        
        // Очистка данных в админ панели
        "clear-data-title": "Data Cleaning",
        "clear-data-warning": "Warning: These operations are irreversible!",
        "clear-all-users-button": "Clear all accounts (except admin)",
        "clear-all-users-warning": "Will delete all users except administrator: Admin (admin@ad)",
        "clear-all-orders-button": "Clear all orders",
        "clear-all-orders-warning": "Will delete all orders of all users",
        "clear-all-pollution-data-button": "Clear all pollution data",
        "clear-all-pollution-data-warning": "Will delete all pollution data",
        "clear-all-data-button": "CLEAR ALL DATA (all accounts, orders, data)",
        "clear-all-data-warning": "Will delete all users (except admin), all orders and all pollution data. Only admin will remain!",
        
        // Poisk
        "apply-filters": "Apply filters",
        "clear-filters": "Clear filters",
        "filter-location": "Filter by location",
        "all-data": "All data",
        "water-data": "Water pollution",
        "air-data": "Air quality",
        "waste-data": "Waste sites",
        "radioactive-data": "Radioactive pollution",
        "noise-data": "Noise pollution",
        "assessment-data": "Assessment",
        "no-data-found": "No data found",


        // Подтверждения очистки
        "clear-all-confirm": "Are you sure you want to delete all users except administrator?",
        "clear-all-orders-confirm": "Are you sure you want to delete all orders?",
        "clear-all-pollution-data-confirm": "Are you sure you want to delete all pollution data?",
        "clear-all-data-confirm": "Are you sure you want to delete all users (except admin), all orders and all pollution data? Only admin will remain!",
        
        // Сообщения об успехе
        "clear-all-success": "All users (except admin) successfully deleted!",
        "clear-all-orders-success": "All orders successfully deleted!",
        "clear-all-pollution-data-success": "All pollution data successfully deleted!",
        "clear-all-data-success": "All data successfully cleared! Only admin remains.",
        
        
        // Hero section
        "hero-title": "Environmental Monitoring System",
        "hero-description": "Integrated system for entering and viewing data on waste sites and air quality. Let's work together for a clean world!",
        "hero-button": "Enter Data",
        "order-hero-button": "Place Order",
        
        // About section
        "about-title": "About the System",
        "about-text-1": "Environmental Monitoring System is a modern platform for collecting, storing and analyzing data on waste sites and air quality.",
        "about-text-2": "Our system is aimed at solving environmental problems and protecting the environment. Through the system:",
        "about-feature-1": "Entering and monitoring data on waste sites",
        "about-feature-2": "Recording air quality indicators",
        "about-feature-3": "Collecting water pollution data",
        "about-feature-4": "Generating environmental reports",
        "about-feature-5": "Conducting statistical analysis",
        "about-text-3": "Our goal is to create a clean and environmentally friendly city.",
        
        // Pollution map section
        "pollution-map-title": "Environmental Map",
        "pollution-map-description": "Interactive map showing the environmental situation in the city. Monitoring pollution levels and the general state of the environment.",
        "water-map-btn": "Water Pollution",
        "waste-map-btn": "Waste Sites", 
        "air-map-btn": "Air Quality",
        
        // Data view section
        "data-view-title": "Data View",
        "data-view-description": "View the latest data on waste sites, air quality and water pollution. Monitor the environmental situation.",
        "all-data": "All Data",
        "waste-data": "Waste Sites",
        "air-data": "Air Quality",
        "water-data": "Water Pollution",
        "filter-location": "Filter by location",
        "export-button": "Download Report",
        "table-date": "Date",
        "table-type": "Type",
        "table-location": "Location",
        "table-data": "Data",
        "table-action": "Action",
        "waste-type": "Waste Sites",
        "air-type": "Air Quality",
        "water-type": "Water Pollution",
        "household-waste": "Household waste, 25.5 m³",
        "details-button": "Details",
        
        // Pollution data section
        "pollution-data-title": "Pollution Data Entry",
        "pollution-data-description": "Entering and monitoring water, air and waste pollution data. Let's work together for a clean environment!",
        "water-pollution-tab": "Water Pollution",
        "air-pollution-tab": "Air Pollution",
        "waste-pollution-tab": "Waste Pollution",
        "radioactive-pollution-tab": "Radioactive Pollution",
        "noise-pollution-tab": "Noise Pollution",
        
        // Water pollution form
        "water-source-type-label": "Water Source Type",
        "select-water-source-type": "Select water source type",
        "river-water-source": "River",
        "lake-water-source": "Lake",
        "groundwater-water-source": "Groundwater",
        "sea-water-source": "Sea",
        "plumbing-water-source": "Plumbing",
        "pollution-type-label": "Pollution Type",
        "select-pollution-type": "Select pollution type",
        "chemical-pollution": "Chemical Pollution",
        "biological-pollution": "Biological Pollution",
        "physical-pollution": "Physical Pollution",
        "thermal-pollution": "Pollution is absent",
        "chemical-pollution-parameters": "Chemical Pollution Parameters",
        "heavy-metals-label": "Heavy metals concentration (mg/L)",
        "nitrates-label": "Nitrates concentration (mg/L)",
        "phosphates-label": "Phosphates concentration (mg/L)",
        "additional-notes-label": "Additional notes",
        "submit-water-data-button": "Submit Water Pollution Data",
        "order-id-label": "Order number (optional)",
        "hide-data-label": "Do not show data in public view",
        "hide-data-user-label": "Do not show my data in public view",
        

        //news

        "news-date-1": "2024",
        "news-title-1": "Annual Climate Change Monitoring Bulletin",
        "news-desc-1": "Kazhydromet released the 2024 annual bulletin on climate change and air temperature and precipitation patterns across Kazakhstan.",
      
        "news-date-2": "2024",
        "news-title-2": "Industrial Emissions in Kazakhstan Exceed 2 Million Tons",
        "news-desc-2": "In 2024, Kazakhstan emitted 2.27 million tons of pollutants, with major industrial regions accounting for a significant share.",
      
        "news-date-3": "2024",
        "news-title-3": "Kazakhstan and Uzbekistan Protect Transboundary River Ecosystems",
        "news-desc-3": "At the Kazakhstan–Uzbekistan joint working group meeting, officials discussed pollution source inventory and measures to preserve the Ural River and other transboundary water ecosystems.",
      
        "news-date-4": "2023",
        "news-title-4": "Kazakhstan Discusses Actions to Reduce Air Pollution",
        "news-desc-4": "The Ministry of Ecology and partners discussed improving air quality management and reducing pollution under Kazakhstan’s Environmental Code.",
      
        "news-date-5": "2025",
        "news-title-5": "Review of Kazakhstan’s 2024 Environment Statistics",
        "news-desc-5": "A new environment statistics review highlights key indicators on air, water, and biodiversity in Kazakhstan.",
      
        "news-date-6": "2018",
        "news-title-6": "Online Platform for GHG Monitoring Launched",
        "news-desc-6": "Kazakhstan launched an electronic cadastre platform for monitoring, reporting, and verifying greenhouse gas emissions.",
      
        "news-date-7": "2025",
        "news-title-7": "Asia’s Top Three Towns for Air Quality Are in Kazakhstan",
        "news-desc-7": "A recent study found that the three towns with the best air quality in Asia are all located in Kazakhstan.",
      
        "news-date-8": "2025",
        "news-title-8": "Plans to Expand Environmental Monitoring in Kazakhstan",
        "news-desc-8": "The Ecology Ministry and Chinese partners plan to introduce new digital technologies for high‑precision monitoring of air, water, and soil.",
      
        "news-date-9": "2024",
        "news-title-9": "Air Quality Impacts of Temirtau Steel Plant",
        "news-desc-9": "A study found that emissions from the Temirtau steel plant significantly affect air pollution and public health in Kazakhstan.",
      
        "news-date-10": "2019",
        "news-title-10": "Space‑Based Environmental Monitoring Technologies",
        "news-desc-10": "Kazakhstan is developing remote sensing‑based monitoring of desertification and waste landfills.",
      
        "news-date-11": "2024",
        "news-title-11": "Analysis of Aral Sea Water Level Changes",
        "news-desc-11": "Kazhydromet experts analyzed how 2024 cyclonic activity affected the hydrological situation in the Aral Sea region.",
      
        "news-date-12": "2024",
        "news-title-12": "Oskemen Residents Protest Poor Air Quality",
        "news-desc-12": "Residents of Oskemen demanded attention to industrial emissions and air pollution issues in East Kazakhstan.",
      
        "news-date-13": "2025",
        "news-title-13": "Moderate Drought Expected in 11 Regions",
        "news-desc-13": "Kazhydromet specialists report that 11 regions of Kazakhstan are expected to face moderate dry conditions in 2025.",
      
        "news-date-14": "2024",
        "news-title-14": "Air Quality and Health Impacts in Kazakhstan",
        "news-desc-14": "Studies estimate that air pollution in Kazakhstan causes over 10,000 premature deaths and billions in economic losses each year.",
      
        "news-date-15": "2024",
        "news-title-15": "Winter Smog in Almaty and Astana",
        "news-desc-15": "In winter, PM2.5 levels in Almaty and Astana exceed WHO guidelines many times over, posing serious health risks.",
      
        "news-date-16": "2024",
        "news-title-16": "Air Quality Monitoring Posts in Kazakhstan",
        "news-desc-16": "Kazhydromet monitors atmospheric air quality at 171 observation posts across 70 localities in Kazakhstan.",
      
        "news-date-17": "2024",
        "news-title-17": "Emissions in Pavlodar and Karagandy Regions",
        "news-desc-17": "Pavlodar and Karagandy regions record the largest volumes of emissions, though some years show a gradual decline.",
      
        "news-date-18": "2024",
        "news-title-18": "Exceedances of Air Quality Limits in Almaty and Astana",
        "news-desc-18": "In 2024, 1.6% of air samples exceeded permissible limits, with the highest rates in Almaty and Astana.",
      
        "news-date-19": "2024",
        "news-title-19": "Hazardous Substances in Industrial Emissions",
        "news-desc-19": "Industrial emissions in Kazakhstan contain up to 116 pollutants, with about 40 classified as highly hazardous.",
      
        "news-date-20": "2024",
        "news-title-20": "Limitations of Air Quality Monitoring in Kazakhstan",
        "news-desc-20": "Currently, only about 58% of harmful substances in atmospheric emissions are monitored systematically, with even lower coverage in some regions.",
      
        "news-date-21": "2024",
        "news-title-21": "Kazakhstan’s Green Economy Transition Concept",
        "news-desc-21": "The green economy transition concept includes measures to improve air quality, manage waste, and protect ecosystems.",
      
        "news-date-22": "2024",
        "news-title-22": "Caspian Sea Water Level Decline",
        "news-desc-22": "The decline of the Caspian Sea level threatens ecosystems, coastal infrastructure, and economic activity.",
      
        "news-date-23": "2024",
        "news-title-23": "Climate Impacts on Lake Balkhash",
        "news-desc-23": "Temperature anomalies in 2024 in Lake Balkhash increased risks for the water balance and the lake’s ecosystem.",
      
        "news-date-24": "2024",
        "news-title-24": "Karaganda Among the Most Polluted Cities",
        "news-desc-24": "High average PM2.5 levels in Karaganda significantly affect residents’ health.",
      
        "news-date-25": "2024",
        "news-title-25": "Regulation of Greenhouse Gas Emissions in Kazakhstan",
        "news-desc-25": "The national emissions trading system sets quotas and enables online trading for major companies in the energy and industrial sectors.",
      
        "news-date-26": "2024",
        "news-title-26": "Kazakh–Russian Commission on Ural River Ecosystem",
        "news-desc-26": "The fourth commission meeting reviewed measures to conserve the ecosystem of the transboundary Ural (Zhaiyk) River.",
      
        "news-date-27": "2024",
        "news-title-27": "Joint Environmental Programs of Kazakhstan and Uzbekistan",
        "news-desc-27": "Kazakhstan and Uzbekistan are preparing a 2025–2027 program to restore transboundary river ecosystems and reduce pollution risks.",


        // Air pollution form
        "industrial-pollution": "Industrial Pollution",
        "transport-pollution": "Transport Pollution",
        "agricultural-pollution": "Agricultural Pollution",
        "submit-air-data-button": "Submit Air Pollution Data",
        
        // Waste pollution form
        "waste-type-label": "Waste Type",
        "select-waste-type": "Select waste type",
        "household-waste-type": "Household Waste",
        "industrial-waste-type": "Industrial Waste",
        "construction-waste-type": "Construction Waste",
        "hazardous-waste-type": "Hazardous Waste",
        "waste-volume-label": "Waste Volume (m³)",
        "waste-weight-label": "Waste Weight (kg)",
        "submit-waste-data-button": "Submit Waste Pollution Data",
        
        // Radioactive pollution form
        "radioactive-pollution-tab": "Radioactive Pollution",
        "radiation-source-type-label": "Radiation Source Type",
        "select-radiation-source-type": "Select radiation source type",
        "natural-radiation-source": "Natural Radiation",
        "industrial-radiation-source": "Industrial Radiation",
        "medical-radiation-source": "Medical Radiation",
        "nuclear-radiation-source": "Nuclear Facilities",
        "accident-radiation-source": "Accident Situation",
        "radiation-level-label": "Radiation Level (µSv/h)",
        "measurement-distance-label": "Measurement Distance (m)",
        "gamma-radiation-label": "Gamma Radiation (nGy/h)",
        "beta-radiation-label": "Beta Radiation (particles/cm²·min)",
        "radioactive-isotopes-label": "Radioactive Isotopes (if known)",
        "submit-radioactive-data-button": "Submit Radioactive Pollution Data",
        
        // Noise pollution form
        "noise-pollution-tab": "Noise Pollution",
        "noise-time-label": "Time",
        "measurement-duration-label": "Measurement Duration (minutes)",
        "noise-source-type-label": "Noise Source Type",
        "select-noise-source-type": "Select noise source type",
        "transport-noise-source": "Transport Noise",
        "industrial-noise-source": "Industrial Noise",
        "construction-noise-source": "Construction Noise",
        "commercial-noise-source": "Commercial Noise",
        "household-noise-source": "Household Noise",
        "entertainment-noise-source": "Entertainment Venue Noise",
        "noise-level-day-label": "Daytime Noise Level (dBA)",
        "noise-level-night-label": "Nighttime Noise Level (dBA)",
        "noise-frequency-label": "Noise Frequency Characteristic",
        "select-noise-frequency": "Select frequency characteristic",
        "low-frequency-noise": "Low Frequency Noise",
        "mid-frequency-noise": "Mid Frequency Noise",
        "high-frequency-noise": "High Frequency Noise",
        "broadband-noise": "Broadband Noise",
        "submit-noise-data-button": "Submit Noise Pollution Data",
        
        // Environmental assessment form
        "assessment-form-label": "Environmental Assessment",
        "assessment-object-label": "Assessment Object",
        "assessment-type-label": "Environmental Assessment Type",
        "select-assessment-type": "Select assessment type",
        "construction-assessment": "Pre-construction Environmental Assessment",
        "operational-assessment": "Operational Environmental Assessment",
        "monitoring-assessment": "Monitoring Assessment",
        "accident-assessment": "Post-accident Environmental Assessment",
        "strategic-assessment": "Strategic Environmental Assessment",
        "assessment-parameters-label": "Assessment Parameters",
        "air-quality-parameter": "Air Quality",
        "water-quality-parameter": "Water Quality",
        "soil-quality-parameter": "Soil Quality",
        "noise-level-parameter": "Noise Level",
        "radiation-level-parameter": "Radiation Level",
        "biodiversity-parameter": "Biodiversity",
        "assessment-conclusion-label": "Assessment Conclusion",
        "select-assessment-conclusion": "Select conclusion",
        "positive-assessment": "Positive - meets environmental requirements",
        "conditional-assessment": "Conditional - additional measures required",
        "negative-assessment": "Negative - does not meet environmental requirements",
        "recommendations-label": "Recommendations and Measures",
        "next-assessment-date-label": "Next Assessment Date (forecast)",
        "submit-assessment-data-button": "Submit Environmental Assessment Data",
        
        // Services page
        "services-title": "Services",
        "services-description": "Environmental monitoring and analysis services. We offer you the following services",
        
        // Service details
        "service-1-title": "Water suitability testing",
        "service-1-desc": "Complete analysis of chemical, bacteriological and physical indicators of your water. Detection of heavy metals, nitrates, pesticides and other contaminants.",
        "service-1-price": "15 000 ₸",
        
        "service-2-title": "Air quality testing",
        "service-2-desc": "Determining the level of air pollution: measuring concentrations of PM2.5, PM10, sulfur dioxide, nitrogen oxides, ozone and other harmful substances.",
        "service-2-price": "18 000 ₸",
        
        "service-3-title": "Assessment of the ecological condition of the territory",
        "service-3-desc": "Analysis of the general ecological condition of the territory: soil pollution, radiation background, biodiversity and assessment of ecosystem services.",
        "service-3-price": "25 000 ₸",
        
        "service-4-title": "Noise pollution measurement",
        "service-4-desc": "Measuring noise levels at different times of the day and checking compliance with sanitary standards. Creating a noise map.",
        "service-4-price": "12 000 ₸",
        
        "service-5-title": "Complete environmental assessment",
        "service-5-desc": "Complete environmental assessment of the facility: analysis of air, water, soil, noise pollution, assessment of environmental risks and preparation of recommendations.",
        "service-5-price": "35 000 ₸",
        
        "service-6-title": "Radiation monitoring",
        "service-6-desc": "Measurement of radiation background, detection of radioactive isotopes, monitoring of gamma radiation and assessment of danger to human health.",
        "service-6-price": "20 000 ₸",
        
        "order-service-button": "Order",
        
        // Order form
        "order-form-title": "Order Service",
        "selected-service-label": "Selected Service",
        "order-date-label": "Measurement Date",
        "order-address-label": "Address",
        "order-phone-label": "Phone Number",
        "order-email-label": "Email",
        "order-notes-label": "Additional Notes",
        "order-summary-title": "Order Summary",
        "order-total-label": "Total Amount:",
        "submit-order-button": "Place Order",
        "cancel-order-button": "Cancel",
        
        // My Orders page
        "my-orders-title": "My Orders",
        "my-orders-description": "List of all your orders, their statuses and payment information",
        "no-orders-title": "No Orders Found",
        "no-orders-description": "You don't have any orders yet. Go to the Services section to place your first order.",
        
        // Order statuses
        "order-status-pending": "Pending Payment",
        "order-status-paid": "Paid",
        "order-status-in-progress": "In Progress",
        "order-status-completed": "Completed",
        "order-status-cancelled": "Cancelled",
        "order-status-in-progress-badge": "Processing",
        
        // Order table headers
        "order-id": "Order №",
        "order-service": "Service",
        "order-date": "Date",
        "order-address": "Address",
        "order-price": "Price",
        "order-status": "Status",
        "order-actions": "Actions",
        
        // Order actions
        "pay-button": "Pay",
        "view-details-button": "Details",
        "cancel-order-button-action": "Cancel",
        
        // Payment modal
        "payment-title": "Make Payment",
        "payment-method-label": "Payment Method",
        "payment-card": "Bank Card",
        "payment-wallet": "E-wallet",
        "card-number-label": "Card Number",
        "card-expiry-label": "Expiry Date",
        "card-cvv-label": "CVV",
        "card-holder-label": "Card Holder",
        "wallet-type-label": "E-wallet Type",
        "kaspi-wallet": "Kaspi Wallet",
        "jusan-wallet": "Jusan Wallet",
        "halyk-wallet": "Halyk Wallet",
        "wallet-phone-label": "Phone Number",
        
        // Payment messages
        "payment-success": "Payment completed successfully!",
        "payment-error": "An error occurred during payment.",
        
        // News section
        "news-title": "Environmental News",
        "news-description": "Latest environmental news, reports and monitoring data",
        
        // News items
        "news-date-1": "2024",
        "news-title-1": "Daily bulletins on the state of the air basin",
        "news-desc-1": "Daily reports from Kazhydromet on the quality of atmospheric air and adverse weather conditions in the cities of Kazakhstan.",
        
        "news-date-2": "2023–2024",
        "news-title-2": "Monthly information bulletins on the state of the environment",
        "news-desc-2": "Summary reports from Kazhydromet on changes in air, water, soil quality and radiation situation by regions of Kazakhstan.",
        
        "news-date-3": "Updated",
        "news-title-3": "Monitoring the state of the environment – Kazhydromet",
        "news-desc-3": "Description of the national monitoring system: network of observation posts, controlled air, water and soil parameters.",
        
        // Footer
        "footer-description": "Integrated system for entering and viewing data on waste sites and air quality.",
        "phone-link": "Phone: +7 (777) 123-45-67",
        "email-link": "Email: info@eco-monitoring.kz",
        "address-link": "Address: Ecology Street, 123",
        "quick-links": "Quick Links",
        "contact-title": "Contact",
        "copyright": "&copy; 2023 Environmental Monitoring System. All rights reserved.",
        
        // Да/Нет для перевода
        "yes": "Yes",
        "no": "No",
        
        // Admin order actions
        "complete-order-button": "Complete",
        "enter-data-button": "Enter Data",
        "view-data-button": "View Data",
        "order-completed": "Order completed",
        "data-entered": "Data entered",
        
        // Кнопки удаления для админа
        "delete-user-button": "Delete",
        "delete-order-button": "Delete Order",
        "delete-data-button": "Delete Data",
        "delete-confirm": "Are you sure you want to delete?",
        "delete-user-success": "User successfully deleted",
        "delete-order-success": "Order successfully deleted",
        "delete-data-success": "Data successfully deleted",
        
        // Общие
        "location-label": "Location",
        "date-label": "Date"

        
    }
};


// Services data
const servicesData = {
    1: {
        id: 1,
        name_kk: "Суыңыздың жарамдылығын тексеру",
        name_ru: "Проверка воды на пригодность",
        name_en: "Water suitability testing",
        price: 15000,
        description_kk: "Суыңыздың химиялық, бактериологиялық және физикалық көрсеткіштерін толық талдау. Ауыр металдар, нитраттар, пестицидтер және басқа ластаушыларды анықтау.",
        description_ru: "Полный анализ химических, бактериологических и физических показателей вашей воды. Выявление тяжелых металлов, нитратов, пестицидов и других загрязнителей.",
        description_en: "Complete analysis of chemical, bacteriological and physical indicators of your water. Detection of heavy metals, nitrates, pesticides and other contaminants."
    },
    2: {
        id: 2,
        name_kk: "Ауа сапасын тексеру",
        name_ru: "Проверка качества воздуха",
        name_en: "Air quality testing",
        price: 18000,
        description_kk: "Ауаның ластану деңгейін анықтау: PM2.5, PM10, күкірт диоксиді, азот оксиді, озон және басқа зиянды заттардың концентрациясын өлшеу.",
        description_ru: "Определение уровня загрязнения воздуха: измерение концентрации PM2.5, PM10, диоксида серы, оксидов азота, озона и других вредных веществ.",
        description_en: "Determining the level of air pollution: measuring concentrations of PM2.5, PM10, sulfur dioxide, nitrogen oxides, ozone and other harmful substances."
    },
    3: {
        id: 3,
        name_kk: "Аймақтың экологиялық жағдайын бағалау",
        name_ru: "Оценка экологического состояния территории",
        name_en: "Assessment of the ecological condition of the territory",
        price: 25000,
        description_kk: "Аймақтың жалпы экологиялық жағдайын талдау: топырақтың ластануы, радиациялық фон, биологиялық әртүрлілік және экожүйелік қызметтерді бағалау.",
        description_ru: "Анализ общего экологического состояния территории: загрязнение почвы, радиационный фон, биоразнообразие и оценка экосистемных услуг.",
        description_en: "Analysis of the general ecological condition of the territory: soil pollution, radiation background, biodiversity and assessment of ecosystem services."
    },
    4: {
        id: 4,
        name_kk: "Дыбыстық ластануды өлшеу",
        name_ru: "Измерение шумового загрязнения",
        name_en: "Noise pollution measurement",
        price: 12000,
        description_kk: "Күн ішіндегі әртүрлі уақыттарда дыбыстық деңгейді өлшеу және санитарлық нормаларға сәйкестігін тексеру. Шумықтық карта құру.",
        description_ru: "Измерение уровня шума в разное время суток и проверка соответствия санитарным нормам. Создание шумовой карты.",
        description_en: "Measuring noise levels at different times of the day and checking compliance with sanitary standards. Creating a noise map."
    },
    5: {
        id: 5,
        name_kk: "Толық экологиялық сараптама",
        name_ru: "Полная экологическая экспертиза",
        name_en: "Complete environmental assessment",
        price: 35000,
        description_kk: "Объектінің толық экологиялық сараптамасы: ауа, су, топырақ, дыбыстық ластануды талдау, экологиялық қауіптерді бағалау және ұсынымдар дайындау.",
        description_ru: "Полная экологическая экспертиза объекта: анализ воздуха, воды, почвы, шумового загрязнения, оценка экологических рисков и подготовка рекомендаций.",
        description_en: "Complete environmental assessment of the facility: analysis of air, water, soil, noise pollution, assessment of environmental risks and preparation of recommendations."
    },
    6: {
        id: 6,
        name_kk: "Радиациялық мониторинг",
        name_ru: "Радиационный мониторинг",
        name_en: "Radiation monitoring",
        price: 20000,
        description_kk: "Радиациялық фонды өлшеу, радиоактивті изотоптарды анықтау, гамма-сәулеленуді бақылау және адам денсаулығына қауіптілігін бағалау.",
        description_ru: "Измерение радиационного фона, выявление радиоактивных изотопов, контроль гамма-излучения и оценка опасности для здоровья человека.",
        description_en: "Measurement of radiation background, detection of radioactive isotopes, monitoring of gamma radiation and assessment of danger to human health."
    }
};

// Инициализация данных
function initializeData() {
    // Проверяем и инициализируем users
    if (!localStorage.getItem('users')) {
        let users = {
            'admin@ad': {
                id: 0,
                username: getTranslatedText('admin-username', 'Админ', 'Админ', 'Admin'),
                password: '1234',
                email: 'admin@ad',
                role: 'admin'
            }
        };
        localStorage.setItem('users', JSON.stringify(users));
        localStorage.setItem('nextUserId', '1');
    } else {
        // Убедимся, что админ существует
        const users = JSON.parse(localStorage.getItem('users') || '{}');
        if (!users['admin@ad']) {
            users['admin@ad'] = {
                id: 0,
                username: getTranslatedText('admin-username', 'Админ', 'Админ', 'Admin'),
                password: '1234',
                email: 'admin@ad',
                role: 'admin'
            };
            localStorage.setItem('users', JSON.stringify(users));
        }
    }

    // Проверяем и инициализируем deletedUsers
    if (!localStorage.getItem('deletedUsers')) {
        localStorage.setItem('deletedUsers', JSON.stringify({}));
    }

    // Проверяем и инициализируем orders
    if (!localStorage.getItem('orders')) {
        localStorage.setItem('orders', JSON.stringify({}));
        localStorage.setItem('nextOrderId', '1');
    }

    // Проверяем и инициализируем pollutionData
    if (!localStorage.getItem('pollutionData')) {
        localStorage.setItem('pollutionData', JSON.stringify({ 
            nextId: 1, 
            entries: [] 
        }));
    }
    
    // Проверяем целостность данных pollutionData
    const pollutionData = JSON.parse(localStorage.getItem('pollutionData') || '{}');
    if (!pollutionData.nextId || !pollutionData.entries) {
        localStorage.setItem('pollutionData', JSON.stringify({ 
            nextId: 1, 
            entries: [] 
        }));
    }
    
    // Инициализируем currentUser из localStorage
    const storedUser = JSON.parse(localStorage.getItem('currentUser') || '{}');
    if (storedUser && storedUser.email) {
        currentUser = storedUser;
        isLoggedIn = true;
    } else {
        currentUser = {};
        isLoggedIn = false;
    }
}

// Глобальные переменные
let currentLang = 'kk';
let isLoggedIn = false;
let currentUser = {};
let isAdmin = false;
let userToDelete = null;
let orderToPay = null;
let itemToDelete = null;
let deleteType = null; // 'user', 'order', 'data'

// Функция для получения переведенного текста
function getTranslatedText(key, kkText, ruText, enText) {
    if (translations[currentLang] && translations[currentLang][key]) {
        return translations[currentLang][key];
    }
    
    switch(currentLang) {
        case 'kk': return kkText;
        case 'ru': return ruText;
        case 'en': return enText;
        default: return enText;
    }
}

// Language switching functionality
document.addEventListener('DOMContentLoaded', function() {
    // Инициализация данных
    initializeData();
    
    // Проверка, является ли пользователь удаленным
    function isUserDeleted(email) {
        const deletedUsers = JSON.parse(localStorage.getItem('deletedUsers')) || {};
        return deletedUsers[email];
    }
    
    // Показать сообщение об удаленном аккаунте
    function showDeletedMessage(reason) {
        const message = getTranslatedText(
            'account-deleted-reason',
            'Аккаунт жойылды. Себебі: ',
            'Аккаунт удален. Причина: ',
            'Account deleted. Reason: '
        ) + reason;
        alert(message);
    }
// Обработчик для кнопки применения фильтров
const applyFiltersBtn = document.getElementById('apply-filters-btn');
if (applyFiltersBtn) {
    applyFiltersBtn.addEventListener('click', function() {
        loadPollutionDataForView();
    });
}

// Обработчики для изменения фильтров (автоматическое применение при изменении)
const filterType = document.getElementById('filter-type');
const filterDate = document.getElementById('filter-date');
const filterLocation = document.getElementById('filter-location');

if (filterType) {
    filterType.addEventListener('change', function() {
        loadPollutionDataForView();
    });
}

if (filterDate) {
    filterDate.addEventListener('change', function() {
        loadPollutionDataForView();
    });
}

if (filterLocation) {
    filterLocation.addEventListener('input', function() {
        // Используем setTimeout для задержки, чтобы не фильтровать на каждый ввод
        clearTimeout(filterLocation.timer);
        filterLocation.timer = setTimeout(() => {
            loadPollutionDataForView();
        }, 300);
    });
}

// Также добавьте кнопку сброса фильтров если хотите:
const filterGroup = document.querySelector('.filter-group');
if (filterGroup && !document.getElementById('clear-filters-btn')) {
    const clearFiltersBtn = document.createElement('button');
    clearFiltersBtn.id = 'clear-filters-btn';
    clearFiltersBtn.className = 'btn btn-secondary';
    clearFiltersBtn.setAttribute('data-i18n', 'clear-filters');
    clearFiltersBtn.textContent = translations[currentLang]['clear-filters'] || 'Clear filters';
    
    clearFiltersBtn.addEventListener('click', function() {
        if (filterType) filterType.value = 'all';
        if (filterDate) filterDate.value = '';
        if (filterLocation) filterLocation.value = '';
        loadPollutionDataForView();
    });
    
    filterGroup.appendChild(clearFiltersBtn);
}
    // Делегирование событий для кнопок удаления пользователей (они создаются динамически)
    document.addEventListener('click', function(e) {
        // Проверяем, нажали ли на кнопку удаления пользователя
        if (e.target && e.target.classList.contains('delete-user-btn')) {
            const email = e.target.getAttribute('data-email');
            showDeletePopup(email, 'user');
        }
        
        // Проверяем, нажали ли на кнопки админ-действий
        if (e.target && e.target.classList.contains('complete-order-btn')) {
            const orderId = e.target.getAttribute('data-order-id');
            completeOrderAsAdmin(orderId);
        }
        
        if (e.target && e.target.classList.contains('enter-data-btn')) {
            const orderId = e.target.getAttribute('data-order-id');
            enterDataForOrder(orderId);
        }
        
        if (e.target && e.target.classList.contains('view-order-data-btn')) {
            const orderId = e.target.getAttribute('data-order-id');
            viewOrderDataAsAdmin(orderId);
        }
        
        // Проверяем, нажали ли на кнопку удаления заказа
        if (e.target && e.target.classList.contains('delete-order-btn')) {
            const orderId = e.target.getAttribute('data-order-id');
            showDeletePopup(orderId, 'order');
        }
        
        // Проверяем, нажали ли на кнопку удаления данных о загрязнении
        if (e.target && e.target.classList.contains('delete-data-btn')) {
            const dataId = e.target.getAttribute('data-id');
            showDeletePopup(dataId, 'data');
        }
    });

    // Language switcher buttons
    const langButtons = document.querySelectorAll('.lang-btn');
    
    // Function to change language
    function changeLanguage(lang) {
        currentLang = lang;
        
        // Update active button
        langButtons.forEach(btn => {
            if (btn.getAttribute('data-lang') === lang) {
                btn.classList.add('active');
            } else {
                btn.classList.remove('active');
            }
        });
        
        // Update all elements with data-i18n attribute
        document.querySelectorAll('[data-i18n]').forEach(element => {
            const key = element.getAttribute('data-i18n');
            if (translations[lang][key]) {
                element.textContent = translations[lang][key];
            }
        });
        
        // Update all elements with data-i18n-placeholder attribute
        document.querySelectorAll('[data-i18n-placeholder]').forEach(element => {
            const key = element.getAttribute('data-i18n-placeholder');
            if (translations[lang][key]) {
                element.placeholder = translations[lang][key];
            }
        });
        
        // Update service names and descriptions
        updateServicesText(lang);
        
        // Update orders display if on orders page
        if (document.querySelector('.my-orders-page').classList.contains('active')) {
            loadUserOrders();
        }
        
        // Update pollution data view if on data view page
        if (document.querySelector('.data-view-page').classList.contains('active')) {
            loadPollutionDataForView();
        }
    }
    
    // Function to update services text based on language
    function updateServicesText(lang) {
        // Update service cards
        document.querySelectorAll('.service-card').forEach(card => {
            const serviceId = card.querySelector('.order-service-btn')?.getAttribute('data-service-id');
            if (serviceId && servicesData[serviceId]) {
                const service = servicesData[serviceId];
                const titleElement = card.querySelector('h3');
                const descElement = card.querySelector('p');
                const priceElement = card.querySelector('.price-tag');
                
                if (titleElement) {
                    if (lang === 'kk') titleElement.textContent = service.name_kk;
                    else if (lang === 'ru') titleElement.textContent = service.name_ru;
                    else titleElement.textContent = service.name_en;
                }
                
                if (descElement) {
                    if (lang === 'kk') descElement.textContent = service.description_kk;
                    else if (lang === 'ru') descElement.textContent = service.description_ru;
                    else descElement.textContent = service.description_en;
                }
                
                if (priceElement) {
                    priceElement.textContent = service.price.toLocaleString() + ' ₸';
                }
            }
        });
        
        // Update selected service in order form if visible
        const selectedServiceInput = document.getElementById('selected-service');
        if (selectedServiceInput && selectedServiceInput.value) {
            const serviceId = document.getElementById('selected-service-id').value;
            if (serviceId && servicesData[serviceId]) {
                const service = servicesData[serviceId];
                if (lang === 'kk') selectedServiceInput.value = service.name_kk;
                else if (lang === 'ru') selectedServiceInput.value = service.name_ru;
                else selectedServiceInput.value = service.name_en;
            }
        }
    }
    
    // Add event listeners to language buttons
    langButtons.forEach(button => {
        button.addEventListener('click', function() {
            const lang = this.getAttribute('data-lang');
            changeLanguage(lang);
        });
    });
    
    // Page switching functionality
    const mainContent = document.querySelector('.main-content');
    const pollutionDataPage = document.querySelector('.pollution-data-page');
    const dataViewPage = document.querySelector('.data-view-page');
    const newsPage = document.querySelector('.news-page');
    const servicesPage = document.querySelector('.services-page');
    const myOrdersPage = document.querySelector('.my-orders-page');
    const navLinks = document.querySelectorAll('.nav-link');
    const heroButton = document.getElementById('hero-button');
    
    function switchToPage(page) {
        // Hide all pages
        mainContent.classList.add('hidden');
        pollutionDataPage.classList.remove('active');
        dataViewPage.classList.remove('active');
        newsPage.classList.remove('active');
        servicesPage.classList.remove('active');
        myOrdersPage.classList.remove('active');
        
        // Show selected page
        if (page === 'main') {
            mainContent.classList.remove('hidden');
        } else if (page === 'pollution-data') {
            pollutionDataPage.classList.add('active');
        } else if (page === 'data-view') {
            dataViewPage.classList.add('active');
            loadPollutionDataForView();
        } else if (page === 'news') {
            newsPage.classList.add('active');
        } else if (page === 'services') {
            servicesPage.classList.add('active');
            hideOrderForm();
        } else if (page === 'my-orders') {
            myOrdersPage.classList.add('active');
            loadUserOrders();
        }
        
        // Update active nav link
        navLinks.forEach(link => {
            if (link.getAttribute('data-page') === page) {
                link.classList.add('active');
            } else {
                link.classList.remove('active');
            }
        });
        
        // Scroll to top when switching pages
        window.scrollTo({
            top: 0,
            behavior: 'smooth'
        });
    }
    
    // Add event listeners to navigation links
    navLinks.forEach(link => {
        link.addEventListener('click', function(e) {
            e.preventDefault();
            const page = this.getAttribute('data-page');
            if (page) {
                switchToPage(page);
            }
        });
    });
    
    // Hero button functionality
    heroButton.addEventListener('click', function(e) {
        e.preventDefault();
        if (isAdmin) {
            switchToPage('pollution-data');
        } else if (isLoggedIn) {
            switchToPage('services');
        } else {
            authModal.style.display = 'block';
        }
    });
    
    // Update hero button text based on user type
    function updateHeroButton() {
        if (isAdmin) {
            heroButton.setAttribute('data-i18n', 'hero-button');
            heroButton.textContent = translations[currentLang]['hero-button'];
        } else {
            heroButton.setAttribute('data-i18n', 'order-hero-button');
            heroButton.textContent = translations[currentLang]['order-hero-button'];
        }
    }
    
    // Pollution type tabs functionality
    const pollutionTypeTabs = document.querySelectorAll('.pollution-type-tab');
    const pollutionForms = document.querySelectorAll('.pollution-form');
    
    if (pollutionTypeTabs.length > 0) {
        pollutionTypeTabs.forEach(tab => {
            tab.addEventListener('click', function() {
                const type = this.getAttribute('data-type');
                
                // Update active tab
                pollutionTypeTabs.forEach(t => t.classList.remove('active'));
                this.classList.add('active');
                
                // Show corresponding form
                pollutionForms.forEach(form => {
                    form.classList.remove('active');
                    if (form.id === `${type}-pollution-form`) {
                        form.classList.add('active');
                    }
                });
            });
        });
    }
    
    // Map switching functionality
    const mapButtons = document.querySelectorAll('.map-btn');
    const mapImages = document.querySelectorAll('.map-image');
    
    mapButtons.forEach(button => {
        button.addEventListener('click', function() {
            const mapType = this.getAttribute('data-map');
            
            // Update active button
            mapButtons.forEach(btn => btn.classList.remove('active'));
            this.classList.add('active');
            
            // Show corresponding map
            mapImages.forEach(img => {
                img.classList.remove('active');
                if (img.id === `${mapType}-map`) {
                    img.classList.add('active');
                }
            });
        });
    });
    
    // Auth modal functionality
    const authModal = document.getElementById('auth-modal');
    const adminModal = document.getElementById('admin-modal');
    const deleteModal = document.getElementById('delete-modal');
    const paymentModal = document.getElementById('payment-modal');
    const centerPopup = document.getElementById('center-popup');
    const profileBtn = document.getElementById('profile-btn');
    const userProfile = document.getElementById('user-profile');
    const userName = document.getElementById('user-name');
    const userIcon = document.getElementById('user-icon');
    const closeModals = document.querySelectorAll('.close-modal');
    const authTabs = document.querySelectorAll('.auth-tab');
    const authForms = document.querySelectorAll('.auth-form');
    const loginForm = document.getElementById('login-form');
    const registerForm = document.getElementById('register-form');
    const logoutBtn = document.getElementById('logout-btn');
    const adminPanelBtn = document.getElementById('admin-panel-btn');
    const showUsersBtn = document.getElementById('show-users-btn');
    const showAllOrdersBtn = document.getElementById('show-all-orders-btn');
    const showAllPollutionDataBtn = document.getElementById('show-all-pollution-data-btn');
    const clearAllUsersBtn = document.getElementById('clear-all-users-btn');
    const clearAllOrdersBtn = document.getElementById('clear-all-orders-btn');
    const clearAllPollutionDataBtn = document.getElementById('clear-all-pollution-data-btn');
    const clearAllDataBtn = document.getElementById('clear-all-data-btn');
    const serviceOrderForm = document.getElementById('service-order-form');
    const cancelOrderBtn = document.getElementById('cancel-order-btn');
    const paymentForm = document.getElementById('payment-form');
    const scrollToTopBtn = document.getElementById('scrollToTop');
    const scrollToBottomBtn = document.getElementById('scrollToBottom');
    const popupConfirmBtn = document.getElementById('popup-confirm-btn');
    const popupCancelBtn = document.getElementById('popup-cancel-btn');
    
    // Update UI based on login status
    function updateAuthUI() {
        console.log('updateAuthUI called', { isLoggedIn, currentUser });
        
        if (isLoggedIn && currentUser && currentUser.email) {
            console.log('User is logged in:', currentUser.email);
            profileBtn.style.display = 'none';
            userProfile.classList.remove('hidden');
            userName.textContent = currentUser.name || currentUser.email;
            userIcon.textContent = (currentUser.name || currentUser.email).charAt(0).toUpperCase();
            
            // Проверяем, является ли пользователь администратором
            if (currentUser.email === 'admin@ad') {
                isAdmin = true;
                adminPanelBtn.style.display = 'block';
                document.body.classList.add('admin-logged-in');
                document.body.classList.remove('user-logged-in');
            } else {
                isAdmin = false;
                adminPanelBtn.style.display = 'none';
                document.body.classList.add('user-logged-in');
                document.body.classList.remove('admin-logged-in');
            }
            
            updateHeroButton();
        } else {
            console.log('User is not logged in');
            profileBtn.style.display = 'block';
            userProfile.classList.add('hidden');
            isAdmin = false;
            document.body.classList.remove('admin-logged-in', 'user-logged-in');
            updateHeroButton();
        }
    }
    
    // Initialize UI
    updateAuthUI();
    
    // Открытие/закрытие выпадающего меню
    userProfile.addEventListener('click', function(e) {
        e.stopPropagation();
        const dropdown = document.getElementById('user-dropdown');
        dropdown.classList.toggle('show');
    });
    
    // Закрытие выпадающего меню при клике вне его
    document.addEventListener('click', function(e) {
        const dropdown = document.getElementById('user-dropdown');
        if (dropdown && !dropdown.contains(e.target) && !userProfile.contains(e.target)) {
            dropdown.classList.remove('show');
        }
    });
    
    // Обработчик кнопки выхода
    logoutBtn.addEventListener('click', function() {
        const confirmMessage = getTranslatedText(
            'logout-confirm',
            'Сіз шынымен шығып кеткіңіз келе ме?',
            'Вы действительно хотите выйти?',
            'Are you sure you want to logout?'
        );
        
        if (confirm(confirmMessage)) {
            isLoggedIn = false;
            currentUser = {};
            localStorage.setItem('isLoggedIn', 'false');
            localStorage.removeItem('currentUser');
            
            updateAuthUI();
            
            // Закрываем выпадающее меню
            document.getElementById('user-dropdown').classList.remove('show');
            
            // Закрываем админ панель, если она открыта
            adminModal.style.display = 'none';
            
            // Переключаем на главную страницу
            switchToPage('main');
            
            // Показываем сообщение об успешном выходе
            const successMessage = getTranslatedText(
                'logout-success',
                'Сіз аккаунтыңыздан сәтті шықтыңыз!',
                'Вы успешно вышли из аккаунта!',
                'You have successfully logged out!'
            );
            alert(successMessage);
        }
    });
    
    // Обработчик кнопки админ панели
    adminPanelBtn.addEventListener('click', function() {
        adminModal.style.display = 'block';
        document.getElementById('user-dropdown').classList.remove('show');
        document.getElementById('users-list-container').classList.add('hidden');
        document.getElementById('orders-list-container').classList.add('hidden');
        document.getElementById('pollution-data-list-container').classList.add('hidden');
        document.getElementById('admin-message').classList.add('hidden');
    });
    
    // Обработчик кнопки "Показать всех пользователей"
    showUsersBtn.addEventListener('click', function() {
        showAllUsers();
    });
    
    // Обработчик кнопки "Показать все заказы"
    showAllOrdersBtn.addEventListener('click', function() {
        showAllOrders();
    });
    
    // Обработчик кнопки "Показать все данные о загрязнении"
    showAllPollutionDataBtn.addEventListener('click', function() {
        showAllPollutionData();
    });
    
    // Обработчик кнопки "Очистить все аккаунты (кроме админа)"
    clearAllUsersBtn.addEventListener('click', function() {
        if (confirm(translations[currentLang]['clear-all-confirm'])) {
            clearAllUsers();
        }
    });
    
    // Обработчик кнопки "Очистить все заказы"
    clearAllOrdersBtn.addEventListener('click', function() {
        if (confirm(translations[currentLang]['clear-all-orders-confirm'])) {
            clearAllOrders();
        }
    });
    
    // Обработчик кнопки "Очистить все данные о загрязнении"
    clearAllPollutionDataBtn.addEventListener('click', function() {
        if (confirm(translations[currentLang]['clear-all-pollution-data-confirm'])) {
            clearAllPollutionData();
        }
    });
    
    // Обработчик кнопки "Очистить все данные"
    clearAllDataBtn.addEventListener('click', function() {
        if (confirm(translations[currentLang]['clear-all-data-confirm'])) {
            clearAllData();
        }
    });
    
    // Функция очистки всех пользователей (кроме админа)
    function clearAllUsers() {
        const users = JSON.parse(localStorage.getItem('users')) || {};
        const deletedUsers = JSON.parse(localStorage.getItem('deletedUsers')) || {};
        
        // Сохраняем только админа
        const adminUser = users['admin@ad'];
        const newUsers = {};
        
        if (adminUser) {
            newUsers['admin@ad'] = adminUser;
            
            // Сохраняем всех остальных пользователей в deletedUsers
            for (const email in users) {
                if (email !== 'admin@ad') {
                    deletedUsers[email] = {
                        reason: getTranslatedText(
                            'mass-deletion-reason',
                            'Массовое удаление администратором',
                            'Массовое удаление администратором',
                            'Mass deletion by administrator'
                        ),
                        date: new Date().toLocaleString(),
                        originalData: users[email]
                    };
                    
                    // Если удаленный пользователь был в системе, выходим из его аккаунта
                    if (currentUser.email === email) {
                        isLoggedIn = false;
                        currentUser = {};
                        localStorage.setItem('isLoggedIn', 'false');
                        localStorage.removeItem('currentUser');
                    }
                }
            }
            
            // Сохраняем данные
            localStorage.setItem('users', JSON.stringify(newUsers));
            localStorage.setItem('deletedUsers', JSON.stringify(deletedUsers));
            
            // Показываем сообщение
            showAdminMessage(translations[currentLang]['clear-all-success']);
            
            // Обновляем список пользователей
            showAllUsers();
            
            // Обновляем UI
            updateAuthUI();
        }
    }
    
    // Функция очистки всех заказов
    function clearAllOrders() {
        // Удаляем все заказы
        localStorage.setItem('orders', JSON.stringify({}));
        localStorage.setItem('nextOrderId', '1');
        
        // Показываем сообщение
        showAdminMessage(translations[currentLang]['clear-all-orders-success']);
        
        // Обновляем список заказов
        showAllOrders();
    }
    
    // Функция очистки всех данных о загрязнении
    function clearAllPollutionData() {
        // Удаляем все данные о загрязнении
        localStorage.setItem('pollutionData', JSON.stringify({ 
            nextId: 1, 
            entries: [] 
        }));
        
        // Показываем сообщение
        showAdminMessage(translations[currentLang]['clear-all-pollution-data-success']);
        
        // Обновляем список данных о загрязнении
        showAllPollutionData();
    }
    
    // Функция очистки всех данных
    function clearAllData() {
        // Очищаем всех пользователей кроме админа
        clearAllUsers();
        
        // Очищаем все заказы
        clearAllOrders();
        
        // Очищаем все данные о загрязнении
        clearAllPollutionData();
        
        // Показываем общее сообщение
        showAdminMessage(translations[currentLang]['clear-all-data-success']);
    }
    
    // Функция показа сообщения в админ панели
    function showAdminMessage(message) {
        const messageBox = document.getElementById('admin-message');
        messageBox.textContent = message;
        messageBox.classList.remove('hidden');
        
        // Автоматически скрываем сообщение через 5 секунд
        setTimeout(() => {
            messageBox.classList.add('hidden');
        }, 5000);
    }
    
    // Функция показа всех пользователей
    function showAllUsers() {
        const usersList = document.getElementById('admin-users-list');
        const currentUsers = JSON.parse(localStorage.getItem('users')) || {};
        
        usersList.innerHTML = '';
        
        for (const email in currentUsers) {
            const user = currentUsers[email];
            const isAdminUser = email === 'admin@ad';
            
            const userItem = document.createElement('div');
            userItem.className = `user-item ${isAdminUser ? 'admin-user' : ''}`;
            
            const adminText = isAdminUser ? 
                getTranslatedText('admin-user', '(Админ)', '(Админ)', '(Admin)') : '';
            
            userItem.innerHTML = `
                <strong>ID:</strong> ${user.id} ${adminText}<br>
                <strong>Email:</strong> ${email}<br>
                <strong>${getTranslatedText('name-label', 'Аты', 'Имя', 'Name')}:</strong> ${user.username}<br>
                <strong>${getTranslatedText('password-label', 'Құпия сөз', 'Пароль', 'Password')}:</strong> ${user.password}
                ${!isAdminUser ? `
                    <div class="user-actions">
                        <button class="btn btn-danger delete-user-btn" data-email="${email}">${translations[currentLang]['delete-user-button']}</button>
                    </div>
                ` : ''}
            `;
            usersList.appendChild(userItem);
        }
        
        document.getElementById('users-list-container').classList.remove('hidden');
        document.getElementById('orders-list-container').classList.add('hidden');
        document.getElementById('pollution-data-list-container').classList.add('hidden');
        document.getElementById('admin-message').classList.add('hidden');
        
        // Автоматически скроллим список вниз после загрузки
        setTimeout(() => {
            usersList.scrollTop = usersList.scrollHeight;
        }, 100);
    }
    
    // Функция показа всех заказов (с кнопками для администратора)
    function showAllOrders() {
        const ordersList = document.getElementById('admin-orders-list');
        const allOrders = JSON.parse(localStorage.getItem('orders')) || {};
        const users = JSON.parse(localStorage.getItem('users')) || {};
        
        ordersList.innerHTML = '';
        
        // Собираем все заказы в массив
        const ordersArray = [];
        for (const userId in allOrders) {
            const userOrders = allOrders[userId];
            userOrders.forEach(order => {
                ordersArray.push({
                    ...order,
                    userId: userId,
                    userName: users[userId]?.username || getTranslatedText('unknown-user', 'Белгісіз пайдаланушы', 'Неизвестный пользователь', 'Unknown user')
                });
            });
        }
        
        // Сортируем по дате (новые сверху)
        ordersArray.sort((a, b) => new Date(b.orderDate) - new Date(a.orderDate));
        
        if (ordersArray.length === 0) {
            ordersList.innerHTML = `<p>${getTranslatedText('no-orders', 'Тапсырыстар жоқ', 'Заказов нет', 'No orders')}</p>`;
        } else {
            ordersArray.forEach(order => {
                const service = servicesData[order.serviceId] || { 
                    name_kk: getTranslatedText('unknown-service', 'Белгісіз қызмет', 'Неизвестная услуга', 'Unknown service'),
                    name_ru: getTranslatedText('unknown-service', 'Белгісіз қызмет', 'Неизвестная услуга', 'Unknown service'),
                    name_en: getTranslatedText('unknown-service', 'Белгісіз қызмет', 'Неизвестная услуга', 'Unknown service')
                };
                const serviceName = currentLang === 'kk' ? service.name_kk : 
                                   currentLang === 'ru' ? service.name_ru : service.name_en;
                
                // Определяем доступные действия для администратора
                let adminActionsHTML = '';
                if (order.status === 'paid' || order.pollutionDataId) {
                    // Если заказ оплачен или данные уже введены
                    if (order.pollutionDataId) {
                        adminActionsHTML = `
                            <div class="admin-order-actions">
                                <button class="btn btn-success admin-order-btn view-order-data-btn" data-order-id="${order.id}">${translations[currentLang]['view-data-button']}</button>
                                <span class="status-badge status-completed">${translations[currentLang]['data-entered']}</span>
                                <button class="btn btn-danger admin-order-btn delete-order-btn" data-order-id="${order.id}">${translations[currentLang]['delete-order-button']}</button>
                            </div>
                        `;
                    } else {
                        adminActionsHTML = `
                            <div class="admin-order-actions">
                                <button class="btn btn-success admin-order-btn complete-order-btn" data-order-id="${order.id}">${translations[currentLang]['complete-order-button']}</button>
                                <button class="btn btn-info admin-order-btn enter-data-btn" data-order-id="${order.id}">${translations[currentLang]['enter-data-button']}</button>
                                <button class="btn btn-danger admin-order-btn delete-order-btn" data-order-id="${order.id}">${translations[currentLang]['delete-order-button']}</button>
                            </div>
                        `;
                    }
                } else if (order.status === 'completed') {
                    adminActionsHTML = `
                        <div class="admin-order-actions">
                            <span class="status-badge status-completed">${translations[currentLang]['order-completed']}</span>
                            <button class="btn btn-danger admin-order-btn delete-order-btn" data-order-id="${order.id}">${translations[currentLang]['delete-order-button']}</button>
                        </div>`;
                } else {
                    adminActionsHTML = `
                        <div class="admin-order-actions">
                            <button class="btn btn-danger admin-order-btn delete-order-btn" data-order-id="${order.id}">${translations[currentLang]['delete-order-button']}</button>
                        </div>`;
                }
                
                const orderItem = document.createElement('div');
                orderItem.className = 'user-item';
                orderItem.innerHTML = `
                    <strong>${getTranslatedText('order-id', 'Тапсырыс №', 'Заказ №', 'Order №')}:</strong> ${order.id}<br>
                    <strong>${getTranslatedText('user-label', 'Пайдаланушы', 'Пользователь', 'User')}:</strong> ${order.userName} (ID: ${order.userId})<br>
                    <strong>${getTranslatedText('order-service', 'Қызмет', 'Услуга', 'Service')}:</strong> ${serviceName}<br>
                    <strong>${getTranslatedText('order-date', 'Күні', 'Дата', 'Date')}:</strong> ${order.orderDate}<br>
                    <strong>${getTranslatedText('order-address', 'Мекенжай', 'Адрес', 'Address')}:</strong> ${order.address}<br>
                    <strong>${getTranslatedText('order-price', 'Бағасы', 'Цена', 'Price')}:</strong> ${order.price.toLocaleString()} ₸<br>
                    <strong>${getTranslatedText('order-status', 'Статусы', 'Статус', 'Status')}:</strong> <span class="status-badge status-${order.status}">${getOrderStatusText(order.status)}</span><br>
                    <strong>${getTranslatedText('order-phone-label', 'Телефон', 'Телефон', 'Phone')}:</strong> ${order.phone}<br>
                    <strong>Email:</strong> ${order.email}<br>
                    <strong>${getTranslatedText('hide-data-label', 'Деректерді жасыру', 'Скрыть данные', 'Hide data')}:</strong> ${order.hideData ? translations[currentLang]['yes'] : translations[currentLang]['no']}<br>
                    <strong>${getTranslatedText('data-entered-label', 'Деректер енгізілді', 'Данные введены', 'Data entered')}:</strong> ${order.pollutionDataId ? translations[currentLang]['yes'] + ' (ID: ' + order.pollutionDataId + ')' : translations[currentLang]['no']}
                    ${adminActionsHTML}
                `;
                
                ordersList.appendChild(orderItem);
            });
        }
        
        document.getElementById('orders-list-container').classList.remove('hidden');
        document.getElementById('users-list-container').classList.add('hidden');
        document.getElementById('pollution-data-list-container').classList.add('hidden');
        document.getElementById('admin-message').classList.add('hidden');
    }
    
    // Функция показа всех данных о загрязнении
    function showAllPollutionData() {
        const pollutionDataList = document.getElementById('admin-pollution-data-list');
        const pollutionData = JSON.parse(localStorage.getItem('pollutionData')) || { entries: [] };
        
        pollutionDataList.innerHTML = '';
        
        if (pollutionData.entries.length === 0) {
            pollutionDataList.innerHTML = `<p>${getTranslatedText('no-pollution-data', 'Ластану деректері жоқ', 'Данных о загрязнении нет', 'No pollution data')}</p>`;
        } else {
            pollutionData.entries.forEach(entry => {
                const pollutionItem = document.createElement('div');
                pollutionItem.className = 'user-item';
                
                let dataText = '';
                if (entry.type === 'water') {
                    dataText = `${getTranslatedText('type-label', 'Түрі', 'Тип', 'Type')}: ${getTranslatedText('water-type', 'Су', 'Вода', 'Water')}, ${getTranslatedText('source-label', 'Көзі', 'Источник', 'Source')}: ${entry.sourceType}, ${getTranslatedText('location-label', 'Орналасқан жері', 'Местоположение', 'Location')}: ${entry.location}`;
                } else if (entry.type === 'air') {
                    dataText = `${getTranslatedText('type-label', 'Түрі', 'Тип', 'Type')}: ${getTranslatedText('air-type', 'Ауа', 'Воздух', 'Air')}, ${getTranslatedText('location-label', 'Орналасқан жері', 'Местоположение', 'Location')}: ${entry.location}, PM2.5: ${entry.parameters?.pm25 || getTranslatedText('not-available', 'н/д', 'н/д', 'n/a')}`;
                } else if (entry.type === 'waste') {
                    dataText = `${getTranslatedText('type-label', 'Түрі', 'Тип', 'Type')}: ${getTranslatedText('waste-type', 'Қоқыс', 'Отходы', 'Waste')}, ${getTranslatedText('location-label', 'Орналасқан жері', 'Местоположение', 'Location')}: ${entry.location}, ${getTranslatedText('waste-type-label', 'Қоқыс түрі', 'Тип отходов', 'Waste type')}: ${entry.wasteType}`;
                } else if (entry.type === 'radioactive') {
                    dataText = `${getTranslatedText('type-label', 'Түрі', 'Тип', 'Type')}: ${getTranslatedText('radioactive-type', 'Радиоактивті', 'Радиоактивное', 'Radioactive')}, ${getTranslatedText('source-label', 'Көзі', 'Источник', 'Source')}: ${entry.sourceType}`;
                } else if (entry.type === 'noise') {
                    dataText = `${getTranslatedText('type-label', 'Түрі', 'Тип', 'Type')}: ${getTranslatedText('noise-type', 'Шу', 'Шум', 'Noise')}, ${getTranslatedText('source-label', 'Көзі', 'Источник', 'Source')}: ${entry.sourceType}`;
                } else if (entry.type === 'assessment') {
                    dataText = `${getTranslatedText('type-label', 'Түрі', 'Тип', 'Type')}: ${getTranslatedText('assessment-type', 'Бағалау', 'Оценка', 'Assessment')}, ${getTranslatedText('assessment-type-label', 'Бағалау түрі', 'Тип оценки', 'Assessment type')}: ${entry.assessmentType}`;
                }
                
                pollutionItem.innerHTML = `
                    <strong>ID:</strong> ${entry.id}<br>
                    <strong>${getTranslatedText('type-label', 'Түрі', 'Тип', 'Type')}:</strong> ${entry.type}<br>
                    <strong>${getTranslatedText('date-label', 'Күні', 'Дата', 'Date')}:</strong> ${entry.date}<br>
                    <strong>${getTranslatedText('location-label', 'Орналасқан жері', 'Местоположение', 'Location')}:</strong> ${entry.location}<br>
                    <strong>${getTranslatedText('table-data', 'Деректер', 'Данные', 'Data')}:</strong> ${dataText}<br>
                    <strong>${getTranslatedText('order-id-label', 'Тапсырыс нөмірі', 'Номер заказа', 'Order number')}:</strong> ${entry.orderId || getTranslatedText('not-specified', 'Көрсетілмеген', 'Не указан', 'Not specified')}<br>
                    <strong>${getTranslatedText('hidden-in-view', 'Жалпы қарауда жасырылған', 'Скрыто в общем просмотре', 'Hidden in public view')}:</strong> ${entry.hidden ? translations[currentLang]['yes'] : translations[currentLang]['no']}<br>
                    <strong>${getTranslatedText('created-at', 'Жасалған', 'Создано', 'Created')}:</strong> ${new Date(entry.createdAt).toLocaleDateString()}
                    <div class="user-actions">
                        <button class="btn btn-danger delete-data-btn" data-id="${entry.id}">${translations[currentLang]['delete-data-button']}</button>
                    </div>
                `;
                
                pollutionDataList.appendChild(pollutionItem);
            });
        }
        
        document.getElementById('pollution-data-list-container').classList.remove('hidden');
        document.getElementById('users-list-container').classList.add('hidden');
        document.getElementById('orders-list-container').classList.add('hidden');
        document.getElementById('admin-message').classList.add('hidden');
    }
    
    // Получить текстовое представление статуса заказа
    function getOrderStatusText(status) {
        const statusMap = {
            'pending': translations[currentLang]['order-status-pending'],
            'paid': translations[currentLang]['order-status-paid'],
            'in-progress': translations[currentLang]['order-status-in-progress'],
            'completed': translations[currentLang]['order-status-completed'],
            'cancelled': translations[currentLang]['order-status-cancelled']
        };
        
        return statusMap[status] || status;
    }
    
    // Показать попап в центре экрана
    function showDeletePopup(itemId, type) {
        itemToDelete = itemId;
        deleteType = type;
        
        let title = '';
        let message = '';
        
        switch(type) {
            case 'user':
                title = translations[currentLang]['delete-account-title'];
                message = `${translations[currentLang]['delete-account-user']} ${itemId}`;
                break;
            case 'order':
                title = translations[currentLang]['delete-order-button'];
                message = `${translations[currentLang]['order-id']} #${itemId}`;
                break;
            case 'data':
                title = translations[currentLang]['delete-data-button'];
                message = `ID: ${itemId}`;
                break;
        }
        
        document.getElementById('popup-title').textContent = title;
        document.getElementById('popup-message').textContent = message;
        centerPopup.style.display = 'flex';
    }
    
    // Обработчик подтверждения удаления в попапе
    popupConfirmBtn.addEventListener('click', function() {
        if (!itemToDelete || !deleteType) return;
        
        switch(deleteType) {
            case 'user':
                deleteUser(itemToDelete);
                break;
            case 'order':
                deleteOrder(itemToDelete);
                break;
            case 'data':
                deletePollutionData(itemToDelete);
                break;
        }
        
        // Закрываем попап
        centerPopup.style.display = 'none';
        itemToDelete = null;
        deleteType = null;
    });
    
    // Обработчик отмены удаления в попапе
    popupCancelBtn.addEventListener('click', function() {
        centerPopup.style.display = 'none';
        itemToDelete = null;
        deleteType = null;
    });
    
    // Функция удаления пользователя
    function deleteUser(email) {
        const currentUsers = JSON.parse(localStorage.getItem('users')) || {};
        const deletedUsers = JSON.parse(localStorage.getItem('deletedUsers')) || {};
        
        // Проверяем, не пытаемся ли удалить админа
        if (email === 'admin@ad') {
            alert(translations[currentLang]['delete-admin-error']);
            return;
        }
        
        // Проверяем, существует ли пользователь
        if (!currentUsers[email]) {
            alert(getTranslatedText(
                'user-not-found',
                'Пайдаланушы табылмады: ',
                'Пользователь не найден: ',
                'User not found: '
            ) + email);
            return;
        }
        
        // Удаляем заказы этого пользователя
        const orders = JSON.parse(localStorage.getItem('orders')) || {};
        const userIdToDelete = currentUsers[email].id;
        
        if (orders[userIdToDelete]) {
            delete orders[userIdToDelete];
            localStorage.setItem('orders', JSON.stringify(orders));
        }
        
        // Сохраняем в удаленных пользователях
        deletedUsers[email] = {
            reason: getTranslatedText(
                'deleted-by-admin',
                'Администратор жойды',
                'Удален администратором',
                'Deleted by administrator'
            ),
            date: new Date().toLocaleString(),
            originalData: currentUsers[email]
        };
        
        // Удаляем из текущих пользователей
        delete currentUsers[email];
        
        // Сохраняем изменения
        localStorage.setItem('users', JSON.stringify(currentUsers));
        localStorage.setItem('deletedUsers', JSON.stringify(deletedUsers));
        
        // Сохраняем email для сообщения
        const deletedEmail = email;
        
        // Показываем сообщение
        showAdminMessage(translations[currentLang]['delete-user-success']);
        
        // Обновляем список пользователей
        showAllUsers();
        
        // Если удаленный пользователь был в системе, выходим из его аккаунта
        if (currentUser.email === deletedEmail) {
            isLoggedIn = false;
            currentUser = {};
            localStorage.setItem('isLoggedIn', 'false');
            localStorage.removeItem('currentUser');
            updateAuthUI();
            
            // Переключаем на главную страницу
            switchToPage('main');
            
            // Показываем сообщение
            const logoutMessage = getTranslatedText(
                'account-deleted-logout',
                'Сіздің аккаунтыңыз жойылды. Жүйеден шықтыңыз.',
                'Ваш аккаунт был удален. Вы вышли из системы.',
                'Your account has been deleted. You have been logged out.'
            );
            alert(logoutMessage);
        }
    }
    
    // Функция удаления заказа
    function deleteOrder(orderId) {
        const orders = JSON.parse(localStorage.getItem('orders')) || {};
        const pollutionData = JSON.parse(localStorage.getItem('pollutionData')) || { entries: [] };
        
        // Найти и удалить заказ
        let orderFound = false;
        for (const userId in orders) {
            const userOrders = orders[userId];
            const orderIndex = userOrders.findIndex(o => o.id == orderId);
            if (orderIndex !== -1) {
                // Если у заказа есть данные о загрязнении, удаляем их тоже
                if (userOrders[orderIndex].pollutionDataId) {
                    const pollutionIndex = pollutionData.entries.findIndex(e => e.id === userOrders[orderIndex].pollutionDataId);
                    if (pollutionIndex !== -1) {
                        pollutionData.entries.splice(pollutionIndex, 1);
                        localStorage.setItem('pollutionData', JSON.stringify(pollutionData));
                    }
                }
                
                userOrders.splice(orderIndex, 1);
                orderFound = true;
                
                // Если у пользователя больше нет заказов, удаляем пустой массив
                if (userOrders.length === 0) {
                    delete orders[userId];
                }
                break;
            }
        }
        
        if (orderFound) {
            localStorage.setItem('orders', JSON.stringify(orders));
            showAdminMessage(translations[currentLang]['delete-order-success']);
            showAllOrders();
        }
    }
    
    // Функция удаления данных о загрязнении
    function deletePollutionData(dataId) {
        const pollutionData = JSON.parse(localStorage.getItem('pollutionData')) || { entries: [] };
        const orders = JSON.parse(localStorage.getItem('orders')) || {};
        
        const dataIndex = pollutionData.entries.findIndex(e => e.id == dataId);
        if (dataIndex !== -1) {
            // Удаляем данные
            pollutionData.entries.splice(dataIndex, 1);
            localStorage.setItem('pollutionData', JSON.stringify(pollutionData));
            
            // Находим и обновляем заказ, который ссылался на эти данные
            for (const userId in orders) {
                const userOrders = orders[userId];
                userOrders.forEach(order => {
                    if (order.pollutionDataId == dataId) {
                        order.pollutionDataId = null;
                        if (order.status === 'completed') {
                            order.status = 'paid';
                        }
                    }
                });
            }
            localStorage.setItem('orders', JSON.stringify(orders));
            
            showAdminMessage(translations[currentLang]['delete-data-success']);
            showAllPollutionData();
        }
    }

    // Close auth modal
    closeModals.forEach(closeBtn => {
        closeBtn.addEventListener('click', function() {
            const modal = this.closest('.modal');
            if (modal) {
                modal.style.display = 'none';
            }
        });
    });

    // Close modal when clicking outside
    window.addEventListener('click', function(event) {
        if (event.target === authModal) {
            authModal.style.display = 'none';
        }
        if (event.target === adminModal) {
            adminModal.style.display = 'none';
        }
        if (event.target === deleteModal) {
            deleteModal.style.display = 'none';
        }
        if (event.target === paymentModal) {
            paymentModal.style.display = 'none';
        }
        if (event.target === centerPopup) {
            centerPopup.style.display = 'none';
            itemToDelete = null;
            deleteType = null;
        }
    });

    // Switch between login and register tabs
    authTabs.forEach(tab => {
        tab.addEventListener('click', function() {
            const tabName = this.getAttribute('data-tab');
            
            // Update active tab
            authTabs.forEach(t => t.classList.remove('active'));
            this.classList.add('active');
            
            // Show corresponding form
            authForms.forEach(form => {
                form.classList.remove('active');
                if (form.id === `${tabName}-form`) {
                    form.classList.add('active');
                }
            });
        });
    });

    // Handle login form submission
    loginForm.addEventListener('submit', function(e) {
        e.preventDefault();
        
        const email = document.getElementById('login-email').value;
        const password = document.getElementById('login-password').value;
        
        // Simple validation
        if (!email || !password) {
            const errorMessage = getTranslatedText(
                'fill-all-fields',
                'Барлық өрістерді толтырыңыз',
                'Заполните все поля',
                'Please fill in all fields'
            );
            alert(errorMessage);
            return;
        }
        
        // Проверяем, не удален ли пользователь
        const deletedUser = isUserDeleted(email);
        if (deletedUser) {
            showDeletedMessage(deletedUser.reason);
            loginForm.reset();
            return;
        }
        
        // Проверяем данные пользователя
        const users = JSON.parse(localStorage.getItem('users')) || {};
        
        if (users[email] && users[email].password === password) {
            isLoggedIn = true;
            currentUser = {
                name: users[email].username,
                email: email,
                id: users[email].id
            };
            
            localStorage.setItem('isLoggedIn', 'true');
            localStorage.setItem('currentUser', JSON.stringify(currentUser));
            
            updateAuthUI();
            
            // Очищаем форму
            loginForm.reset();
            
            // Close modal
            authModal.style.display = 'none';
            
            // Переключаем на соответствующую страницу
            if (email === 'admin@ad') {
                switchToPage('pollution-data');
            } else {
                switchToPage('services');
            }
            
            // Показываем приветственное сообщение
            const welcomeMessage = getTranslatedText(
                'welcome-user',
                'Қош келдіңіз, ',
                'Добро пожаловать, ',
                'Welcome, '
            ) + currentUser.name + '!';
            alert(welcomeMessage);
        } else {
            const errorMessage = getTranslatedText(
                'invalid-credentials',
                'Қате email немесе құпия сөз',
                'Неверный email или пароль',
                'Invalid email or password'
            );
            alert(errorMessage);
        }
    });
    
    // Handle register form submission
    registerForm.addEventListener('submit', function(e) {
        e.preventDefault();
        
        const name = document.getElementById('register-name').value;
        const email = document.getElementById('register-email').value;
        const password = document.getElementById('register-password').value;
        const confirmPassword = document.getElementById('register-confirm-password').value;
        
        // Simple validation
        if (!name || !email || !password || !confirmPassword) {
            const errorMessage = getTranslatedText(
                'fill-all-fields',
                'Барлық өрістерді толтырыңыз',
                'Заполните все поля',
                'Please fill in all fields'
            );
            alert(errorMessage);
            return;
        }
        
        if (password !== confirmPassword) {
            const errorMessage = getTranslatedText(
                'passwords-not-match',
                'Құпия сөздер сәйкес келмейді',
                'Пароли не совпадают',
                'Passwords do not match'
            );
            alert(errorMessage);
            return;
        }
        
        // Проверяем, не удален ли пользователь
        const deletedUser = isUserDeleted(email);
        if (deletedUser) {
            showDeletedMessage(deletedUser.reason);
            registerForm.reset();
            return;
        }
        
        // Проверяем, существует ли пользователь
        const users = JSON.parse(localStorage.getItem('users')) || {};
        const nextUserId = parseInt(localStorage.getItem('nextUserId')) || 1;
        
        if (users[email]) {
            const errorMessage = getTranslatedText(
                'user-already-exists',
                'Бұл email бойынша пайдаланушы тіркелген',
                'Пользователь с таким email уже зарегистрирован',
                'User with this email already exists'
            );
            alert(errorMessage);
            return;
        }
        
        // Регистрируем нового пользователя
        users[email] = {
            id: nextUserId,
            username: name,
            password: password,
            email: email
        };
        
        localStorage.setItem('users', JSON.stringify(users));
        localStorage.setItem('nextUserId', (nextUserId + 1).toString());
        
        // Автоматически входим
        isLoggedIn = true;
        currentUser = {
            name: name,
            email: email,
            id: nextUserId
        };
        
        localStorage.setItem('isLoggedIn', 'true');
        localStorage.setItem('currentUser', JSON.stringify(currentUser));
        
        updateAuthUI();
        
        // Очищаем форму
        registerForm.reset();
        
        // Close modal
        authModal.style.display = 'none';
        
        // Переключаем на страницу услуг
        switchToPage('services');
        
        // Показываем сообщение об успешной регистрации
        const successMessage = getTranslatedText(
            'registration-success',
            'Құттықтаймыз, ',
            'Поздравляем, ',
            'Congratulations, '
        ) + name + getTranslatedText(
            'registration-complete',
            '! Тіркелу сәтті аяқталды.',
            '! Регистрация прошла успешно.',
            '! Registration successful.'
        );
        alert(successMessage);
    });
                
    // Open auth modal
    profileBtn.addEventListener('click', function() {
        authModal.style.display = 'block';
    });
    
    // Water pollution type selection
    const waterPollutionType = document.getElementById('water-pollution-type');
    if (waterPollutionType) {
        waterPollutionType.addEventListener('change', function() {
            const chemicalFields = document.getElementById('water-chemical-fields');
            
            // Hide all fields first
            chemicalFields.style.display = 'none';
            
            // Show relevant fields based on selection
            if (this.value === 'chemical') {
                chemicalFields.style.display = 'block';
            }
        });
    }

    // Form submissions для данных о загрязнении (администратор)
    
    const waterPollutionForm = document.getElementById('water-pollution-form');
    if (waterPollutionForm) {
        waterPollutionForm.addEventListener('submit', function(e) {
            e.preventDefault();
            
            // Собираем данные формы
            const sourceType = document.getElementById('water-source-type').value;
            const location = document.getElementById('water-location').value;
            const date = document.getElementById('water-date').value;
            const pollutionType = document.getElementById('water-pollution-type').value;
            const phLevel = document.getElementById('ph-level').value;
            const heavyMetals = document.getElementById('heavy-metals').value;
            const nitrates = document.getElementById('nitrates').value;
            const phosphates = document.getElementById('phosphates').value;
            const orderId = document.getElementById('water-order-id').value;
            const hidden = document.getElementById('water-hidden').checked;
            const additionalNotes = document.getElementById('water-additional-notes').value;
            
            // Проверка обязательных полей
            if (!sourceType || !location || !date || !pollutionType) {
                const errorMessage = getTranslatedText(
                    'fill-required-fields',
                    'Барлық міндетті өрістерді толтырыңыз',
                    'Заполните все обязательные поля',
                    'Please fill in all required fields'
                );
                alert(errorMessage);
                return;
            }
            
            // Сохраняем данные о загрязнении
            const pollutionData = JSON.parse(localStorage.getItem('pollutionData')) || { nextId: 1, entries: [] };
            const newEntry = {
                id: pollutionData.nextId,
                type: 'water',
                sourceType: sourceType,
                location: location,
                date: date,
                pollutionType: pollutionType,
                parameters: {
                    phLevel: phLevel,
                    heavyMetals: heavyMetals,
                    nitrates: nitrates,
                    phosphates: phosphates
                },
                orderId: orderId ? parseInt(orderId) : null,
                hidden: hidden,
                additionalNotes: additionalNotes,
                createdAt: new Date().toISOString()
            };
            
            pollutionData.entries.push(newEntry);
            pollutionData.nextId += 1;
            localStorage.setItem('pollutionData', JSON.stringify(pollutionData));
            
            // Если указан orderId, обновляем заказ
            if (orderId) {
                const orders = JSON.parse(localStorage.getItem('orders')) || {};
                // Найти заказ по orderId
                let orderFound = false;
                for (const userId in orders) {
                    const userOrders = orders[userId];
                    const orderIndex = userOrders.findIndex(order => order.id == orderId);
                    if (orderIndex !== -1) {
                        userOrders[orderIndex].pollutionDataId = newEntry.id;
                        userOrders[orderIndex].status = 'completed';
                        orderFound = true;
                        break;
                    }
                }
                if (orderFound) {
                    localStorage.setItem('orders', JSON.stringify(orders));
                }
            }
            
            // Сброс формы
            this.reset();
            document.getElementById('water-chemical-fields').style.display = 'none';
            
            // Показываем сообщение об успехе
            const successMessage = getTranslatedText(
                'water-data-saved',
                'Су ластануы туралы деректер сәтті сақталды!',
                'Данные о загрязнении воды успешно сохранены!',
                'Water pollution data saved successfully!'
            );
            alert(successMessage);
            
            // Обновляем список заказов в админ панели
            if (adminModal.style.display === 'block') {
                showAllOrders();
            }
        });
    }
    
    const airPollutionForm = document.getElementById('air-pollution-form');
    if (airPollutionForm) {
        airPollutionForm.addEventListener('submit', function(e) {
            e.preventDefault();
            
            // Собираем данные формы
            const location = document.getElementById('air-location').value;
            const date = document.getElementById('air-date').value;
            const pollutionType = document.getElementById('air-pollution-type').value;
            const pm25 = document.getElementById('pm25').value;
            const pm10 = document.getElementById('pm10').value;
            const co = document.getElementById('co').value;
            const so2 = document.getElementById('so2').value;
            const orderId = document.getElementById('air-order-id').value;
            const hidden = document.getElementById('air-hidden').checked;
            const additionalNotes = document.getElementById('air-additional-notes').value;
            
            // Проверка обязательных полей
            if (!location || !date || !pollutionType) {
                const errorMessage = getTranslatedText(
                    'fill-required-fields',
                    'Барлық міндетті өрістерді толтырыңыз',
                    'Заполните все обязательные поля',
                    'Please fill in all required fields'
                );
                alert(errorMessage);
                return;
            }
            
            // Сохраняем данные о загрязнении
            const pollutionData = JSON.parse(localStorage.getItem('pollutionData')) || { nextId: 1, entries: [] };
            const newEntry = {
                id: pollutionData.nextId,
                type: 'air',
                location: location,
                date: date,
                pollutionType: pollutionType,
                parameters: {
                    pm25: pm25,
                    pm10: pm10,
                    co: co,
                    so2: so2
                },
                orderId: orderId ? parseInt(orderId) : null,
                hidden: hidden,
                additionalNotes: additionalNotes,
                createdAt: new Date().toISOString()
            };
            
            pollutionData.entries.push(newEntry);
            pollutionData.nextId += 1;
            localStorage.setItem('pollutionData', JSON.stringify(pollutionData));
            
            // Если указан orderId, обновляем заказ
            if (orderId) {
                const orders = JSON.parse(localStorage.getItem('orders')) || {};
                // Найти заказ по orderId
                let orderFound = false;
                for (const userId in orders) {
                    const userOrders = orders[userId];
                    const orderIndex = userOrders.findIndex(order => order.id == orderId);
                    if (orderIndex !== -1) {
                        userOrders[orderIndex].pollutionDataId = newEntry.id;
                        userOrders[orderIndex].status = 'completed';
                        orderFound = true;
                        break;
                    }
                }
                if (orderFound) {
                    localStorage.setItem('orders', JSON.stringify(orders));
                }
            }
            
            // Сброс формы
            this.reset();
            
            // Показываем сообщение об успехе
            const successMessage = getTranslatedText(
                'air-data-saved',
                'Ауа ластануы туралы деректер сәтті сақталды!',
                'Данные о загрязнении воздуха успешно сохранены!',
                'Air pollution data saved successfully!'
            );
            alert(successMessage);
            
            // Обновляем список заказов в админ панели
            if (adminModal.style.display === 'block') {
                showAllOrders();
            }
        });
    }
    
    const wastePollutionForm = document.getElementById('waste-pollution-form');
    if (wastePollutionForm) {
        wastePollutionForm.addEventListener('submit', function(e) {
            e.preventDefault();
            
            // Собираем данные формы
            const location = document.getElementById('waste-location').value;
            const date = document.getElementById('waste-date').value;
            const wasteType = document.getElementById('waste-type').value;
            const volume = document.getElementById('waste-volume').value;
            const weight = document.getElementById('waste-weight').value;
            const orderId = document.getElementById('waste-order-id').value;
            const hidden = document.getElementById('waste-hidden').checked;
            const additionalNotes = document.getElementById('waste-additional-notes').value;
            
            // Проверка обязательных полей
            if (!location || !date || !wasteType) {
                const errorMessage = getTranslatedText(
                    'fill-required-fields',
                    'Барлық міндетті өрістерді толтырыңыз',
                    'Заполните все обязательные поля',
                    'Please fill in all required fields'
                );
                alert(errorMessage);
                return;
            }
            
            // Сохраняем данные о загрязнении
            const pollutionData = JSON.parse(localStorage.getItem('pollutionData')) || { nextId: 1, entries: [] };
            const newEntry = {
                id: pollutionData.nextId,
                type: 'waste',
                location: location,
                date: date,
                wasteType: wasteType,
                parameters: {
                    volume: volume,
                    weight: weight
                },
                orderId: orderId ? parseInt(orderId) : null,
                hidden: hidden,
                additionalNotes: additionalNotes,
                createdAt: new Date().toISOString()
            };
            
            pollutionData.entries.push(newEntry);
            pollutionData.nextId += 1;
            localStorage.setItem('pollutionData', JSON.stringify(pollutionData));
            
            // Если указан orderId, обновляем заказ
            if (orderId) {
                const orders = JSON.parse(localStorage.getItem('orders')) || {};
                // Найти заказ по orderId
                let orderFound = false;
                for (const userId in orders) {
                    const userOrders = orders[userId];
                    const orderIndex = userOrders.findIndex(order => order.id == orderId);
                    if (orderIndex !== -1) {
                        userOrders[orderIndex].pollutionDataId = newEntry.id;
                        userOrders[orderIndex].status = 'completed';
                        orderFound = true;
                        break;
                    }
                }
                if (orderFound) {
                    localStorage.setItem('orders', JSON.stringify(orders));
                }
            }
            
            // Сброс формы
            this.reset();
            
            // Показываем сообщение об успехе
            const successMessage = getTranslatedText(
                'waste-data-saved',
                'Қоқыс ластануы туралы деректер сәтті сақталды!',
                'Данные о загрязнении отходами успешно сохранены!',
                'Waste pollution data saved successfully!'
            );
            alert(successMessage);
            
            // Обновляем список заказов в админ панели
            if (adminModal.style.display === 'block') {
                showAllOrders();
            }
        });
    }
    
    // Обработчик для радиоактивного загрязнения
    const radioactiveForm = document.getElementById('radioactive-pollution-form');
    if (radioactiveForm) {
        radioactiveForm.addEventListener('submit', function(e) {
            e.preventDefault();
            
            // Собираем данные формы
            const sourceType = document.getElementById('radioactive-source-type').value;
            const location = document.getElementById('radioactive-location').value;
            const date = document.getElementById('radioactive-date').value;
            const radiationLevel = document.getElementById('radiation-level').value;
            const measurementDistance = document.getElementById('measurement-distance').value;
            const gammaRadiation = document.getElementById('gamma-radiation').value;
            const betaRadiation = document.getElementById('beta-radiation').value;
            const isotopes = document.getElementById('radioactive-isotopes').value;
            const orderId = document.getElementById('radioactive-order-id').value;
            const hidden = document.getElementById('radioactive-hidden').checked;
            const additionalNotes = document.getElementById('radioactive-additional-notes').value;
            
            // Проверка обязательных полей
            if (!sourceType || !location || !date) {
                const errorMessage = getTranslatedText(
                    'fill-required-fields',
                    'Барлық міндетті өрістерді толтырыңыз',
                    'Заполните все обязательные поля',
                    'Please fill in all required fields'
                );
                alert(errorMessage);
                return;
            }
            
            // Сохраняем данные о загрязнении
            const pollutionData = JSON.parse(localStorage.getItem('pollutionData')) || { nextId: 1, entries: [] };
            const newEntry = {
                id: pollutionData.nextId,
                type: 'radioactive',
                sourceType: sourceType,
                location: location,
                date: date,
                parameters: {
                    radiationLevel: radiationLevel,
                    measurementDistance: measurementDistance,
                    gammaRadiation: gammaRadiation,
                    betaRadiation: betaRadiation,
                    isotopes: isotopes
                },
                orderId: orderId ? parseInt(orderId) : null,
                hidden: hidden,
                additionalNotes: additionalNotes,
                createdAt: new Date().toISOString()
            };
            
            pollutionData.entries.push(newEntry);
            pollutionData.nextId += 1;
            localStorage.setItem('pollutionData', JSON.stringify(pollutionData));
            
            // Если указан orderId, обновляем заказ
            if (orderId) {
                const orders = JSON.parse(localStorage.getItem('orders')) || {};
                // Найти заказ по orderId
                let orderFound = false;
                for (const userId in orders) {
                    const userOrders = orders[userId];
                    const orderIndex = userOrders.findIndex(order => order.id == orderId);
                    if (orderIndex !== -1) {
                        userOrders[orderIndex].pollutionDataId = newEntry.id;
                        userOrders[orderIndex].status = 'completed';
                        orderFound = true;
                        break;
                    }
                }
                if (orderFound) {
                    localStorage.setItem('orders', JSON.stringify(orders));
                }
            }
            
            // Сброс формы
            this.reset();
            
            // Показываем сообщение об успехе
            const successMessage = getTranslatedText(
                'radioactive-data-saved',
                'Радиоактивті ластану туралы деректер сәтті сақталды!',
                'Данные о радиоактивном загрязнении успешно сохранены!',
                'Radioactive pollution data saved successfully!'
            );
            alert(successMessage);
            
            // Обновляем список заказов в админ панели
            if (adminModal.style.display === 'block') {
                showAllOrders();
            }
        });
    }

    // Обработчик для шумового загрязнения
    const noiseForm = document.getElementById('noise-pollution-form');
    if (noiseForm) {
        noiseForm.addEventListener('submit', function(e) {
            e.preventDefault();
            
            // Собираем данные формы
            const sourceType = document.getElementById('noise-source-type').value;
            const location = document.getElementById('noise-location').value;
            const date = document.getElementById('noise-date').value;
            const time = document.getElementById('noise-time').value;
            const measurementDuration = document.getElementById('measurement-duration').value;
            const noiseLevelDay = document.getElementById('noise-level-day').value;
            const noiseLevelNight = document.getElementById('noise-level-night').value;
            const noiseFrequency = document.getElementById('noise-frequency').value;
            const orderId = document.getElementById('noise-order-id').value;
            const hidden = document.getElementById('noise-hidden').checked;
            const additionalNotes = document.getElementById('noise-additional-notes').value;
            
            // Проверка обязательных полей
            if (!sourceType || !location || !date || !time || !measurementDuration) {
                const errorMessage = getTranslatedText(
                    'fill-required-fields',
                    'Барлық міндетті өрістерді толтырыңыз',
                    'Заполните все обязательные поля',
                    'Please fill in all required fields'
                );
                alert(errorMessage);
                return;
            }
            
            // Сохраняем данные о загрязнении
            const pollutionData = JSON.parse(localStorage.getItem('pollutionData')) || { nextId: 1, entries: [] };
            const newEntry = {
                id: pollutionData.nextId,
                type: 'noise',
                sourceType: sourceType,
                location: location,
                date: date,
                time: time,
                parameters: {
                    measurementDuration: measurementDuration,
                    noiseLevelDay: noiseLevelDay,
                    noiseLevelNight: noiseLevelNight,
                    noiseFrequency: noiseFrequency
                },
                orderId: orderId ? parseInt(orderId) : null,
                hidden: hidden,
                additionalNotes: additionalNotes,
                createdAt: new Date().toISOString()
            };
            
            pollutionData.entries.push(newEntry);
            pollutionData.nextId += 1;
            localStorage.setItem('pollutionData', JSON.stringify(pollutionData));
            
            // Если указан orderId, обновляем заказ
            if (orderId) {
                const orders = JSON.parse(localStorage.getItem('orders')) || {};
                // Найти заказ по orderId
                let orderFound = false;
                for (const userId in orders) {
                    const userOrders = orders[userId];
                    const orderIndex = userOrders.findIndex(order => order.id == orderId);
                    if (orderIndex !== -1) {
                        userOrders[orderIndex].pollutionDataId = newEntry.id;
                        userOrders[orderIndex].status = 'completed';
                        orderFound = true;
                        break;
                    }
                }
                if (orderFound) {
                    localStorage.setItem('orders', JSON.stringify(orders));
                }
            }
            
            // Сброс формы
            this.reset();
            
            // Показываем сообщение об успехе
            const successMessage = getTranslatedText(
                'noise-data-saved',
                'Шу ластануы туралы деректер сәтті сақталды!',
                'Данные о шумовом загрязнении успешно сохранены!',
                'Noise pollution data saved successfully!'
            );
            alert(successMessage);
            
            // Обновляем список заказов в админ панели
            if (adminModal.style.display === 'block') {
                showAllOrders();
            }
        });
    }

    // Обработчик для экологической оценки
    const assessmentForm = document.getElementById('assessment-form');
    if (assessmentForm) {
        assessmentForm.addEventListener('submit', function(e) {
            e.preventDefault();
            
            // Собираем данные формы
            const assessmentType = document.getElementById('assessment-type').value;
            const location = document.getElementById('assessment-location').value;
            const date = document.getElementById('assessment-date').value;
            const assessmentObject = document.getElementById('assessment-object').value;
            const conclusion = document.getElementById('assessment-conclusion').value;
            const recommendations = document.getElementById('recommendations').value;
            const nextAssessmentDate = document.getElementById('next-assessment-date').value;
            const orderId = document.getElementById('assessment-order-id').value;
            const hidden = document.getElementById('assessment-hidden').checked;
            const additionalNotes = document.getElementById('assessment-additional-notes').value;
            
            // Получаем выбранные параметры оценки
            const selectedParams = [];
            document.querySelectorAll('input[name="assessment-parameters"]:checked').forEach(checkbox => {
                selectedParams.push(checkbox.value);
            });
            
            // Проверка обязательных полей
            if (!assessmentType || !location || !date || !assessmentObject || !conclusion) {
                const errorMessage = getTranslatedText(
                    'fill-required-fields',
                    'Барлық міндетті өрістерді толтырыңыз',
                    'Заполните все обязательные поля',
                    'Please fill in all required fields'
                );
                alert(errorMessage);
                return;
            }
            
            // Сохраняем данные о загрязнении
            const pollutionData = JSON.parse(localStorage.getItem('pollutionData')) || { nextId: 1, entries: [] };
            const newEntry = {
                id: pollutionData.nextId,
                type: 'assessment',
                location: location,
                date: date,
                assessmentType: assessmentType,
                assessmentObject: assessmentObject,
                parameters: {
                    selectedParameters: selectedParams,
                    conclusion: conclusion,
                    recommendations: recommendations,
                    nextAssessmentDate: nextAssessmentDate
                },
                orderId: orderId ? parseInt(orderId) : null,
                hidden: hidden,
                additionalNotes: additionalNotes,
                createdAt: new Date().toISOString()
            };
            
            pollutionData.entries.push(newEntry);
            pollutionData.nextId += 1;
            localStorage.setItem('pollutionData', JSON.stringify(pollutionData));
            
            // Если указан orderId, обновляем заказ
            if (orderId) {
                const orders = JSON.parse(localStorage.getItem('orders')) || {};
                // Найти заказ по orderId
                let orderFound = false;
                for (const userId in orders) {
                    const userOrders = orders[userId];
                    const orderIndex = userOrders.findIndex(order => order.id == orderId);
                    if (orderIndex !== -1) {
                        userOrders[orderIndex].pollutionDataId = newEntry.id;
                        userOrders[orderIndex].status = 'completed';
                        orderFound = true;
                        break;
                    }
                }
                if (orderFound) {
                    localStorage.setItem('orders', JSON.stringify(orders));
                }
            }
            
            // Сброс формы
            this.reset();
            
            // Показываем сообщение об успехе
            const successMessage = getTranslatedText(
                'assessment-data-saved',
                'Экологиялық бағалау туралы деректер сәтті сақталды!',
                'Данные об экологической оценке успешно сохранены!',
                'Environmental assessment data saved successfully!'
            );
            alert(successMessage);
            
            // Обновляем список заказов в админ панели
            if (adminModal.style.display === 'block') {
                showAllOrders();
            }
        });
    }
    
    // Order service buttons
    const orderServiceButtons = document.querySelectorAll('.order-service-btn');
    orderServiceButtons.forEach(button => {
        button.addEventListener('click', function() {
            const serviceId = this.getAttribute('data-service-id');
            const servicePrice = this.getAttribute('data-service-price');
            
            showOrderForm(serviceId, servicePrice);
        });
    });
    
    // Show order form
    function showOrderForm(serviceId, servicePrice) {
        const service = servicesData[serviceId];
        if (!service) return;
        
        // Set service details
        document.getElementById('selected-service-id').value = serviceId;
        document.getElementById('selected-service-price').value = servicePrice;
        
        // Set service name based on current language
        let serviceName;
        if (currentLang === 'kk') serviceName = service.name_kk;
        else if (currentLang === 'ru') serviceName = service.name_ru;
        else serviceName = service.name_en;
        
        document.getElementById('selected-service').value = serviceName;
        document.getElementById('order-total-amount').textContent = parseInt(servicePrice).toLocaleString() + ' ₸';
        
        // Set current date as default
        const today = new Date().toISOString().split('T')[0];
        document.getElementById('order-date').value = today;
        document.getElementById('order-date').min = today;
        
        // Set user email if logged in
        if (currentUser.email) {
            document.getElementById('order-email').value = currentUser.email;
        }
        
        // Сбросить чекбокс
        document.getElementById('order-hide-data').checked = false;
        
        // Show order form
        document.getElementById('order-form-container').style.display = 'block';
        
        // Scroll to form
        document.getElementById('order-form-container').scrollIntoView({ behavior: 'smooth' });
    }
    
    // Hide order form
    function hideOrderForm() {
        document.getElementById('order-form-container').style.display = 'none';
        document.getElementById('service-order-form').reset();
    }
    
    // Cancel order button
    if (cancelOrderBtn) {
        cancelOrderBtn.addEventListener('click', function() {
            hideOrderForm();
        });
    }
    
    // Handle service order form submission
    if (serviceOrderForm) {
        serviceOrderForm.addEventListener('submit', function(e) {
            e.preventDefault();
            
            const serviceId = document.getElementById('selected-service-id').value;
            const servicePrice = document.getElementById('selected-service-price').value;
            const orderDate = document.getElementById('order-date').value;
            const address = document.getElementById('order-address').value;
            const phone = document.getElementById('order-phone').value;
            const email = document.getElementById('order-email').value;
            const hideData = document.getElementById('order-hide-data').checked;
            const notes = document.getElementById('order-notes').value;
            
            // Простая валидация
            if (!serviceId || !orderDate || !address || !phone || !email) {
                const errorMessage = getTranslatedText(
                    'fill-required-fields',
                    'Барлық міндетті өрістерді толтырыңыз',
                    'Заполните все обязательные поля',
                    'Please fill in all required fields'
                );
                alert(errorMessage);
                return;
            }
            
            // Получаем данные для сохранения заказа
            const orders = JSON.parse(localStorage.getItem('orders')) || {};
            const nextOrderId = parseInt(localStorage.getItem('nextOrderId')) || 1;
            const userId = currentUser.id;
            
            // Создаем объект заказа
            const order = {
                id: nextOrderId,
                serviceId: parseInt(serviceId),
                userId: userId,
                orderDate: orderDate,
                address: address,
                phone: phone,
                email: email,
                hideData: hideData,
                notes: notes,
                price: parseInt(servicePrice),
                status: 'pending', // pending, paid, in-progress, completed, cancelled
                pollutionDataId: null, // ID данных о загрязнении, которые введет администратор
                createdAt: new Date().toISOString()
            };
            
            // Сохраняем заказ
            if (!orders[userId]) {
                orders[userId] = [];
            }
            orders[userId].push(order);
            
            localStorage.setItem('orders', JSON.stringify(orders));
            localStorage.setItem('nextOrderId', (nextOrderId + 1).toString());
            
            // Сбрасываем форму
            this.reset();
            hideOrderForm();
            
            // Показываем сообщение об успехе
            const successMessage = getTranslatedText(
                'order-created-success',
                'Тапсырыс сәтті жасалды! Төлем жасау үшін "Менің тапсырыстарым" бөліміне өтіңіз.',
                'Заказ успешно оформлен! Перейдите в раздел "Мои заказы" для оплаты.',
                'Order successfully placed! Go to "My Orders" section to make payment.'
            );
            alert(successMessage);
            
            // Переключаем на страницу заказов
            switchToPage('my-orders');
        });
    }
    
    // Загрузка данных о загрязнении для просмотра
   // Загрузка данных о загрязнении для просмотра с фильтрами
function loadPollutionDataForView() {
    const tbody = document.getElementById('data-view-tbody');
    if (!tbody) return;
    
    const pollutionData = JSON.parse(localStorage.getItem('pollutionData')) || { entries: [] };
    
    // Получаем значения фильтров
    const filterType = document.getElementById('filter-type')?.value || 'all';
    const filterDate = document.getElementById('filter-date')?.value || '';
    const filterLocation = document.getElementById('filter-location')?.value || '';
    
    // Фильтруем данные: показываем только те, которые не помечены как скрытые (hidden: false)
    let filteredData = pollutionData.entries.filter(entry => !entry.hidden);
    
    // Применяем фильтры
    if (filterType && filterType !== 'all') {
        filteredData = filteredData.filter(entry => entry.type === filterType);
    }
    
    if (filterDate) {
        filteredData = filteredData.filter(entry => entry.date === filterDate);
    }
    
    if (filterLocation) {
        const locationLower = filterLocation.toLowerCase();
        filteredData = filteredData.filter(entry => 
            entry.location && entry.location.toLowerCase().includes(locationLower)
        );
    }
    
    // Очищаем таблицу
    tbody.innerHTML = '';
    
    if (filteredData.length === 0) {
        tbody.innerHTML = `
            <tr>
                <td colspan="5" style="text-align: center; padding: 30px;">
                    ${translations[currentLang]['no-data-found'] || getTranslatedText('no-data-found', 'Деректер табылмады', 'Данные не найдены', 'No data found')}
                </td>
            </tr>
        `;
        return;
    }
    
    // Сортируем по дате (новые первыми)
    filteredData.sort((a, b) => new Date(b.date) - new Date(a.date));
    
    // Добавляем данные в таблицу
    filteredData.forEach(entry => {
        const row = document.createElement('tr');
        
        // Определяем тип на текущем языке
        let typeText = '';
        switch(entry.type) {
            case 'water':
                typeText = translations[currentLang]['water-pollution-tab'] || getTranslatedText('water-type', 'Су ластануы', 'Загрязнение воды', 'Water Pollution');
                break;
            case 'air':
                typeText = translations[currentLang]['air-pollution-tab'] || getTranslatedText('air-type', 'Ауа ластануы', 'Загрязнение воздуха', 'Air Pollution');
                break;
            case 'waste':
                typeText = translations[currentLang]['waste-pollution-tab'] || getTranslatedText('waste-type', 'Қоқыс ластануы', 'Загрязнение отходами', 'Waste Pollution');
                break;
            case 'radioactive':
                typeText = translations[currentLang]['radioactive-pollution-tab'] || getTranslatedText('radioactive-type', 'Радиоактивті ластану', 'Радиоактивное загрязнение', 'Radioactive Pollution');
                break;
            case 'noise':
                typeText = translations[currentLang]['noise-pollution-tab'] || getTranslatedText('noise-type', 'Шу ластануы', 'Шумовое загрязнение', 'Noise Pollution');
                break;
            case 'assessment':
                typeText = translations[currentLang]['assessment-type'] || getTranslatedText('assessment-type', 'Бағалау', 'Оценка', 'Assessment');
                break;
            default:
                typeText = entry.type;
        }
        
        // Формируем текст данных
        let dataText = '';
        switch(entry.type) {
            case 'water':
                dataText = `${translations[currentLang]['water-source-type-label'] || getTranslatedText('water-source-type', 'Су көзі', 'Источник воды', 'Water source')}: ${entry.sourceType || getTranslatedText('not-specified', 'Көрсетілмеген', 'Не указано', 'Not specified')}, `;
                dataText += `${translations[currentLang]['pollution-type-label'] || getTranslatedText('pollution-type', 'Ластану түрі', 'Тип загрязнения', 'Pollution type')}: ${entry.pollutionType || getTranslatedText('not-specified', 'Көрсетілмеген', 'Не указано', 'Not specified')}`;
                if (entry.parameters) {
                    if (entry.parameters.phLevel) dataText += `, pH: ${entry.parameters.phLevel}`;
                    if (entry.parameters.heavyMetals) dataText += `, ${translations[currentLang]['heavy-metals-label'] || getTranslatedText('heavy-metals', 'Ауыр металдар', 'Тяжелые металлы', 'Heavy metals')}: ${entry.parameters.heavyMetals}`;
                }
                break;
                
            case 'air':
                dataText = `${translations[currentLang]['pollution-type-label'] || getTranslatedText('pollution-type', 'Ластану түрі', 'Тип загрязнения', 'Pollution type')}: ${entry.pollutionType || getTranslatedText('not-specified', 'Көрсетілмеген', 'Не указано', 'Not specified')}`;
                if (entry.parameters) {
                    if (entry.parameters.pm25) dataText += `, PM2.5: ${entry.parameters.pm25}`;
                    if (entry.parameters.pm10) dataText += `, PM10: ${entry.parameters.pm10}`;
                }
                break;
                
            case 'waste':
                dataText = `${translations[currentLang]['waste-type-label'] || getTranslatedText('waste-type', 'Қоқыс түрі', 'Тип отходов', 'Waste type')}: ${entry.wasteType || getTranslatedText('not-specified', 'Көрсетілмеген', 'Не указано', 'Not specified')}`;
                if (entry.parameters) {
                    if (entry.parameters.volume) dataText += `, ${translations[currentLang]['waste-volume-label'] || getTranslatedText('waste-volume', 'Көлем', 'Объем', 'Volume')}: ${entry.parameters.volume}`;
                    if (entry.parameters.weight) dataText += `, ${translations[currentLang]['waste-weight-label'] || getTranslatedText('waste-weight', 'Салмақ', 'Вес', 'Weight')}: ${entry.parameters.weight}`;
                }
                break;
                
            case 'radioactive':
                dataText = `${translations[currentLang]['radiation-source-type-label'] || getTranslatedText('radiation-source', 'Радиация көзі', 'Источник радиации', 'Radiation source')}: ${entry.sourceType || getTranslatedText('not-specified', 'Көрсетілмеген', 'Не указано', 'Not specified')}`;
                if (entry.parameters && entry.parameters.radiationLevel) {
                    dataText += `, ${translations[currentLang]['radiation-level-label'] || getTranslatedText('radiation-level', 'Радиация деңгейі', 'Уровень радиации', 'Radiation level')}: ${entry.parameters.radiationLevel}`;
                }
                break;
                
            case 'noise':
                dataText = `${translations[currentLang]['noise-source-type-label'] || getTranslatedText('noise-source', 'Шу көзі', 'Источник шума', 'Noise source')}: ${entry.sourceType || getTranslatedText('not-specified', 'Көрсетілмеген', 'Не указано', 'Not specified')}`;
                if (entry.parameters) {
                    if (entry.parameters.noiseLevelDay) dataText += `, ${translations[currentLang]['noise-level-day-label'] || getTranslatedText('noise-day', 'Күндізгі шу', 'Шум днем', 'Daytime noise')}: ${entry.parameters.noiseLevelDay}`;
                    if (entry.parameters.noiseLevelNight) dataText += `, ${translations[currentLang]['noise-level-night-label'] || getTranslatedText('noise-night', 'Түнгі шу', 'Шум ночью', 'Nighttime noise')}: ${entry.parameters.noiseLevelNight}`;
                }
                break;
                
            case 'assessment':
                dataText = `${translations[currentLang]['assessment-type-label'] || getTranslatedText('assessment-type', 'Бағалау түрі', 'Тип оценки', 'Assessment type')}: ${entry.assessmentType || getTranslatedText('not-specified', 'Көрсетілмеген', 'Не указано', 'Not specified')}`;
                if (entry.parameters && entry.parameters.conclusion) {
                    const shortConclusion = entry.parameters.conclusion.length > 50 
                        ? entry.parameters.conclusion.substring(0, 50) + '...' 
                        : entry.parameters.conclusion;
                    dataText += `, ${translations[currentLang]['assessment-conclusion-label'] || getTranslatedText('assessment-conclusion', 'Қорытынды', 'Заключение', 'Conclusion')}: ${shortConclusion}`;
                }
                break;
                
            default:
                dataText = translations[currentLang]['table-data'] || getTranslatedText('data', 'Деректер', 'Данные', 'Data');
        }
        
        // Добавляем примечания, если есть
        if (entry.additionalNotes) {
            const shortNotes = entry.additionalNotes.length > 30 
                ? entry.additionalNotes.substring(0, 30) + '...' 
                : entry.additionalNotes;
            dataText += `, ${translations[currentLang]['additional-notes-label'] || getTranslatedText('additional-notes', 'Қосымша ескертулер', 'Дополнительные примечания', 'Additional notes')}: ${shortNotes}`;
        }
        
        row.innerHTML = `
            <td>${entry.date || ''}</td>
            <td>${typeText}</td>
            <td>${entry.location || ''}</td>
            <td>${dataText}</td>
            <td><button class="btn table-btn" style="padding: 5px 10px; font-size: 0.8rem;" onclick="viewPollutionDataDetails(${entry.id})" data-i18n="details-button">${translations[currentLang]['details-button'] || getTranslatedText('details', 'Толығырақ', 'Подробнее', 'Details')}</button></td>
        `;
        
        tbody.appendChild(row);
    });
}
    // Функция для перевода значений полей
function getTranslatedValue(key, value) {
    if (!value) return value;
    
    // Переводы для значений полей
    const valueTranslations = {
       'water_source': {
        'river': getTranslatedText('river', 'Өзен', 'Река', 'River'),
        'lake': getTranslatedText('lake', 'Көл', 'Озеро', 'Lake'),
        'groundwater': getTranslatedText('groundwater', 'Жер асты суы', 'Подземные воды', 'Groundwater'),
        'sea': getTranslatedText('sea', 'Теңіз', 'Море', 'Sea'),
        'plumbing': getTranslatedText('plumbing', 'Су құбыры', 'Водопровод', 'Plumbing')
    },
    // Типы загрязнения воды
    'water_pollution_type': {
        'chemical': getTranslatedText('chemical-pollution', 'Химиялық', 'Химическое', 'Chemical'),
        'biological': getTranslatedText('biological-pollution', 'Биологиялық', 'Биологическое', 'Biological'),
        'physical': getTranslatedText('physical-pollution', 'Физикалық', 'Физическое', 'Physical'),
        'pollution is absent': getTranslatedText('thermal-pollution', 'Ластану жоқ', 'Загрязнение отсутствует', 'Pollution is absent')
    },
         // Источники радиации
         'radiation_source': {
            'natural': getTranslatedText('natural-radiation-source', 'Табиғи радиация', 'Естественная радиация', 'Natural radiation'),
            'industrial': getTranslatedText('industrial-radiation-source', 'Өнеркәсіптік радиация', 'Промышленная радиация', 'Industrial radiation'),
            'medical': getTranslatedText('medical-radiation-source', 'Медициналық радиация', 'Медицинская радиация', 'Medical radiation'),
            'nuclear': getTranslatedText('nuclear-radiation-source', 'Ядролық объектілер', 'Ядерные объекты', 'Nuclear facilities'),
            'accident': getTranslatedText('accident-radiation-source', 'Авариялық жағдай', 'Аварийная ситуация', 'Accident situation'),
            'pollution is absent': getTranslatedText('thermal-pollution', 'Ластану жоқ', 'Загрязнение отсутствует', 'Pollution is absent')
        },
        // Типы отходов
        'waste_type': {
            'household': getTranslatedText('household-waste-type', 'Тұрмыстық қоқыс', 'Бытовые отходы', 'Household waste'),
            'industrial': getTranslatedText('industrial-waste-type', 'Өнеркәсіптік қоқыс', 'Промышленные отходы', 'Industrial waste'),
            'construction': getTranslatedText('construction-waste-type', 'Құрылыс қоқысы', 'Строительные отходы', 'Construction waste'),
            'hazardous': getTranslatedText('hazardous-waste-type', 'Қауіпті қоқыс', 'Опасные отходы', 'Hazardous waste'),
            'pollution is absent': getTranslatedText('thermal-pollution', 'Ластану жоқ', 'Загрязнение отсутствует', 'Pollution is absent')
        },
        // Источники шума
        'noise_source': {
            'transport': getTranslatedText('transport-noise-source', 'Көлік шуы', 'Транспортный шум', 'Transport noise'),
            'industrial': getTranslatedText('industrial-noise-source', 'Өнеркәсіптік шу', 'Промышленный шум', 'Industrial noise'),
            'construction': getTranslatedText('construction-noise-source', 'Құрылыс шуы', 'Строительный шум', 'Construction noise'),
            'commercial': getTranslatedText('commercial-noise-source', 'Коммерциялық шу', 'Коммерческий шум', 'Commercial noise'),
            'household': getTranslatedText('household-noise-source', 'Тұрмыстық шу', 'Бытовой шум', 'Household noise'),
            'entertainment': getTranslatedText('entertainment-noise-source', 'Көңіл көтеру орындарының шуы', 'Шум развлекательных заведений', 'Entertainment venue noise'),
            'pollution is absent': getTranslatedText('thermal-pollution', 'Ластану жоқ', 'Загрязнение отсутствует', 'Pollution is absent')
        },
        // Типы загрязнения воздуха
        'air_pollution_type': {
            'industrial': getTranslatedText('industrial-pollution', 'Өнеркәсіптік ластану', 'Промышленное загрязнение', 'Industrial pollution'),
            'transport': getTranslatedText('transport-pollution', 'Көлік ластануы', 'Транспортное загрязнение', 'Transport pollution'),
            'agricultural': getTranslatedText('agricultural-pollution', 'Ауылшаруашылық ластану', 'Сельскохозяйственное загрязнение', 'Agricultural pollution'),
            'pollution is absent': getTranslatedText('thermal-pollution', 'Ластану жоқ', 'Загрязнение отсутствует', 'Pollution is absent')
        },
        // Типы оценки
        'assessment_type': {
            'construction': getTranslatedText('construction-assessment', 'Құрылыс алдындағы экологиялық бағалау', 'Экологическая оценка перед строительством', 'Pre-construction environmental assessment'),
            'operational': getTranslatedText('operational-assessment', 'Қызмет көрсету кезіндегі экологиялық бағалау', 'Экологическая оценка при эксплуатации', 'Operational environmental assessment'),
            'monitoring': getTranslatedText('monitoring-assessment', 'Мониторингтік бағалау', 'Мониторинговая оценка', 'Monitoring assessment'),
            'accident': getTranslatedText('accident-assessment', 'Авариядан кейінгі экологиялық бағалау', 'Экологическая оценка после аварии', 'Post-accident environmental assessment'),
            'strategic': getTranslatedText('strategic-assessment', 'Стратегиялық экологиялық бағалау', 'Стратегическая экологическая оценка', 'Strategic environmental assessment')
        },
    };
    
    if (valueTranslations[key] && valueTranslations[key][value]) {
        return valueTranslations[key][value];
    }
    
    return value;
}

    // Просмотр деталей данных о загрязнении
window.viewPollutionDataDetails = function(pollutionDataId) {
    const pollutionData = JSON.parse(localStorage.getItem('pollutionData')) || { entries: [] };
    const entry = pollutionData.entries.find(e => e.id === pollutionDataId);
    
    if (!entry) {
        const errorMessage = getTranslatedText(
            'data-not-found',
            'Деректер табылмады',
            'Данные не найдены',
            'Data not found'
        );
        alert(errorMessage);
        return;
    }
    
    let detailsHTML = '';
    let title = '';
    let typeLabel = '';
    
    // Определяем заголовок и тип загрязнения
    if (entry.type === 'water') {
        title = translations[currentLang]['water-type'] || getTranslatedText('water-type', 'Су ластануы', 'Загрязнение воды', 'Water Pollution');
        typeLabel = getTranslatedText('water-type-label', 'Су ластануы', 'Загрязнение воды', 'Water Pollution');
    } else if (entry.type === 'air') {
        title = translations[currentLang]['air-type'] || getTranslatedText('air-type', 'Ауа ластануы', 'Загрязнение воздуха', 'Air Pollution');
        typeLabel = getTranslatedText('air-type-label', 'Ауа ластануы', 'Загрязнение воздуха', 'Air Pollution');
    } else if (entry.type === 'waste') {
        title = translations[currentLang]['waste-type'] || getTranslatedText('waste-type', 'Қоқыс ластануы', 'Загрязнение отходами', 'Waste Pollution');
        typeLabel = getTranslatedText('waste-type-label', 'Қоқыс ластануы', 'Загрязнение отходами', 'Waste Pollution');
    } else if (entry.type === 'radioactive') {
        title = translations[currentLang]['radioactive-pollution-tab'] || getTranslatedText('radioactive-type', 'Радиоактивті ластану', 'Радиоактивное загрязнение', 'Radioactive Pollution');
        typeLabel = getTranslatedText('radioactive-type-label', 'Радиоактивті ластану', 'Радиоактивное загрязнение', 'Radioactive Pollution');
    } else if (entry.type === 'noise') {
        title = translations[currentLang]['noise-pollution-tab'] || getTranslatedText('noise-type', 'Шу ластануы', 'Шумовое загрязнение', 'Noise Pollution');
        typeLabel = getTranslatedText('noise-type-label', 'Шу ластануы', 'Шумовое загрязнение', 'Noise Pollution');
    } else if (entry.type === 'assessment') {
        title = translations[currentLang]['assessment-type'] || getTranslatedText('assessment-type', 'Экологиялық бағалау', 'Экологическая оценка', 'Environmental Assessment');
        typeLabel = getTranslatedText('assessment-type-label', 'Экологиялық бағалау', 'Экологическая оценка', 'Environmental Assessment');
    }
    
    // Базовые детали
    detailsHTML = `
        <div class="popup-content">
            <h1>${title}</h1>
            
            <div class="details-section">
                <h2>${getTranslatedText('basic-info', 'Негізгі ақпарат', 'Основная информация', 'Basic Information')}</h2>
    `;
    
    // Добавляем поля в зависимости от типа
    if (entry.type === 'water') {
        detailsHTML += `
            <div class="detail-row">
                <div class="detail-label">${getTranslatedText('water-source-type', 'Су көзінің түрі', 'Тип водного источника', 'Water Source Type')}:</div>
                <div class="detail-value">${getTranslatedValue('water_source', entry.sourceType) || getTranslatedText('not-specified', 'Көрсетілмеген', 'Не указано', 'Not specified')}</div>
            </div>
            <div class="detail-row">
                <div class="detail-label">${getTranslatedText('location', 'Орналасқан жері', 'Местоположение', 'Location')}:</div>
                <div class="detail-value">${entry.location}</div>
            </div>
            <div class="detail-row">
                <div class="detail-label">${getTranslatedText('date', 'Күні', 'Дата', 'Date')}:</div>
                <div class="detail-value">${entry.date}</div>
            </div>
            <div class="detail-row">
                <div class="detail-label">${getTranslatedText('pollution-type', 'Ластану түрі', 'Тип загрязнения', 'Pollution Type')}:</div>
                <div class="detail-value">${getTranslatedValue('water_pollution_type', entry.pollutionType) || getTranslatedText('not-specified', 'Көрсетілмеген', 'Не указано', 'Not specified')}</div>
            </div>
        `;
    } else if (entry.type === 'air') {
        detailsHTML += `
            <div class="detail-row">
                <div class="detail-label">${getTranslatedText('location', 'Орналасқан жері', 'Местоположение', 'Location')}:</div>
                <div class="detail-value">${entry.location}</div>
            </div>
            <div class="detail-row">
                <div class="detail-label">${getTranslatedText('date', 'Күні', 'Дата', 'Date')}:</div>
                <div class="detail-value">${entry.date}</div>
            </div>
            <div class="detail-row">
                <div class="detail-label">${getTranslatedText('pollution-type', 'Ластану түрі', 'Тип загрязнения', 'Pollution Type')}:</div>
                <div class="detail-value">${getTranslatedValue('air_pollution_type', entry.pollutionType) || getTranslatedText('not-specified', 'Көрсетілмеген', 'Не указано', 'Not specified')}</div>
            </div>
        `;
    } else if (entry.type === 'waste') {
        detailsHTML += `
            <div class="detail-row">
                <div class="detail-label">${getTranslatedText('location', 'Орналасқан жері', 'Местоположение', 'Location')}:</div>
                <div class="detail-value">${entry.location}</div>
            </div>
            <div class="detail-row">
                <div class="detail-label">${getTranslatedText('date', 'Күні', 'Дата', 'Date')}:</div>
                <div class="detail-value">${entry.date}</div>
            </div>
            <div class="detail-row">
                <div class="detail-label">${getTranslatedText('waste-type', 'Қоқыс түрі', 'Тип отходов', 'Waste Type')}:</div>
                <div class="detail-value">${getTranslatedValue('waste_type', entry.wasteType) || getTranslatedText('not-specified', 'Көрсетілмеген', 'Не указано', 'Not specified')}</div>
            </div>
        `;
    } else if (entry.type === 'radioactive') {
        detailsHTML += `
            <div class="detail-row">
                <div class="detail-label">${getTranslatedText('radiation-source', 'Радиация көзі', 'Источник радиации', 'Radiation Source')}:</div>
                <div class="detail-value">${getTranslatedValue('radiation_source', entry.sourceType) || getTranslatedText('not-specified', 'Көрсетілмеген', 'Не указано', 'Not specified')}</div>
            </div>
            <div class="detail-row">
                <div class="detail-label">${getTranslatedText('location', 'Орналасқан жері', 'Местоположение', 'Location')}:</div>
                <div class="detail-value">${entry.location}</div>
            </div>
            <div class="detail-row">
                <div class="detail-label">${getTranslatedText('date', 'Күні', 'Дата', 'Date')}:</div>
                <div class="detail-value">${entry.date}</div>
            </div>
        `;
    } else if (entry.type === 'noise') {
        detailsHTML += `
            <div class="detail-row">
                <div class="detail-label">${getTranslatedText('noise-source', 'Шу көзі', 'Источник шума', 'Noise Source')}:</div>
                <div class="detail-value">${getTranslatedValue('noise_source', entry.sourceType) || getTranslatedText('not-specified', 'Көрсетілмеген', 'Не указано', 'Not specified')}</div>
            </div>
            <div class="detail-row">
                <div class="detail-label">${getTranslatedText('location', 'Орналасқан жері', 'Местоположение', 'Location')}:</div>
                <div class="detail-value">${entry.location}</div>
            </div>
            <div class="detail-row">
                <div class="detail-label">${getTranslatedText('date', 'Күні', 'Дата', 'Date')}:</div>
                <div class="detail-value">${entry.date}</div>
            </div>
            <div class="detail-row">
                <div class="detail-label">${getTranslatedText('time', 'Уақыт', 'Время', 'Time')}:</div>
                <div class="detail-value">${entry.time || getTranslatedText('not-available', 'н/д', 'н/д', 'n/a')}</div>
            </div>
        `;
    } else if (entry.type === 'assessment') {
        detailsHTML += `
            <div class="detail-row">
                <div class="detail-label">${getTranslatedText('assessment-type', 'Бағалау түрі', 'Тип оценки', 'Assessment Type')}:</div>
                <div class="detail-value">${getTranslatedValue('assessment_type', entry.assessmentType) || getTranslatedText('not-specified', 'Көрсетілмеген', 'Не указано', 'Not specified')}</div>
            </div>
            <div class="detail-row">
                <div class="detail-label">${getTranslatedText('location', 'Орналасқан жері', 'Местоположение', 'Location')}:</div>
                <div class="detail-value">${entry.location}</div>
            </div>
            <div class="detail-row">
                <div class="detail-label">${getTranslatedText('date', 'Күні', 'Дата', 'Date')}:</div>
                <div class="detail-value">${entry.date}</div>
            </div>
            <div class="detail-row">
                <div class="detail-label">${getTranslatedText('assessment-object', 'Бағаланатын объект', 'Оцениваемый объект', 'Assessment Object')}:</div>
                <div class="detail-value">${entry.assessmentObject || getTranslatedText('not-specified', 'Көрсетілмеген', 'Не указано', 'Not specified')}</div>
            </div>
        `;
    }
    
    detailsHTML += `
            </div>
    `;
    
    // Параметры измерения
    if (entry.parameters && Object.keys(entry.parameters).length > 0) {
        detailsHTML += `
            <div class="details-section">
                <h2>${getTranslatedText('measurement-parameters', 'Өлшеу параметрлері', 'Параметры измерения', 'Measurement Parameters')}</h2>
        `;
        
        if (entry.type === 'water') {
            if (entry.parameters.phLevel) detailsHTML += `
                <div class="detail-row">
                    <div class="detail-label">${getTranslatedText('ph-level', 'pH деңгейі', 'Уровень pH', 'pH Level')}:</div>
                    <div class="detail-value">${entry.parameters.phLevel}</div>
                </div>`;
            if (entry.parameters.heavyMetals) detailsHTML += `
                <div class="detail-row">
                    <div class="detail-label">${translations[currentLang]['heavy-metals-label'] || getTranslatedText('heavy-metals', 'Ауыр металдар концентрациясы', 'Концентрация тяжелых металлов', 'Heavy metals concentration')}:</div>
                    <div class="detail-value">${entry.parameters.heavyMetals}</div>
                </div>`;
            if (entry.parameters.nitrates) detailsHTML += `
                <div class="detail-row">
                    <div class="detail-label">${translations[currentLang]['nitrates-label'] || getTranslatedText('nitrates', 'Нитраттар концентрациясы', 'Концентрация нитратов', 'Nitrates concentration')}:</div>
                    <div class="detail-value">${entry.parameters.nitrates}</div>
                </div>`;
            if (entry.parameters.phosphates) detailsHTML += `
                <div class="detail-row">
                    <div class="detail-label">${translations[currentLang]['phosphates-label'] || getTranslatedText('phosphates', 'Фосфаттар концентрациясы', 'Концентрация фосфатов', 'Phosphates concentration')}:</div>
                    <div class="detail-value">${entry.parameters.phosphates}</div>
                </div>`;
        } else if (entry.type === 'air') {
            if (entry.parameters.pm25) detailsHTML += `
                <div class="detail-row">
                    <div class="detail-label">PM2.5:</div>
                    <div class="detail-value">${entry.parameters.pm25} мкг/м³</div>
                </div>`;
            if (entry.parameters.pm10) detailsHTML += `
                <div class="detail-row">
                    <div class="detail-label">PM10:</div>
                    <div class="detail-value">${entry.parameters.pm10} мкг/м³</div>
                </div>`;
            if (entry.parameters.co) detailsHTML += `
                <div class="detail-row">
                    <div class="detail-label">CO:</div>
                    <div class="detail-value">${entry.parameters.co} мг/м³</div>
                </div>`;
            if (entry.parameters.so2) detailsHTML += `
                <div class="detail-row">
                    <div class="detail-label">SO₂:</div>
                    <div class="detail-value">${entry.parameters.so2} мкг/м³</div>
                </div>`;
        } else if (entry.type === 'waste') {
            if (entry.parameters.volume) detailsHTML += `
                <div class="detail-row">
                    <div class="detail-label">${translations[currentLang]['waste-volume-label'] || getTranslatedText('waste-volume', 'Қоқыс көлемі', 'Объем отходов', 'Waste Volume')}:</div>
                    <div class="detail-value">${entry.parameters.volume}</div>
                </div>`;
            if (entry.parameters.weight) detailsHTML += `
                <div class="detail-row">
                    <div class="detail-label">${translations[currentLang]['waste-weight-label'] || getTranslatedText('waste-weight', 'Қоқыс салмағы', 'Вес отходов', 'Waste Weight')}:</div>
                    <div class="detail-value">${entry.parameters.weight}</div>
                </div>`;
        } else if (entry.type === 'radioactive') {
            if (entry.parameters.radiationLevel) detailsHTML += `
                <div class="detail-row">
                    <div class="detail-label">${translations[currentLang]['radiation-level-label'] || getTranslatedText('radiation-level', 'Радиация деңгейі (мкЗв/сағ)', 'Уровень радиации (мкЗв/ч)', 'Radiation Level (µSv/h)')}:</div>
                    <div class="detail-value">${entry.parameters.radiationLevel} мкЗв/сағ</div>
                </div>`;
            if (entry.parameters.measurementDistance) detailsHTML += `
                <div class="detail-row">
                    <div class="detail-label">${translations[currentLang]['measurement-distance-label'] || getTranslatedText('measurement-distance', 'Өлшеу қашықтығы (м)', 'Расстояние измерения (м)', 'Measurement Distance (m)')}:</div>
                    <div class="detail-value">${entry.parameters.measurementDistance} м</div>
                </div>`;
            if (entry.parameters.gammaRadiation) detailsHTML += `
                <div class="detail-row">
                    <div class="detail-label">${translations[currentLang]['gamma-radiation-label'] || getTranslatedText('gamma-radiation', 'Гамма-сәулелену (нГр/сағ)', 'Гамма-излучение (нГр/ч)', 'Gamma Radiation (nGy/h)')}:</div>
                    <div class="detail-value">${entry.parameters.gammaRadiation} нГр/сағ</div>
                </div>`;
            if (entry.parameters.betaRadiation) detailsHTML += `
                <div class="detail-row">
                    <div class="detail-label">${translations[currentLang]['beta-radiation-label'] || getTranslatedText('beta-radiation', 'Бета-сәулелену (част/см²·мин)', 'Бета-излучение (част/см²·мин)', 'Beta Radiation (part/cm²·min)')}:</div>
                    <div class="detail-value">${entry.parameters.betaRadiation} част/см²·мин</div>
                </div>`;
            if (entry.parameters.isotopes) detailsHTML += `
                <div class="detail-row">
                    <div class="detail-label">${translations[currentLang]['radioactive-isotopes-label'] || getTranslatedText('radioactive-isotopes', 'Радиоактивті изотоптар (егер белгілі болса)', 'Радиоактивные изотопы (если известны)', 'Radioactive Isotopes (if known)')}:</div>
                    <div class="detail-value">${entry.parameters.isotopes}</div>
                </div>`;
        } else if (entry.type === 'noise') {
            if (entry.parameters.measurementDuration) detailsHTML += `
                <div class="detail-row">
                    <div class="detail-label">${translations[currentLang]['measurement-duration-label'] || getTranslatedText('measurement-duration', 'Өлшеу ұзақтығы (минут)', 'Продолжительность измерения (минут)', 'Measurement Duration (minutes)')}:</div>
                    <div class="detail-value">${entry.parameters.measurementDuration} минут</div>
                </div>`;
            if (entry.parameters.noiseLevelDay) detailsHTML += `
                <div class="detail-row">
                    <div class="detail-label">${translations[currentLang]['noise-level-day-label'] || getTranslatedText('noise-day', 'Күндізгі шу деңгейі (дБА)', 'Уровень шума днем (дБА)', 'Daytime Noise Level (dBA)')}:</div>
                    <div class="detail-value">${entry.parameters.noiseLevelDay} дБА</div>
                </div>`;
            if (entry.parameters.noiseLevelNight) detailsHTML += `
                <div class="detail-row">
                    <div class="detail-label">${translations[currentLang]['noise-level-night-label'] || getTranslatedText('noise-night', 'Түнгі шу деңгейі (дБА)', 'Уровень шума ночью (дБА)', 'Nighttime Noise Level (dBA)')}:</div>
                    <div class="detail-value">${entry.parameters.noiseLevelNight} дБА</div>
                </div>`;
            if (entry.parameters.noiseFrequency) detailsHTML += `
                <div class="detail-row">
                    <div class="detail-label">${translations[currentLang]['noise-frequency-label'] || getTranslatedText('noise-frequency', 'Шу жиілік сипаттамасы', 'Частотная характеристика шума', 'Noise Frequency Characteristic')}:</div>
                    <div class="detail-value">${entry.parameters.noiseFrequency}</div>
                </div>`;
        } else if (entry.type === 'assessment') {
            if (entry.parameters.selectedParameters && entry.parameters.selectedParameters.length > 0) {
                detailsHTML += `
                <div class="detail-row">
                    <div class="detail-label">${translations[currentLang]['assessment-parameters-label'] || getTranslatedText('assessment-parameters', 'Бағалау параметрлері', 'Параметры оценки', 'Assessment Parameters')}:</div>
                    <div class="detail-value">${entry.parameters.selectedParameters.join(', ')}</div>
                </div>`;
            }
            if (entry.parameters.conclusion) detailsHTML += `
                <div class="detail-row">
                    <div class="detail-label">${translations[currentLang]['assessment-conclusion-label'] || getTranslatedText('assessment-conclusion', 'Бағалау қорытындысы', 'Заключение оценки', 'Assessment Conclusion')}:</div>
                    <div class="detail-value">${entry.parameters.conclusion}</div>
                </div>`;
            if (entry.parameters.recommendations) detailsHTML += `
                <div class="detail-row">
                    <div class="detail-label">${translations[currentLang]['recommendations-label'] || getTranslatedText('recommendations', 'Ұсыныстар мен шаралар', 'Рекомендации и меры', 'Recommendations and Measures')}:</div>
                    <div class="detail-value">${entry.parameters.recommendations}</div>
                </div>`;
            if (entry.parameters.nextAssessmentDate) detailsHTML += `
                <div class="detail-row">
                    <div class="detail-label">${translations[currentLang]['next-assessment-date-label'] || getTranslatedText('next-assessment', 'Келесі бағалау күні', 'Дата следующей оценки', 'Next Assessment Date')}:</div>
                    <div class="detail-value">${entry.parameters.nextAssessmentDate}</div>
                </div>`;
        }
        
        detailsHTML += `
            </div>
        `;
    }
    
    // Дополнительная информация
    detailsHTML += `
            <div class="details-section">
                <h2>${getTranslatedText('additional-info', 'Қосымша ақпарат', 'Дополнительная информация', 'Additional Information')}</h2>
    `;
    
    if (entry.additionalNotes) {
        detailsHTML += `
                <div class="detail-row">
                    <div class="detail-label">${translations[currentLang]['additional-notes-label'] || getTranslatedText('additional-notes', 'Қосымша ескертулер', 'Дополнительные примечания', 'Additional Notes')}:</div>
                    <div class="detail-value">${entry.additionalNotes}</div>
                </div>
        `;
    }
    
    
    detailsHTML += `
                <div class="detail-row">
                    <div class="detail-label">${getTranslatedText('created-date', 'Жасалған күні', 'Дата создания', 'Created Date')}:</div>
                    <div class="detail-value">${new Date(entry.createdAt).toLocaleDateString()}</div>
                </div>
            </div>
            
            <div class="popup-actions">
                <button id="popup-close-btn" class="btn">${getTranslatedText('close-button', 'Жабу', 'Закрыть', 'Close')}</button>
            </div>
        </div>
    `;
    
    // Создаем и показываем попап
    const popup = document.createElement('div');
    popup.id = 'data-details-popup';
    popup.className = 'center-popup active';
    popup.innerHTML = detailsHTML;
    
    document.body.appendChild(popup);
    
    // Добавляем обработчик для кнопки закрытия
    document.getElementById('popup-close-btn').addEventListener('click', function() {
        document.body.removeChild(popup);
    });
    
    // Закрытие при клике вне попапа
    popup.addEventListener('click', function(e) {
        if (e.target === popup) {
            document.body.removeChild(popup);
        }
    });
};
    
    // Load user orders
    function loadUserOrders() {
        const ordersContainer = document.getElementById('orders-container');
        const noOrdersMessage = document.getElementById('no-orders-message');
        
        console.log('loadUserOrders called', { isLoggedIn, currentUser });
        
        if (!isLoggedIn || !currentUser || !currentUser.id) {
            console.log('User not logged in or no id');
            ordersContainer.innerHTML = '';
            noOrdersMessage.style.display = 'block';
            return;
        }
        
        const orders = JSON.parse(localStorage.getItem('orders')) || {};
        const userOrders = orders[currentUser.id] || [];
        
        if (userOrders.length === 0) {
            ordersContainer.innerHTML = '';
            noOrdersMessage.style.display = 'block';
            return;
        }
        
        noOrdersMessage.style.display = 'none';
        
        // Сортируем заказы по дате (новые сверху)
        userOrders.sort((a, b) => new Date(b.orderDate) - new Date(a.orderDate));
        
        // Получаем данные о загрязнении
        const pollutionData = JSON.parse(localStorage.getItem('pollutionData')) || { entries: [] };
        
        // Создаем таблицу заказов
        let ordersHTML = `
            <div class="orders-table-container">
                <table class="orders-table">
                    <thead>
                        <tr>
                            <th data-i18n="order-id">${translations[currentLang]['order-id']}</th>
                            <th data-i18n="order-service">${translations[currentLang]['order-service']}</th>
                            <th data-i18n="order-date">${translations[currentLang]['order-date']}</th>
                            <th data-i18n="order-address">${translations[currentLang]['order-address']}</th>
                            <th data-i18n="order-price">${translations[currentLang]['order-price']}</th>
                            <th data-i18n="order-status">${translations[currentLang]['order-status']}</th>
                            <th data-i18n="order-actions">${translations[currentLang]['order-actions']}</th>
                        </tr>
                    </thead>
                    <tbody>
        `;
        
        userOrders.forEach(order => {
            const service = servicesData[order.serviceId] || { 
                name_kk: getTranslatedText('unknown-service', 'Белгісіз қызмет', 'Неизвестная услуга', 'Unknown service'),
                name_ru: getTranslatedText('unknown-service', 'Белгісіз қызмет', 'Неизвестная услуга', 'Unknown service'),
                name_en: getTranslatedText('unknown-service', 'Белгісіз қызмет', 'Неизвестная услуга', 'Unknown service')
            };
            const serviceName = currentLang === 'kk' ? service.name_kk : 
                               currentLang === 'ru' ? service.name_ru : service.name_en;
            
            // Определяем класс статуса
            let statusClass = '';
            let statusText = '';
            let showInProgressBadge = false;
            
            if (order.pollutionDataId) {
                // Если данные введены администратором
                statusClass = 'status-completed';
                statusText = translations[currentLang]['order-status-completed'];
            } else if (order.status === 'pending') {
                statusClass = 'status-pending';
                statusText = translations[currentLang]['order-status-pending'];
                showInProgressBadge = true; // Показываем красную плашку "Выполняется"
            } else if (order.status === 'paid') {
                statusClass = 'status-paid';
                statusText = translations[currentLang]['order-status-paid'];
            } else if (order.status === 'in-progress') {
                statusClass = 'status-in-progress';
                statusText = translations[currentLang]['order-status-in-progress'];
            } else if (order.status === 'completed') {
                statusClass = 'status-completed';
                statusText = translations[currentLang]['order-status-completed'];
            } else if (order.status === 'cancelled') {
                statusClass = 'status-cancelled';
                statusText = translations[currentLang]['order-status-cancelled'];
            }
            
            // Определяем доступные действия
            let actionsHTML = '';
            if (order.status === 'pending') {
                actionsHTML = `
                    <button class="btn btn-small pay-order-btn" data-order-id="${order.id}">${translations[currentLang]['pay-button']}</button>
                    <button class="btn btn-small btn-secondary view-order-btn" data-order-id="${order.id}">${translations[currentLang]['view-details-button']}</button>
                    <button class="btn btn-small btn-danger cancel-order-btn" data-order-id="${order.id}">${translations[currentLang]['cancel-order-button-action']}</button>
                `;
            } else if (order.status === 'paid' || order.status === 'in-progress' || order.pollutionDataId) {
                actionsHTML = `
                    <button class="btn btn-small btn-secondary view-order-btn" data-order-id="${order.id}">${translations[currentLang]['view-details-button']}</button>
                `;
            } else if (order.status === 'completed') {
                actionsHTML = `
                    <button class="btn btn-small btn-secondary view-order-btn" data-order-id="${order.id}">${translations[currentLang]['view-details-button']}</button>
                    <span class="status-badge status-completed">${statusText}</span>
                `;
            } else if (order.status === 'cancelled') {
                actionsHTML = `<span class="status-badge status-cancelled">${statusText}</span>`;
            }
            
            // Добавляем красную плашку "Выполняется", если данные еще не введены
            let inProgressBadgeHTML = '';
            if (showInProgressBadge) {
                inProgressBadgeHTML = `<div style="background-color: #ff4444; color: white; padding: 5px; border-radius: 4px; margin-top: 5px; font-size: 0.8rem;">${translations[currentLang]['order-status-in-progress-badge']}</div>`;
            }
            
            ordersHTML += `
                <tr>
                    <td>#${order.id}</td>
                    <td>${serviceName}</td>
                    <td>${order.orderDate}</td>
                    <td>${order.address}</td>
                    <td>${order.price.toLocaleString()} ₸</td>
                    <td>
                        <span class="status-badge ${statusClass}">${statusText}</span>
                        ${inProgressBadgeHTML}
                    </td>
                    <td>${actionsHTML}</td>
                </tr>
            `;
        });
        
        ordersHTML += `
                    </tbody>
                </table>
            </div>
        `;
        
        ordersContainer.innerHTML = ordersHTML;
        
        // Add event listeners to action buttons
        document.querySelectorAll('.pay-order-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                const orderId = this.getAttribute('data-order-id');
                showPaymentModal(orderId);
            });
        });
        
        document.querySelectorAll('.view-order-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                const orderId = this.getAttribute('data-order-id');
                viewOrderDetails(orderId);
            });
        });
        
        document.querySelectorAll('.cancel-order-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                const orderId = this.getAttribute('data-order-id');
                cancelOrder(orderId);
            });
        });
    }
    
    // Show payment modal
    function showPaymentModal(orderId) {
        const orders = JSON.parse(localStorage.getItem('orders')) || {};
        const userOrders = orders[currentUser.id] || [];
        const order = userOrders.find(o => o.id == orderId);
        
        if (!order) return;
        
        orderToPay = orderId;
        
        const service = servicesData[order.serviceId] || { 
            name_kk: getTranslatedText('unknown-service', 'Белгісіз қызмет', 'Неизвестная услуга', 'Unknown service'),
            name_ru: getTranslatedText('unknown-service', 'Белгісіз қызмет', 'Неизвестная услуга', 'Unknown service'),
            name_en: getTranslatedText('unknown-service', 'Белгісіз қызмет', 'Неизвестная услуга', 'Unknown service')
        };
        const serviceName = currentLang === 'kk' ? service.name_kk : 
                           currentLang === 'ru' ? service.name_ru : service.name_en;
        
        // Fill payment details
        const paymentDetails = document.getElementById('payment-order-details');
        paymentDetails.innerHTML = `
            <div class="order-details">
                <h3>${translations[currentLang]['payment-title']}</h3>
                <div class="order-details-grid">
                    <div class="order-detail-item">
                        <div class="order-detail-label">${translations[currentLang]['order-service']}:</div>
                        <div class="order-detail-value">${serviceName}</div>
                    </div>
                    <div class="order-detail-item">
                        <div class="order-detail-label">${translations[currentLang]['order-id']}:</div>
                        <div class="order-detail-value">#${order.id}</div>
                    </div>
                    <div class="order-detail-item">
                        <div class="order-detail-label">${translations[currentLang]['order-date']}:</div>
                        <div class="order-detail-value">${order.orderDate}</div>
                    </div>
                    <div class="order-detail-item">
                        <div class="order-detail-label">${translations[currentLang]['order-price']}:</div>
                        <div class="order-detail-value">${order.price.toLocaleString()} ₸</div>
                    </div>
                </div>
            </div>
        `;
        
        // Reset payment form
        paymentForm.reset();
        document.getElementById('card-details').style.display = 'block';
        document.getElementById('wallet-details').style.display = 'none';
        
        // Show payment modal
        paymentModal.style.display = 'block';
    }
    
    // Payment method selection
    const paymentMethods = document.querySelectorAll('input[name="payment-method"]');
    paymentMethods.forEach(method => {
        method.addEventListener('change', function() {
            if (this.value === 'card') {
                document.getElementById('card-details').style.display = 'block';
                document.getElementById('wallet-details').style.display = 'none';
            } else {
                document.getElementById('card-details').style.display = 'none';
                document.getElementById('wallet-details').style.display = 'block';
            }
        });
    });
    
    // Handle payment form submission
    if (paymentForm) {
        paymentForm.addEventListener('submit', function(e) {
            e.preventDefault();
            
            if (!orderToPay) return;
            
            // Здесь должна быть реальная логика оплаты
            // Для демонстрации просто меняем статус заказа
            
            const orders = JSON.parse(localStorage.getItem('orders')) || {};
            const userOrders = orders[currentUser.id] || [];
            const orderIndex = userOrders.findIndex(o => o.id == orderToPay);
            
            if (orderIndex !== -1) {
                userOrders[orderIndex].status = 'paid';
                userOrders[orderIndex].paidAt = new Date().toISOString();
                
                // Сохраняем изменения
                orders[currentUser.id] = userOrders;
                localStorage.setItem('orders', JSON.stringify(orders));
                
                // Закрываем модальное окно
                paymentModal.style.display = 'none';
                
                // Обновляем список заказов
                loadUserOrders();
                
                // Показываем сообщение об успехе
                alert(translations[currentLang]['payment-success']);
            }
        });
    }
    
    // View order details
    function viewOrderDetails(orderId) {
        const orders = JSON.parse(localStorage.getItem('orders')) || {};
        const userOrders = orders[currentUser.id] || [];
        const order = userOrders.find(o => o.id == orderId);
        
        if (!order) return;
        
        const service = servicesData[order.serviceId] || { 
            name_kk: getTranslatedText('unknown-service', 'Белгісіз қызмет', 'Неизвестная услуга', 'Unknown service'),
            name_ru: getTranslatedText('unknown-service', 'Белгісіз қызмет', 'Неизвестная услуга', 'Unknown service'),
            name_en: getTranslatedText('unknown-service', 'Белгісіз қызмет', 'Неизвестная услуга', 'Unknown service')
        };
        const serviceName = currentLang === 'kk' ? service.name_kk : 
                           currentLang === 'ru' ? service.name_ru : service.name_en;
        
        const statusText = getOrderStatusText(order.status);
        
        // Получаем данные о загрязнении, если они есть
        let pollutionDataHTML = '';
        if (order.pollutionDataId) {
            const pollutionData = JSON.parse(localStorage.getItem('pollutionData')) || { entries: [] };
            const pollutionEntry = pollutionData.entries.find(e => e.id === order.pollutionDataId);
            
            if (pollutionEntry) {
                pollutionDataHTML = `
                    <div style="margin-top: 15px; padding: 15px; background-color: #e8f5e9; border-radius: 5px;">
                        <h4>${translations[currentLang]['table-data']}:</h4>
                        <p><strong>${translations[currentLang]['table-date']}:</strong> ${pollutionEntry.date}</p>
                        <p><strong>${translations[currentLang]['table-location']}:</strong> ${pollutionEntry.location}</p>
                        <p><strong>${translations[currentLang]['table-type']}:</strong> ${pollutionEntry.type === 'water' ? translations[currentLang]['water-type'] : pollutionEntry.type === 'air' ? translations[currentLang]['air-type'] : translations[currentLang]['waste-type']}</p>
                `;
                
                if (pollutionEntry.additionalNotes) {
                    pollutionDataHTML += `<p><strong>${translations[currentLang]['additional-notes-label']}:</strong> ${pollutionEntry.additionalNotes}</p>`;
                }
                
                pollutionDataHTML += `</div>`;
            }
        }
        
        let detailsHTML = `
            <div class="order-details">
                <h3>${translations[currentLang]['order-id']} #${order.id}</h3>
                <div class="order-details-grid">
                    <div class="order-detail-item">
                        <div class="order-detail-label">${translations[currentLang]['order-service']}:</div>
                        <div class="order-detail-value">${serviceName}</div>
                    </div>
                    <div class="order-detail-item">
                        <div class="order-detail-label">${translations[currentLang]['order-date']}:</div>
                        <div class="order-detail-value">${order.orderDate}</div>
                    </div>
                    <div class="order-detail-item">
                        <div class="order-detail-label">${translations[currentLang]['order-address']}:</div>
                        <div class="order-detail-value">${order.address}</div>
                    </div>
                    <div class="order-detail-item">
                        <div class="order-detail-label">${translations[currentLang]['order-price']}:</div>
                        <div class="order-detail-value">${order.price.toLocaleString()} ₸</div>
                    </div>
                    <div class="order-detail-item">
                        <div class="order-detail-label">${translations[currentLang]['order-status']}:</div>
                        <div class="order-detail-value">${statusText}</div>
                    </div>
                    <div class="order-detail-item">
                        <div class="order-detail-label">${translations[currentLang]['order-phone-label']}:</div>
                        <div class="order-detail-value">${order.phone}</div>
                    </div>
                    <div class="order-detail-item">
                        <div class="order-detail-label">${translations[currentLang]['order-email-label']}:</div>
                        <div class="order-detail-value">${order.email}</div>
                    </div>
                    <div class="order-detail-item">
                        <div class="order-detail-label">${translations[currentLang]['hide-data-user-label']}:</div>
                        <div class="order-detail-value">${order.hideData ? translations[currentLang]['yes'] : translations[currentLang]['no']}</div>
                    </div>
                </div>
                ${order.notes ? `
                    <div class="order-detail-item">
                        <div class="order-detail-label">${translations[currentLang]['order-notes-label']}:</div>
                        <div class="order-detail-value">${order.notes}</div>
                    </div>
                ` : ''}
                ${pollutionDataHTML}
                ${order.paidAt ? `
                    <div class="order-detail-item">
                        <div class="order-detail-label">${getTranslatedText('payment-date', 'Төлем күні', 'Дата оплаты', 'Payment Date')}:</div>
                        <div class="order-detail-value">${new Date(order.paidAt).toLocaleDateString()}</div>
                    </div>
                ` : ''}
                ${order.createdAt ? `
                    <div class="order-detail-item">
                        <div class="order-detail-label">${getTranslatedText('created-date', 'Жасалған күні', 'Дата создания', 'Created Date')}:</div>
                        <div class="order-detail-value">${new Date(order.createdAt).toLocaleDateString()}</div>
                    </div>
                ` : ''}
            </div>
        `;
        
        // Создаем модальное окно для отображения деталей
        const modal = document.createElement('div');
        modal.className = 'modal';
        modal.style.display = 'block';
        modal.innerHTML = `
            <div class="modal-content" style="max-width: 600px;">
                <span class="close-modal" onclick="this.parentElement.parentElement.style.display='none'">&times;</span>
                ${detailsHTML}
            </div>
        `;
        
        document.body.appendChild(modal);
        
        // Закрытие модального окна при клике вне его
        modal.addEventListener('click', function(e) {
            if (e.target === modal) {
                modal.style.display = 'none';
                document.body.removeChild(modal);
            }
        });
    }
    
    // Cancel order
    function cancelOrder(orderId) {
        const confirmMessage = getTranslatedText(
            'cancel-order-confirm',
            'Сіз шынымен бұл тапсырысты болдырмағыңыз келе ме?',
            'Вы действительно хотите отменить этот заказ?',
            'Are you sure you want to cancel this order?'
        );
        
        if (!confirm(confirmMessage)) return;
        
        const orders = JSON.parse(localStorage.getItem('orders')) || {};
        const userOrders = orders[currentUser.id] || [];
        const orderIndex = userOrders.findIndex(o => o.id == orderId);
        
        if (orderIndex !== -1) {
            userOrders[orderIndex].status = 'cancelled';
            
            // Сохраняем изменения
            orders[currentUser.id] = userOrders;
            localStorage.setItem('orders', JSON.stringify(orders));
            
            // Обновляем список заказов
            loadUserOrders();
            
            // Показываем сообщение
            const successMessage = getTranslatedText(
                'order-cancelled',
                'Тапсырыс сәтті болдыртылды.',
                'Заказ успешно отменен.',
                'Order successfully cancelled.'
            );
            alert(successMessage);
        }
    }
    
    // Export button
    const exportBtn = document.getElementById('export-btn');
    if (exportBtn) {
        exportBtn.addEventListener('click', function() {
            const pollutionData = JSON.parse(localStorage.getItem('pollutionData')) || { entries: [] };
            
            // Получаем текущие значения фильтров
            const filterType = document.getElementById('filter-type')?.value || 'all';
            const filterDate = document.getElementById('filter-date')?.value || '';
            const filterLocation = document.getElementById('filter-location')?.value || '';
            
            // Фильтруем данные так же, как при отображении
            let filteredData = pollutionData.entries.filter(entry => !entry.hidden);
            
            if (filterType && filterType !== 'all') {
                filteredData = filteredData.filter(entry => entry.type === filterType);
            }
            
            if (filterDate) {
                filteredData = filteredData.filter(entry => entry.date === filterDate);
            }
            
            if (filterLocation) {
                const locationLower = filterLocation.toLowerCase();
                filteredData = filteredData.filter(entry => 
                    entry.location && entry.location.toLowerCase().includes(locationLower)
                );
            }
            
            if (filteredData.length === 0) {
                const errorMessage = getTranslatedText(
                    'no-data-to-export',
                    'Экспорттау үшін деректер жоқ',
                    'Нет данных для экспорта',
                    'No data to export'
                );
                alert(errorMessage);
                return;
            }
            
            // Создаем CSV содержимое
            let csvContent = "data:text/csv;charset=utf-8,";
        csvContent += getTranslatedText(
            'csv-header',
            'Күні,Түрі,Орналасқан жері,Деректер\n',
            'Дата,Тип,Местоположение,Данные\n',
            'Date,Type,Location,Data\n'
        );
            
            filteredData.forEach(entry => {
                let typeText = '';
                if (entry.type === 'water') {
                    typeText = getTranslatedText('water-type', 'Су', 'Вода', 'Water');
                } else if (entry.type === 'air') {
                    typeText = getTranslatedText('air-type', 'Ауа', 'Воздух', 'Air');
                } else if (entry.type === 'waste') {
                    typeText = getTranslatedText('waste-type', 'Қоқыс', 'Отходы', 'Waste');
                } else if (entry.type === 'radioactive') {
                    typeText = getTranslatedText('radioactive-type', 'Радиоактивті', 'Радиоактивное', 'Radioactive');
                } else if (entry.type === 'noise') {
                    typeText = getTranslatedText('noise-type', 'Шу', 'Шум', 'Noise');
                } else if (entry.type === 'assessment') {
                    typeText = getTranslatedText('assessment-type', 'Бағалау', 'Оценка', 'Assessment');
                }
                
                let dataText = '';
                if (entry.type === 'water') {
                    dataText = `${getTranslatedText('source', 'Көзі', 'Источник', 'Source')}: ${entry.sourceType}, ${getTranslatedText('pollution-type', 'Ластану түрі', 'Тип загрязнения', 'Pollution type')}: ${entry.pollutionType}`;
                } else if (entry.type === 'air') {
                    dataText = `${getTranslatedText('pollution-type', 'Ластану түрі', 'Тип загрязнения', 'Pollution type')}: ${entry.pollutionType}`;
                } else if (entry.type === 'waste') {
                    dataText = `${getTranslatedText('waste-type', 'Қоқыс түрі', 'Тип отходов', 'Waste type')}: ${entry.wasteType}`;
                } else if (entry.type === 'radioactive') {
                    dataText = `${getTranslatedText('source', 'Көзі', 'Источник', 'Source')}: ${entry.sourceType}, ${getTranslatedText('radiation-level', 'Радиация деңгейі', 'Уровень радиации', 'Radiation level')}: ${entry.radiationLevel} ${getTranslatedText('radiation-unit', 'мкЗв/сағ', 'мкЗв/ч', 'µSv/h')}`;
                } else if (entry.type === 'noise') {
                    dataText = `${getTranslatedText('source', 'Көзі', 'Источник', 'Source')}: ${entry.sourceType}, ${getTranslatedText('noise-day', 'Күндізгі шу', 'Шум днем', 'Daytime noise')}: ${entry.noiseLevelDay} ${getTranslatedText('noise-unit', 'дБА', 'дБА', 'dBA')}, ${getTranslatedText('noise-night', 'Түнгі шу', 'Шум ночью', 'Nighttime noise')}: ${entry.noiseLevelNight} ${getTranslatedText('noise-unit', 'дБА', 'дБА', 'dBA')}`;
                } else if (entry.type === 'assessment') {
                    dataText = `${getTranslatedText('assessment-type', 'Бағалау түрі', 'Тип оценки', 'Assessment type')}: ${entry.assessmentType}, ${getTranslatedText('assessment-conclusion', 'Қорытынды', 'Заключение', 'Conclusion')}: ${entry.conclusion}`;
                }
                
                csvContent += `"${entry.date}","${typeText}","${entry.location}","${dataText}"\n`;
            });
            
            // Создаем ссылку для скачивания
            const encodedUri = encodeURI(csvContent);
            const link = document.createElement("a");
            link.setAttribute("href", encodedUri);
            link.setAttribute("download", getTranslatedText(
                'export-filename',
                'экологиялық_деректер.csv',
                'экологические_данные.csv',
                'environmental_data.csv'
            ));
            document.body.appendChild(link);
            
            // Запускаем скачивание
            link.click();
            document.body.removeChild(link);
        });
    }

    // Scroll to top functionality
    scrollToTopBtn.addEventListener('click', function() {
        window.scrollTo({
            top: 0,
            behavior: 'smooth'
        });
    });
    
    // Scroll to bottom functionality
    scrollToBottomBtn.addEventListener('click', function() {
        window.scrollTo({
            top: document.body.scrollHeight,
            behavior: 'smooth'
        });
    });
    
    // Show/hide scroll buttons based on scroll position
    window.addEventListener('scroll', function() {
        // Show scroll to top button when scrolled down
        if (window.pageYOffset > 300) {
            scrollToTopBtn.style.display = 'flex';
        } else {
            scrollToTopBtn.style.display = 'none';
        }
        
        // Show scroll to bottom button when not at the bottom
        const windowHeight = window.innerHeight;
        const documentHeight = document.documentElement.scrollHeight;
        const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
        
        if (scrollTop + windowHeight < documentHeight - 100) {
            scrollToBottomBtn.style.display = 'flex';
        } else {
            scrollToBottomBtn.style.display = 'none';
        }
    });
    
    // Функция для завершения заказа администратором
    function completeOrderAsAdmin(orderId) {
        const orders = JSON.parse(localStorage.getItem('orders')) || {};
        
        // Найти заказ во всех заказах
        let orderFound = false;
        for (const userId in orders) {
            const userOrders = orders[userId];
            const orderIndex = userOrders.findIndex(o => o.id == orderId);
            if (orderIndex !== -1) {
                userOrders[orderIndex].status = 'completed';
                orderFound = true;
                break;
            }
        }
        
        if (orderFound) {
            localStorage.setItem('orders', JSON.stringify(orders));
            showAdminMessage(translations[currentLang]['order-completed']);
            showAllOrders(); // Обновляем список заказов
        }
    }
    
    // Функция для ввода данных по заказу
    function enterDataForOrder(orderId) {
        // Закрываем админ панель
        adminModal.style.display = 'none';
        
        // Переключаем на страницу ввода данных о загрязнении
        switchToPage('pollution-data');
        
        // Показываем сообщение с номером заказа
        const message = getTranslatedText(
            'enter-data-for-order',
            'Тапсырыс №',
            'Введите данные для заказа №',
            'Enter data for order №'
        ) + orderId + getTranslatedText(
            'specify-order-number',
            ' үшін деректерді енгізіңіз. Тапсырыс нөмірін "Тапсырыс нөмірі" өрісінде көрсетіңіз.',
            '. Укажите номер заказа в поле "Номер заказа".',
            '. Specify the order number in the "Order number" field.'
        );
        alert(message);
    }
    
    // Функция для просмотра данных заказа администратором
    function viewOrderDataAsAdmin(orderId) {
        const orders = JSON.parse(localStorage.getItem('orders')) || {};
        const pollutionData = JSON.parse(localStorage.getItem('pollutionData')) || { entries: [] };
        
        // Найти заказ
        let order = null;
        let userId = null;
        for (const uid in orders) {
            const userOrders = orders[uid];
            const foundOrder = userOrders.find(o => o.id == orderId);
            if (foundOrder) {
                order = foundOrder;
                userId = uid;
                break;
            }
        }
        
        if (!order || !order.pollutionDataId) {
            const errorMessage = getTranslatedText(
                'data-not-found',
                'Деректер табылмады',
                'Данные не найдены',
                'Data not found'
            );
            alert(errorMessage);
            return;
        }
        
        // Найти данные о загрязнении
        const pollutionEntry = pollutionData.entries.find(e => e.id === order.pollutionDataId);
        if (!pollutionEntry) {
            const errorMessage = getTranslatedText(
                'pollution-data-not-found',
                'Ластану деректері табылмады',
                'Данные о загрязнении не найдены',
                'Pollution data not found'
            );
            alert(errorMessage);
            return;
        }
        
        const service = servicesData[order.serviceId] || { 
            name_kk: getTranslatedText('unknown-service', 'Белгісіз қызмет', 'Неизвестная услуга', 'Unknown service'),
            name_ru: getTranslatedText('unknown-service', 'Белгісіз қызмет', 'Неизвестная услуга', 'Unknown service'),
            name_en: getTranslatedText('unknown-service', 'Белгісіз қызмет', 'Неизвестная услуга', 'Unknown service')
        };
        const serviceName = currentLang === 'kk' ? service.name_kk : 
                           currentLang === 'ru' ? service.name_ru : service.name_en;
        
        // Формируем детали данных
        let pollutionDetails = '';
        if (pollutionEntry.type === 'water') {
            pollutionDetails = `
                <p><strong>${translations[currentLang]['water-source-type-label'] || getTranslatedText('water-source-type', 'Су көзінің түрі', 'Тип водного источника', 'Water Source Type')}:</strong> ${pollutionEntry.sourceType}</p>
                <p><strong>${translations[currentLang]['location-label'] || getTranslatedText('location', 'Орналасқан жері', 'Местоположение', 'Location')}:</strong> ${pollutionEntry.location}</p>
                <p><strong>${translations[currentLang]['date-label'] || getTranslatedText('date', 'Күні', 'Дата', 'Date')}:</strong> ${pollutionEntry.date}</p>
                <p><strong>${translations[currentLang]['pollution-type-label'] || getTranslatedText('pollution-type', 'Ластану түрі', 'Тип загрязнения', 'Pollution Type')}:</strong> ${pollutionEntry.pollutionType}</p>
                <p><strong>${getTranslatedText('ph-level', 'pH деңгейі', 'Уровень pH', 'pH Level')}:</strong> ${pollutionEntry.parameters.phLevel || getTranslatedText('not-available', 'н/д', 'н/д', 'n/a')}</p>
                <p><strong>${translations[currentLang]['heavy-metals-label'] || getTranslatedText('heavy-metals', 'Ауыр металдар концентрациясы', 'Концентрация тяжелых металлов', 'Heavy metals concentration')}:</strong> ${pollutionEntry.parameters.heavyMetals || getTranslatedText('not-available', 'н/д', 'н/д', 'n/a')}</p>
                <p><strong>${translations[currentLang]['nitrates-label'] || getTranslatedText('nitrates', 'Нитраттар концентрациясы', 'Концентрация нитратов', 'Nitrates concentration')}:</strong> ${pollutionEntry.parameters.nitrates || getTranslatedText('not-available', 'н/д', 'н/д', 'n/a')}</p>
                <p><strong>${translations[currentLang]['phosphates-label'] || getTranslatedText('phosphates', 'Фосфаттар концентрациясы', 'Концентрация фосфатов', 'Phosphates concentration')}:</strong> ${pollutionEntry.parameters.phosphates || getTranslatedText('not-available', 'н/д', 'н/д', 'n/a')}</p>
            `;
        } else if (pollutionEntry.type === 'air') {
            pollutionDetails = `
                <p><strong>${translations[currentLang]['location-label'] || getTranslatedText('location', 'Орналасқан жері', 'Местоположение', 'Location')}:</strong> ${pollutionEntry.location}</p>
                <p><strong>${translations[currentLang]['date-label'] || getTranslatedText('date', 'Күні', 'Дата', 'Date')}:</strong> ${pollutionEntry.date}</p>
                <p><strong>${translations[currentLang]['pollution-type-label'] || getTranslatedText('pollution-type', 'Ластану түрі', 'Тип загрязнения', 'Pollution Type')}:</strong> ${pollutionEntry.pollutionType}</p>
                <p><strong>PM2.5:</strong> ${pollutionEntry.parameters.pm25 || getTranslatedText('not-available', 'н/д', 'н/д', 'n/a')} мкг/м³</p>
                <p><strong>PM10:</strong> ${pollutionEntry.parameters.pm10 || getTranslatedText('not-available', 'н/д', 'н/д', 'n/a')} мкг/м³</p>
                <p><strong>CO:</strong> ${pollutionEntry.parameters.co || getTranslatedText('not-available', 'н/д', 'н/д', 'n/a')} мг/м³</p>
                <p><strong>SO₂:</strong> ${pollutionEntry.parameters.so2 || getTranslatedText('not-available', 'н/д', 'н/д', 'n/a')} мкг/м³</p>
            `;
        } else if (pollutionEntry.type === 'waste') {
            pollutionDetails = `
                <p><strong>${translations[currentLang]['location-label'] || getTranslatedText('location', 'Орналасқан жері', 'Местоположение', 'Location')}:</strong> ${pollutionEntry.location}</p>
                <p><strong>${translations[currentLang]['date-label'] || getTranslatedText('date', 'Күні', 'Дата', 'Date')}:</strong> ${pollutionEntry.date}</p>
                <p><strong>${translations[currentLang]['waste-type-label'] || getTranslatedText('waste-type', 'Қоқыс түрі', 'Тип отходов', 'Waste Type')}:</strong> ${pollutionEntry.wasteType}</p>
                <p><strong>${translations[currentLang]['waste-volume-label'] || getTranslatedText('waste-volume', 'Қоқыс көлемі', 'Объем отходов', 'Waste Volume')}:</strong> ${pollutionEntry.parameters.volume || getTranslatedText('not-available', 'н/д', 'н/д', 'n/a')}</p>
                <p><strong>${translations[currentLang]['waste-weight-label'] || getTranslatedText('waste-weight', 'Қоқыс салмағы', 'Вес отходов', 'Waste Weight')}:</strong> ${pollutionEntry.parameters.weight || getTranslatedText('not-available', 'н/д', 'н/д', 'n/a')}</p>
            `;
        } else if (pollutionEntry.type === 'radioactive') {
            pollutionDetails = `
                <p><strong>${translations[currentLang]['radiation-source-type-label'] || getTranslatedText('radiation-source', 'Радиация көзі', 'Источник радиации', 'Radiation Source')}:</strong> ${pollutionEntry.sourceType}</p>
                <p><strong>${translations[currentLang]['location-label'] || getTranslatedText('location', 'Орналасқан жері', 'Местоположение', 'Location')}:</strong> ${pollutionEntry.location}</p>
                <p><strong>${translations[currentLang]['date-label'] || getTranslatedText('date', 'Күні', 'Дата', 'Date')}:</strong> ${pollutionEntry.date}</p>
                <p><strong>${translations[currentLang]['radiation-level-label'] || getTranslatedText('radiation-level', 'Радиация деңгейі', 'Уровень радиации', 'Radiation Level')}:</strong> ${pollutionEntry.parameters.radiationLevel || getTranslatedText('not-available', 'н/д', 'н/д', 'n/a')} мкЗв/сағ</p>
                <p><strong>${translations[currentLang]['measurement-distance-label'] || getTranslatedText('measurement-distance', 'Өлшеу қашықтығы', 'Расстояние измерения', 'Measurement Distance')}:</strong> ${pollutionEntry.parameters.measurementDistance || getTranslatedText('not-available', 'н/д', 'н/д', 'n/a')} м</p>
                <p><strong>${translations[currentLang]['gamma-radiation-label'] || getTranslatedText('gamma-radiation', 'Гамма-сәулелену', 'Гамма-излучение', 'Gamma Radiation')}:</strong> ${pollutionEntry.parameters.gammaRadiation || getTranslatedText('not-available', 'н/д', 'н/д', 'n/a')} нГр/сағ</p>
                <p><strong>${translations[currentLang]['beta-radiation-label'] || getTranslatedText('beta-radiation', 'Бета-сәулелену', 'Бета-излучение', 'Beta Radiation')}:</strong> ${pollutionEntry.parameters.betaRadiation || getTranslatedText('not-available', 'н/д', 'н/д', 'n/a')} част/см²·мин</p>
                <p><strong>${translations[currentLang]['radioactive-isotopes-label'] || getTranslatedText('radioactive-isotopes', 'Радиоактивті изотоптар', 'Радиоактивные изотопы', 'Radioactive Isotopes')}:</strong> ${pollutionEntry.parameters.isotopes || getTranslatedText('not-available', 'н/д', 'н/д', 'n/a')}</p>
            `;
        } else if (pollutionEntry.type === 'noise') {
            pollutionDetails = `
                <p><strong>${translations[currentLang]['noise-source-type-label'] || getTranslatedText('noise-source', 'Шу көзі', 'Источник шума', 'Noise Source')}:</strong> ${pollutionEntry.sourceType}</p>
                <p><strong>${translations[currentLang]['location-label'] || getTranslatedText('location', 'Орналасқан жері', 'Местоположение', 'Location')}:</strong> ${pollutionEntry.location}</p>
                <p><strong>${translations[currentLang]['date-label'] || getTranslatedText('date', 'Күні', 'Дата', 'Date')}:</strong> ${pollutionEntry.date}</p>
                <p><strong>${translations[currentLang]['noise-time-label'] || getTranslatedText('time', 'Уақыт', 'Время', 'Time')}:</strong> ${pollutionEntry.time || getTranslatedText('not-available', 'н/д', 'н/д', 'n/a')}</p>
                <p><strong>${translations[currentLang]['measurement-duration-label'] || getTranslatedText('measurement-duration', 'Өлшеу ұзақтығы', 'Продолжительность измерения', 'Measurement Duration')}:</strong> ${pollutionEntry.parameters.measurementDuration || getTranslatedText('not-available', 'н/д', 'н/д', 'n/a')} минут</p>
                <p><strong>${translations[currentLang]['noise-level-day-label'] || getTranslatedText('noise-day', 'Күндізгі шу деңгейі', 'Уровень шума днем', 'Daytime Noise Level')}:</strong> ${pollutionEntry.parameters.noiseLevelDay || getTranslatedText('not-available', 'н/д', 'н/д', 'n/a')} дБА</p>
                <p><strong>${translations[currentLang]['noise-level-night-label'] || getTranslatedText('noise-night', 'Түнгі шу деңгейі', 'Уровень шума ночью', 'Nighttime Noise Level')}:</strong> ${pollutionEntry.parameters.noiseLevelNight || getTranslatedText('not-available', 'н/д', 'н/д', 'n/a')} дБА</p>
                <p><strong>${translations[currentLang]['noise-frequency-label'] || getTranslatedText('noise-frequency', 'Шу жиілік сипаттамасы', 'Частотная характеристика шума', 'Noise Frequency Characteristic')}:</strong> ${pollutionEntry.parameters.noiseFrequency || getTranslatedText('not-available', 'н/д', 'н/д', 'n/a')}</p>
            `;
        } else if (pollutionEntry.type === 'assessment') {
            const parametersText = pollutionEntry.parameters.selectedParameters 
                ? pollutionEntry.parameters.selectedParameters.join(', ')
                : getTranslatedText('not-available', 'н/д', 'н/д', 'n/a');
            
            pollutionDetails = `
                <p><strong>${translations[currentLang]['assessment-type-label'] || getTranslatedText('assessment-type', 'Бағалау түрі', 'Тип оценки', 'Assessment Type')}:</strong> ${pollutionEntry.assessmentType}</p>
                <p><strong>${translations[currentLang]['location-label'] || getTranslatedText('location', 'Орналасқан жері', 'Местоположение', 'Location')}:</strong> ${pollutionEntry.location}</p>
                <p><strong>${translations[currentLang]['date-label'] || getTranslatedText('date', 'Күні', 'Дата', 'Date')}:</strong> ${pollutionEntry.date}</p>
                <p><strong>${translations[currentLang]['assessment-object-label'] || getTranslatedText('assessment-object', 'Бағаланатын объект', 'Оцениваемый объект', 'Assessment Object')}:</strong> ${pollutionEntry.assessmentObject}</p>
                <p><strong>${translations[currentLang]['assessment-parameters-label'] || getTranslatedText('assessment-parameters', 'Бағалау параметрлері', 'Параметры оценки', 'Assessment Parameters')}:</strong> ${parametersText}</p>
                <p><strong>${translations[currentLang]['assessment-conclusion-label'] || getTranslatedText('assessment-conclusion', 'Бағалау қорытындысы', 'Заключение оценки', 'Assessment Conclusion')}:</strong> ${pollutionEntry.parameters.conclusion || getTranslatedText('not-available', 'н/д', 'н/д', 'n/a')}</p>
                <p><strong>${translations[currentLang]['recommendations-label'] || getTranslatedText('recommendations', 'Ұсыныстар мен шаралар', 'Рекомендации и меры', 'Recommendations and Measures')}:</strong> ${pollutionEntry.parameters.recommendations || getTranslatedText('not-available', 'н/д', 'н/д', 'n/a')}</p>
                <p><strong>${translations[currentLang]['next-assessment-date-label'] || getTranslatedText('next-assessment', 'Келесі бағалау күні', 'Дата следующей оценки', 'Next Assessment Date')}:</strong> ${pollutionEntry.parameters.nextAssessmentDate || getTranslatedText('not-available', 'н/д', 'н/д', 'n/a')}</p>
            `;
        }
        
        if (pollutionEntry.additionalNotes) {
            pollutionDetails += `<p><strong>${translations[currentLang]['additional-notes-label'] || getTranslatedText('additional-notes', 'Қосымша ескертулер', 'Дополнительные примечания', 'Additional Notes')}:</strong> ${pollutionEntry.additionalNotes}</p>`;
        }
        
        const detailsHTML = `
            <div class="order-details">
                <h3>${getTranslatedText('order-details', 'Тапсырыс мәліметтері', 'Детали заказа', 'Order Details')} #${order.id}</h3>
                <div class="order-details-grid">
                    <div class="order-detail-item">
                        <div class="order-detail-label">${translations[currentLang]['order-service'] || getTranslatedText('order-service', 'Қызмет', 'Услуга', 'Service')}:</div>
                        <div class="order-detail-value">${serviceName}</div>
                    </div>
                    <div class="order-detail-item">
                        <div class="order-detail-label">${translations[currentLang]['order-date'] || getTranslatedText('order-date', 'Күні', 'Дата', 'Date')}:</div>
                        <div class="order-detail-value">${order.orderDate}</div>
                    </div>
                    <div class="order-detail-item">
                        <div class="order-detail-label">${translations[currentLang]['order-address'] || getTranslatedText('order-address', 'Мекенжай', 'Адрес', 'Address')}:</div>
                        <div class="order-detail-value">${order.address}</div>
                    </div>
                </div>
                <h4>${getTranslatedText('pollution-data', 'Ластану деректері', 'Данные о загрязнении', 'Pollution Data')}</h4>
                ${pollutionDetails}
            </div>
        `;
        
        // Создаем модальное окно для отображения деталей
        const modal = document.createElement('div');
        modal.className = 'modal';
        modal.style.display = 'block';
        modal.innerHTML = `
            <div class="modal-content" style="max-width: 700px;">
                <span class="close-modal" onclick="this.parentElement.parentElement.style.display='none'">&times;</span>
                ${detailsHTML}
            </div>
        `;
        
        document.body.appendChild(modal);
        
        // Закрытие модального окна при клике вне его
        modal.addEventListener('click', function(e) {
            if (e.target === modal) {
                modal.style.display = 'none';
                document.body.removeChild(modal);
            }
        });
    }
    
    // Инициализация при загрузке страницы
    changeLanguage(currentLang);
    
    // Добавим отладочную информацию
    console.log('Initialization complete', {
        isLoggedIn,
        currentUser,
        localStorageUsers: JSON.parse(localStorage.getItem('users') || '{}'),
        localStorageCurrentUser: JSON.parse(localStorage.getItem('currentUser') || '{}')
    });
});